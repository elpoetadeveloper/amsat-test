var lastdatetime,defaults,maxsatfreq,saveaoslosid,sunlon,sunlat,zx1,zy1,zl1,zx2,zy2,zl2,zx3,zy3,zl3,zx4,zy4,zl4,satelitename,dlink,ulink,beacon,muplink,mdolink,mbeacon,doppler_factor,satselected,recoversat,popup,add,del,newcycle,popupwin,popupwi,flash,ventana,bip=!0,birdsw=!0;rotorsw=!0;for(var alljs=[[]],localtime=!0,tiposel=5,deltaminutes=0,bipset=!1,localat="0",localon="0",savesatid="",prevsatid="",saveclickid="",dir="",lastrange=0,speedc=299792.458,satfreq=[],x=0;x<30;x++){satfreq[x]=[];for(var y=0;y<30;y++)satfreq[x][y]=x*y}var satfreqpointer=0,slant_range_new=[],slant_range_old=[],icons=[],aostime=[],aostt=[],lostt=[],delta=new MakeArray(0),displacement=new MakeArray(0),selsatsave=[],satactivity="",firstclick=!0,autoclick=!1,aumento=1,leyen="",tablelasttime=new Date,zoom=1,wispmode="bn",wispazimuth=0,wispelevation=0,dir="&#x25BC;",uldeltad=0,dldeltad=0,bndeltad=0,savebox="",borrarbox=!0,DopplerchangeUplink=!0,DopplerchangeDownlink=!0,refresh=!0,selectoptions="<option value=0>CW</option>\n  <option value=1>LSB</option>\n  <option value=2>USB</option>\n  <option value=3>FM</option>\n  <option value=4>FM-N</option>\n  <option value=5>FM-W</option>\n  <option value=6>AM</option>\n  <option value=7>CW-N</option>\n  <option value=7>CW-R</option>\n  <option value=7>DIG</option>\n  <option value=8>PKT</option>",vbasic=!1,dshow="",birds="",zoom="1",order=1,sortm=[],tiposatswitch=!1,dst=0,indst=!1,dstinfo="",warntoken=0,vbasice=!1,elevationset=0,azisw="&nbsp;N&nbsp;",progsw="&nbsp;N&nbsp;",wispextra="",dateset=!1,yellowcount=0,losMeses="EneFebMarAbrMayJunJulAgoSetOctNovDic",birdhelp="<a href='#' title='Click for additional\nfrequency changes' onclick='event.preventDefault();if(vbasice){vbasice=false}else{vbasice=true}'>Zoom</a><br>\n    <a href=# onclick=\"event.preventDefault();changeorder();\" title=\"- Change Order -&#13 0: By AGE asc.&#13 1: By NAME asc.&#13 2: By NAME desc&#13 3: By AGE desc\" style=\"color:#00ffff;cursor:pointer;\">Sort";window.name="pass";var rando=("00"+Math.floor(100*Math.random())).slice(-2),iconos=[imageSrcUrl.saticon5,imageSrcUrl.saticon4,imageSrcUrl.saticon2,imageSrcUrl.saticon3,imageSrcUrl.satnoa,imageSrcUrl.iss,imageSrcUrl.mon,imageSrcUrl.saticony,imageSrcUrl.unknown];document.onkeydown=function(e){"Escape"!==e.key||firstclick||onlysat(PLib.sat[savesatid-1].name)},window.onerror=function(e,t,n){alert(`Error: ${e} Script: ${t} Line: ${n}`)};var isAndroid236=navigator.userAgent.includes("Android 2.3.6"),isIphone=navigator.userAgent.includes("iPhone"),isIpad=navigator.userAgent.includes("iPad"),isOpera=navigator.userAgent.includes("OPR")||navigator.userAgent.includes("Opera");let graficos=!isAndroid236;isIphone&&!gqs("locator")&&alert("To use Pass with iPhone, start with:\nhttp://amsat.org.ar/pass?locator=xxxxxx\nUsing your own locator for xxxxxx"),isIpad&&!gqs("locator")&&alert("To use Pass with iPad, start with:\nhttp://amsat.org.ar/pass?locator=xxxxxx\nUsing your own locator for xxxxxx");const NavAdj=19;gqs("localat")&&gqs("localon")?(localat=isNumeric(gqs("localat"))?gqs("localat"):0,localon=isNumeric(gqs("localon"))?gqs("localon"):0):(loadMapState(),localat||"Microsoft Internet Explorer"===navigator.appName||getip(),localat||(localat="-34.5696",localon="-58.4581",satactivity+="LocBad/",alert("Home Location Set to default\nClick Locator to fix and\nAllow Cookies to Save\n\n Click OK to Continue.."))),localat=isNumeric(localat)?localat:0,localon=isNumeric(localon)?localon:0;const isDefaultLocation=0==localat&&0==localon||"-34.5696"==localat&&"-58.4581"==localon||"35.3841"==localat&&("139.6101"==localon||"0"==localon);isDefaultLocation&&(satactivity+="LocBad/",alert("Home Location Set to default\nClick Locator to fix and\nAllow Cookies to Save\n\n Click OK to Continue..")),Date.prototype.addHours=function(e){return this.setHours(this.getHours()+e),this};var husohoras=(new Date).getTimezoneOffset()/60,ahora=(new Date).addHours(husohoras).addHours(-3);function poneimg(e){""!=e&&birdsw?(e=e.replace(/ /,""),document.getElementById("satimage").style.top="298px",document.getElementById("satimage").innerHTML=`<img class="disp" src='${imageSrcUrl[`sat${e}`]||""}'>`):document.getElementById("satimage").innerHTML=""}function cambiofecha(){isNumeric((nuevafecham=(nuevafecha=(nuevafecha=(nuevafecha=document.tstest.timestamp.value).replace(/-/g," ")).replace(/:/g," ")).split(" "))[3])&&isNumeric(nuevafecham[4])&&isNumeric(nuevafecham[5])&&1*nuevafecham[3]>-1&&1*nuevafecham[3]<25&&1*nuevafecham[4]>-1&&1*nuevafecham[4]<60&&1*nuevafecham[5]>-1&&1*nuevafecham[5]<60?(MockDate.set(new Date(nuevafecham[2],1*nuevafecham[1]-1,nuevafecham[0],nuevafecham[3],nuevafecham[4],nuevafecham[5])),dateset=!0,satactivity=satactivity+"CALE"+("0"+1*nuevafecham[1]).slice(-2)+("0"+nuevafecham[0]).slice(-2)+("0"+nuevafecham[3]).slice(-2)+("0"+nuevafecham[4]).slice(-2)+"/",dateset&&(document.getElementById("changedate").style.left="190px",document.getElementById("cal").style.width="52px"),Orb.generateTable(document.getElementById("passes")),tablelasttime=new Date,document.getElementById("Div1").innerHTML="",document.getElementById("Div1").innerHTML="Next passes at your location. Starting at "+tablelasttime.toTimeString()):alert(document.tstest.timestamp.value+" > Correct Time")}function show_calendar(e,t){const n=["Su","Mo","Tu","We","Th","Fr","Sa"],i=t&&""!==t?str2dt(t):new Date,a=new Date(i);a.setMonth(i.getMonth()-1);const s=new Date(i);s.setMonth(i.getMonth()+1);const l=new Date(i);l.setDate(1),l.setDate(1-(7+l.getDay()-0)%7);let o="";o+="<tr>\n";for(let e=0;e<7;e++)o+=`  <td align="center" bgcolor="#87CEFA"><font color="white" style="font-weight:bold;" face="tahoma, verdana" size="2">${n[(0+e)%7]}</font></td>\n`;o+="</tr>\n";const r=new Date(l);for(;r.getMonth()===i.getMonth()||r.getMonth()===l.getMonth();){o+="<tr>\n";for(let t=0;t<7;t++){let t;t=r.getDate()===i.getDate()&&r.getMonth()===i.getMonth()?"#FFB6C1":0===r.getDay()||6===r.getDay()?"#DBEAF5":"white";const n=r.getMonth()===i.getMonth()?"black":"gray";o+=`  <td bgcolor="${t}" align="center">`,o+=`<a href="javascript:getTimeValue();window.opener.${e}.value='${dt2dtstr(r)}'+timeValue; window.opener.cambiofecha(); window.close();">`,o+=`<font color="${n}" face="tahoma, verdana" size="2">${r.getDate()}</font></a></td>\n`,r.setDate(r.getDate()+1)}o+="</tr>\n"}const d=`\n    <html>\n    <head>\n      <title>Calendar</title>\n    </head>\n    <body style="margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;overflow-x:hidden;" bgcolor="#87CEFA">\n      <table class="clsOTable" cellspacing="0" cellpadding="0" border="0" width="100%">\n        <tr>\n          <td bgcolor="#4682B4">\n            <table cellspacing="1" cellpadding="3" border="0" width="100%">\n              <tr>\n                <td bgcolor="#4682B4">\n                  <a href="javascript:getTimeValue();window.opener.show_calendar('${e}', '${dt2dtstr(a)}'+timeValue);">\n                    <img src="${imageSrcUrl.prev}" width="16" height="16" border="0" alt="previous month">\n                  </a>\n                </td>\n                <td align="center" bgcolor="#4682B4" colspan="5">\n                  <font color="white" face="tahoma, verdana" size="3">${["January","February","March","April","May","June","July","August","September","October","November","December"][i.getMonth()]} ${i.getFullYear()}</font>\n                </td>\n                <td bgcolor="#4682B4" align="right">\n                  <a href="javascript:getTimeValue();window.opener.show_calendar('${e}', '${dt2dtstr(s)}'+timeValue);">\n                    <img src="${imageSrcUrl.next}" width="16" height="16" border="0" alt="next month">\n                  </a>\n                </td>\n              </tr>\n              ${o}\n              <form name="cal" style="margin-bottom:0;margin-top:0;">\n                <tr style="border-color:#ffffff;border-width:0px;">\n                  <td align="center" style="border-color:#ffffff;border-width:0px;" colspan="7" bgcolor="#87CEFA">\n                    <font color="White" face="tahoma, verdana" size="3">\n                      Time: <input type="text" id="time" name="time" value="${dt2tmstr(i)}" size="6" onchange="checknumeric(this.value);" style="text-align:center;" maxlength="8">\n                    </font>&nbsp;\n                    <input type="button" style="border-style:outset;border-width:2px;border-color:#999999;" id="salir" name="salir" onclick="opener.MockDate.reset();opener.Orb.generateTable(opener.document.getElementById('passes'));opener.tablelasttime = new(Date);opener.dateset=false;opener.document.getElementById('changedate').style.left='211px';opener.document.getElementById('cal').style.width='16px';opener.satactivity=opener.satactivity+'CALERESET/';self.close();" value="Reset">\n                  </td>\n                </tr>\n              </form>\n            </table>\n          </td>\n        </tr>\n      </table>\n      <font color="White" face="tahoma, verdana" size="3"><center>Set Time & Click Day</center></font>\n    </body>\n    </html>`,c=navigator.userAgent.match(/Opera|OPR\//)?"328":"236",p=window.open("","Calendar",`width=200,height=${c},status=no,resizable=no,top=200,left=200,dependent=yes,z-lock=yes,directories=0,titlebar=no,toolbar=no,scrollbars=no,location=0,status=0,menubar=no`);p.setTimeout((()=>{const e=p.document.getElementById("salir");e&&e.click()}),18e4),p.document.documentElement.innerHTML=d,p.setTimeout((()=>{const e=p.document.createElement("script");e.text="\n    const ff = new Date();\n    let savetime = ('0' + ff.getHours()).slice(-2) + ':' + ('0' + ff.getMinutes()).slice(-2) + ':00';\n    let timeValue = '';\n    \n    function getTimeValue() {\n      const timeInput = document.getElementById('time');\n      timeValue = timeInput ? timeInput.value : '';\n      return timeValue;\n    }\n    \n    function checknumeric(valor) {\n      const oldvalue = valor;\n      valor = valor.replace(/:/g, '');\n      if (!opener.isNumeric(valor)) {\n        alert('Invalid Time\\n' + oldvalue + '\\n..Reenter..');\n        document.getElementById('time').value = savetime;\n      }\n    }",p.document.head.appendChild(e);const t=p.document.getElementById("time");t&&!t.value&&(t.value=dt2tmstr(i))}),200)}function str2dt(e){const t=e.match(/^(?<day>\d+)-(?<month>\d+)-(?<year>\d+)\s+(?<hours>\d+):(?<minutes>\d+):(?<seconds>\d+)$/);if(!t)return alert("Invalid Datetime format: "+e),null;const{day:n,month:i,year:a,hours:s,minutes:l,seconds:o}=t.groups;return new Date(Number(a),Number(i)-1,Number(n),Number(s),Number(l),Number(o))}function dt2dtstr(e){return new String(e.getDate()+"-"+(e.getMonth()+1)+"-"+e.getFullYear()+" ")}function dt2tmstr(e){return new String(("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2))}function printpr(){satactivity+="Print/",window.print()}DiayMes=losMeses.substring(3*ahora.getMonth(),3*ahora.getMonth()+3)+"-"+("0"+ahora.getDate()).slice(-2)+" ",hora=10>ahora.getHours()?"0"+ahora.getHours():ahora.getHours(),horainicio=DiayMes+hora+":"+(min=10>ahora.getMinutes()?"0"+ahora.getMinutes():ahora.getMinutes()),"-"!=(huso=(-1*husohoras).toString()).substring(0,1)&&(huso="%2B"+huso);var Orb={satelliteMarkers:[],startTracking:function(e,t,n){Orb.map=e,Orb.crossBrowserSetStyle(e,`background-image: url(${imageSrcUrl[`world${zoom}`]}); background-position: 0 0; overflow: hidden;`,!0);var i=document.createDocumentFragment(),a=document.createElement("div");a.id="home",Orb.crossBrowserSetStyle(a,`position:relative; cursor:pointer; width: 24px; height: 24px; background-image: url(${imageSrcUrl.home}); z-index: 2;`,!1),a.alt="Your Location\nGrid: "+document.wwl.loc.value+"\n To change\nClick Locator",a.title="Your Location\nGrid: "+document.wwl.loc.value+"\n To change\nClick Locator",a.onclick=function(){alert("Your Location Grid: "+document.wwl.loc.value+"    \n To change: Click Locator    "),savesatid="",document.getElementById("graphics").innerHTML=`<img src="${imageSrcUrl.arrow}" border=2 style="border-color:#ffffff;width:180px;height:180px;border-radius: 6px 6px 6px 6px;" width=180 height=180 title="Tracking satellites" alt="Tracking satellites">`,document.getElementById("trackingdata").innerHTML=`<center>Click <img src="${imageSrcUrl.saticon2}" border=0 width="25px" style="width:25px;"> Satellite<br>To see Az/El/Freq<br>Click <a href=#change><img src="${imageSrcUrl.home}" title="Click to change Grid Locator" width=18px height="18px" border=0 style="width:18px;height:18px;"></a> to set QTH</center>`,document.getElementById("azel").innerHTML="",document.getElementById("uplinkdownlink").style.top="268px"},i.appendChild(a),Orb.map.appendChild(i),Orb.home=document.getElementById("home"),PLib.InitializeData(),Orb.setHomeCoordinates(t,n),Orb.createSatelliteMarkers(),Orb.updateSatellites()},setHomeCoordinates:function(e,t){PLib.configureGroundStation(e,t),1==zoom?(Orb.home.style.top=1.5*(90-e)-14+"px",Orb.home.style.left=1.5*(parseInt(t)+180)-15+"px"):(Orb.home.style.top="121px",Orb.home.style.left="255px"),getMapPosition(e,t,zoom),document.getElementById("map").style.backgroundPosition=displacement.x+"px "+displacement.y+"px"},crossBrowserSetStyle:function(e,t,n){var i,a,s=e.style.setAttribute;i=s?e.style:e,a=s?"cssText":"style",n&&(t+=i.getAttribute(a)),i.setAttribute(a,t)},createOneMarker:function(e,t){var n=document.createDocumentFragment(),i=Orb.satelliteMarkers.length,a=document.createElement("div");for(a.id="satelliteMarker"+i,navigator.onLine&&(a.onmouseover=function(){""!=PLib.sat[t-1].name&&birdsw&&(document.getElementById("satimage").innerHTML=`<img class="disp" src="${imageSrcUrl[`sat${PLib.sat[t-1].name.toLowerCase().replace(/ /,"")}`]}>`)},a.onmouseout=function(){document.getElementById("satimage").innerHTML=""}),a.onclick=function(){sh(t,"noclick"),dir="",savesatid=t,satInfo=PLib.QuickFind(PLib.sat[t-1].name),document.getElementById("trackingdata").innerHTML="<center>"+PLib.sat[t-1].azel+"</center>",lastrange=satInfo.slantRange,lastdatetime=satInfo.dateTime,satfreqpointer=0,satactivity=satactivity+PLib.sat[t-1].name+"/",firstclick=!0,document.getElementById("Logging").innerHTML=document.getElementById("Logging").innerHTML+PLib.sat[t-1].name+"/",wispmode="bn",uldeltad=0,dldeltad=0,bndeltad=0,mmdolink="",mmuplink="",mmbeacon="",a.ondblclick=function(){satactivity+="ONLY/",onlysat(PLib.sat[t-1].name)},adjust=0,graficos&&graficar(t);var e=0,n=!1;for(f=0;f<freq.length;f++)freq[f][0]==PLib.sat[t-1].catnum&&(satfreq[e][0]=freq[f][2],satfreq[e][1]=freq[f][3],satfreq[e][2]=freq[f][4],satfreq[e][3]=freq[f][5],satfreq[e][4]=freq[f][6],satfreq[e][5]=freq[f][7],satfreq[e][6]=freq[f][11],satfreq[e][7]=freq[f][12],satfreq[e][8]=freq[f][8],satfreq[e][9]=freq[f][9],satfreq[e][10]=freq[f][10],satselected=f,e+=1,n=!0);n||(satfreq[e][0]="",satfreq[e][1]="",satfreq[e][2]="",satfreq[e][3]="",satfreq[e][4]="",satfreq[e][5]="",satfreq[e][6]="",satfreq[e][7]="",satfreq[e][10]="",leyen=""),maxsatfreq=e-1,firstclick||(document.getElementById("bubble").innerHTML="<br>&nbsp;&nbsp;"+PLib.sat[t-1].name+" info Click",document.getElementById("bubble").style.visibility="visible"),navigator.appName},i==PLib.tleData.length&&(i=0),a.alt=PLib.tleData[i][3],a.title=PLib.tleData[i][3],seticon=imageSrcUrl.unknown,k=0;k<freq.length;k++)if(PLib.tleData[t-1][1].substring(2,7)===freq[k][0]){seticon=iconos[freq[k][9]];break}Orb.crossBrowserSetStyle(a,`position:absolute; cursor:pointer; width: 36px; height: 24px; z-index: 2; background-image: url(${seticon});`,!1),icons[t]="url("+seticon+")";var s=document.createElement("div");"ISS"!=e?"TITA "!=e&&"AO-7 "!=e?Orb.crossBrowserSetStyle(s,"position:absolute; left: 0px; top: 6px;font-size:10px;font-family:Tahoma,Arial;font-weight:bold;white-space:nowrap;"):Orb.crossBrowserSetStyle(s,"position:absolute; left: 4px; top: 6px;font-size:10px;font-family:Tahoma,Arial;font-weight:bold;white-space:nowrap;"):Orb.crossBrowserSetStyle(s,"position:absolute; left: 9px; top: 6px;font-size:10px;font-family:Tahoma,Arial;font-weight:bold;white-space:nowrap;");e=document.createTextNode(e);s.appendChild(e),a.appendChild(s),n.appendChild(a),Orb.map.appendChild(n),Orb.satelliteMarkers[i]=document.getElementById(a.id),-1!=document.getElementById(a.id).innerHTML.indexOf("MOON")&&(document.getElementById(a.id).innerHTML=document.getElementById(a.id).innerHTML.replace(/MOON/,""))},createSatelliteMarkers:function(){birds=birdhelp+1*order+"</a><br>",birdsb="<a href='https://www.amsat.org/status/' target='_blank' title='See Active Sats' onclick=\"javascript:satactivity=satactivity+'LIVE/';\" style='color:cyan;'>Live?</a><br>";for(var e=1;e<=PLib.sat.length;e++)Orb.createOneMarker(PLib.tleData[e-1][0],e),"MOON "!=PLib.tleData[e-1][0]&&(birds+=newlink="<a href=# id='sh"+e+"' onmouseout = \"poneimg('')\" onmouseover = \"poneimg('"+PLib.tleData[e-1][0].toLowerCase()+"')\" onclick='event.preventDefault(); sh("+e+");'>"+PLib.tleData[e-1][0]+"</a><br>",sortm[e]=PLib.tleData[e-1][0]+","+PLib.tleData[e-1][1].substring(2,7)+","+newlink);if(birdsa="",(birdsm=birds.split("<br>")).length>50){for(h=0;h<Math.ceil(birdsm.length/2);h++)birdsa=birdsa+birdsm[h]+"<br>";for(birdsb="<a href='https://www.amsat.org/status/' target='_blank' title='See Active Sats' onclick=\"javascript:satactivity=satactivity+'LIVE/';\" style='color:cyan;'>Live?</a><br>",desde=Math.floor(1*(birdsm.length/2+1)),hasta=1*birdsm.length,h=desde;h<hasta;h++)birdsb=birdsb+birdsm[h]+"<br>";document.getElementById("birds").innerHTML=birdsa,document.getElementById("birds1").innerHTML=birdsb}else document.getElementById("birds1").innerHTML="<a href='https://www.amsat.org/status/' title='See Active Sats' title='See Active Sats' onclick=\"javascript:satactivity=satactivity+'LIVE/';\" target='_blank' style='color:cyan;'>Live?</a>",document.getElementById("birds").innerHTML=birds},updateSatellites:function(){var satInfo;if(yellowcount=0,wispextra="",localtime)var zulu="&nbsp;";else var zulu="z";var uptext="&nbsp;"+PLib.formatDateOnly(addMinutes(new Date,deltaminutes))+" "+PLib.formatTimeWithSeconds(addMinutes(new Date,deltaminutes))+zulu+"&nbsp;Loc:"+document.wwl.loc.value;document.getElementById("hora").innerHTML=uptext,getsunpos(),getxy(sunlat,sunlon,zoom),delta.y>=0&&delta.y<=270&&delta.x>=0&&delta.x<=540?(sunpixy=delta.y-3+"px",sunpixx=delta.x-3+"px",document.getElementById("Sunpos").style.visibility="visible",document.getElementById("Sunpos").style.left=sunpixx,document.getElementById("Sunpos").style.top=sunpixy):document.getElementById("Sunpos").style.visibility="hidden",document.getElementById("Sun").title="- I am the Sun -\n Click day/night\nLat:"+parseInt(sunlat)+" Lon:"+parseInt(sunlon)+"\nAzim:"+parseInt(PLib.sun_azi)+" Elev:"+parseInt(PLib.sun_ele),navigator.onLine&&(document.getElementById("Sun").onmouseover=function(){birdsw&&(document.getElementById("satimage").innerHTML=`<center><img class="disp" src="${imageSrcUrl.sun0}"></center>`)},document.getElementById("Sun").onmouseout=function(){document.getElementById("satimage").innerHTML=""});for(var i=0;i<PLib.sat.length;i++){if(satInfo=PLib.QuickFind(PLib.sat[i].name),slant_range_new[i]=satInfo.slantRange,savesatid==i+1&&graficos&&(document.getElementById("graphics").innerHTML="",Draw(satInfo.azimuth,satInfo.elevation),firstclick||(prevsatid="",graficar(savesatid))),satInfo.elevation<0)var setredinitial='<font style="color:#ff9966;">',setredfinal="</font>";else var setredinitial="",setredfinal="";PLib.sat[i].elevation&&savesatid&&savesatid==i+1&&slant_range_new[i]!=slant_range_old[i]&&(dir=slant_range_new[i]>slant_range_old[i]?"&#x25BC;":"&#x25B2;"),PLib.sat[i].elevation=satInfo.elevation;var Saturl="sat"+PLib.sat[i].name.toLowerCase().substr(0,5)+".htm";"XW2F"==PLib.sat[i].name&&(Saturl="satxw-2f.htm"),"XW2E"==PLib.sat[i].name&&(Saturl="satxw-2e.htm"),"ARISS"==PLib.sat[i].name&&(Saturl="satiss.htm");var altexto=" If connected to Internet\nClick to show "+PLib.sat[i].name+" data";if(PLib.sat[i].azel='<span style="font-size:20px;line-height:21px;">Tracking: <a href=\''+Saturl+"' onclick=\"javascript:satactivity=satactivity+'INFO/';\" target='satinfo' Alt='"+altexto+"' Title='"+altexto+"' target='Satellite'><span style='cursor:pointer; text-decoration: underline; border-bottom: 1px solid #172447; color: #ffffff;'>"+PLib.sat[i].name.substr(0,5).toUpperCase()+"</span></a></span><br><span id='nr' onmouseover=\"this.style.backgroundColor='yellow';this.style.color='red';\" title='Click to view Azimuth\nas Normal or Reverse' onclick=\"reverseazimuth();\" style='font-family:Arial;font-size:12px;font-weight:bold;background-color:#123456;color:#eeeeee;border:0px;border-width:1px;border-style:outset;cursor:pointer;align:center;'>"+azisw+"</span>Azimuth: ","&nbsp;N&nbsp;"==azisw)var newaz=satInfo.azimuth,newel=satInfo.elevation;else{var newaz=satInfo.azimuth+180;"&nbsp;I&nbsp;"==azisw&&(newaz=satInfo.azimuth-180),newaz>360&&(newaz=(newaz-360).toFixed(0)),newaz<0&&(newaz=(newaz+360).toFixed(0));var newel=180-satInfo.elevation;"&nbsp;I&nbsp;"==azisw&&(newel=180-newel)}if(putsun="*"===satInfo.visibility?` <img src='${imageSrcUrl.sun1}' title='SUNLIT' style='cursor:pointer;visibility:visible;' onclick='graficarsuncoverage();'>`:` <img src='${imageSrcUrl.sun1}' title='SUNLIT' style='cursor:pointer;visibility:hidden;'`,PLib.sat[i].azel=PLib.sat[i].azel+newaz+"&deg;"+putsun+"<br><span id='ps' title='Click to Enable Prog Data\nas Normal or Program &\nSee table bottom for info' onmouseover=\"this.style.backgroundColor='yellow';this.style.color='red';\" onclick=\"setprog();\" style='font-family:Arial;font-size:12px;font-weight:bold;background-color:#123456;color:#eeeeee;border:0px;border-width:1px;border-style:outset;cursor:pointer;align:center;'>"+progsw+"</span>Elevation: "+setredinitial+newel+"&deg;"+dir+setredfinal,PLib.sat[i].meanmo<1.5&&"MOON"!=PLib.sat[i].name.substring(0,4)&&(newtilt=tilt(PLib.sat_lon,localat,localon).toFixed(1),PLib.sat[i].azel=PLib.sat[i].azel+'<br><span style="font-size:14px;">&nbsp;Long:&nbsp;'+setredinitial+PLib.sat_lon.toFixed(1)+"&deg;"+setredfinal,PLib.sat[i].azel=PLib.sat[i].azel+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tilt:&nbsp;"+setredinitial+newtilt+"&deg;"+setredfinal+"</span>"),satelitename=PLib.sat[i].name.toUpperCase(),getxy(satInfo.latitude,satInfo.longitude,zoom),delta.y>=0&&delta.y<=270&&delta.x>=0&&delta.x<=540?(Orb.satelliteMarkers[i].style.top=delta.y-12+"px",Orb.satelliteMarkers[i].style.left=delta.x-18+"px",Orb.satelliteMarkers[i].style.visibility="visible"):Orb.satelliteMarkers[i].style.visibility="hidden",""!=savesatid&&savesatid-1==i){if(fuplink=1*satfreq[satfreqpointer][0],fdolink=1*satfreq[satfreqpointer][1],fbeacon=1*satfreq[satfreqpointer][2],muplink=satfreq[satfreqpointer][3],mdolink=satfreq[satfreqpointer][4],mbeacon=satfreq[satfreqpointer][5],subtone=satfreq[satfreqpointer][10],mrev=satfreq[satfreqpointer][8],""!=satfreq[satfreqpointer][6]&&(leyen=satfreq[satfreqpointer][6]),comentario=satfreq[satfreqpointer][7],secondselapsed=satInfo.dateTime-lastdatetime,dateset&&(secondselapsed=1),range_rate=satInfo.slantRange-lastrange,lastdatetime=satInfo.dateTime,lastrange=satInfo.slantRange,doppler_factor=range_rate/speedc/secondselapsed*1e3,"NOR"==mrev&&(doppler_factor*=-1),dldeltadc=0,uldeltadc=0,DopplerchangeDownlink||DopplerchangeUplink){if(dldeltad>1e5&&(uldeltad=dldeltad=-1*(1e3*fdolink-1e3*dldeltad)),DopplerchangeDownlink)dlink=((1-doppler_factor)*(1*fdolink+.001*dldeltad)).toFixed(2);else{var dldeltadc=(1-doppler_factor)*(1*fdolink+.001*dldeltad)-1*dlink;ulink=((1+doppler_factor)*(1*fuplink+(.001*uldeltad+dldeltadc))).toFixed(2)}if(0==dldeltadc)if(DopplerchangeUplink)ulink=((1+doppler_factor)*(1*fuplink+.001*uldeltad)).toFixed(2);else{var uldeltadc=(1+doppler_factor)*(1*fuplink+.001*uldeltad)-1*ulink;dlink=((1-doppler_factor)*(1*fdolink+(.001*dldeltad+uldeltadc))).toFixed(2)}}if(beacon=((1-doppler_factor)*(1*fbeacon+.001*bndeltad)).toFixed(2),satelevation=satInfo.elevation,satazimuth=satInfo.azimuth,satInfo.elevation>-1&&(wispazimuth=3*Math.round(satInfo.azimuth/3),(wispelevation="&#x25BC;"==dir?3*Math.floor(satInfo.elevation/3):3*Math.ceil(satInfo.elevation/3))<0&&(wispelevation=0)),satInfo.elevation>-1&&PLib.sat_alt>3e3&&!firstclick&&(wispelevation=satInfo.elevation,wispazimuth=satInfo.azimuth),!firstclick&&satInfo.elevation>-1)var WispData="SN"+document.getElementById("satelliteMarker"+i).alt.replace(/ /g,".")+" ";else var WispData="NO SATELLITE SEL ";if(!firstclick&&satInfo.elevation>-1&&(rotorsw?WispData=WispData+"AZ"+wispazimuth+" EL"+wispelevation+" ":WispData+="      "),ulink>10?WispData=WispData+"UP"+(1e3*ulink).toFixed(0)+" ":WispData+="UP ",linkwhat="bn"==wispmode?dlink:beacon,dlink>10?WispData=WispData+"DN"+(1e3*linkwhat).toFixed(0)+" ":beacon>10?WispData=WispData+"DN"+(1e3*beacon).toFixed(0)+" ":WispData+="DN ",mmuplink=muplink,isNumeric(mmuplink.substr(0,1))&&(mmuplink="FM"),""!=mmuplink?WispData=WispData+"UM"+mmuplink+" ":WispData+="UM- ",("9k6"==(mmdolink="bn"==wispmode?mdolink:mbeacon)||"9K6"==mmdolink)&&(mmdolink="FM-W"),("1k2"==mmdolink||"1K2"==mmdolink)&&(mmdolink="FM"),("SSTV"==mmdolink||"DIGIT"==mmdolink||"CW/PK"==mmdolink)&&(mmdolink="FM"),("CW/AX"==(mmbeacon=mbeacon)||"CW/Ax"==mmbeacon)&&(mmbeacon="CW"),""!=mmdolink?WispData=WispData+"DM"+mmdolink:""!=mmbeacon?WispData=WispData+"DM"+mmbeacon:WispData+="DM-",0!=subtone&&(WispData=WispData+" ST"+subtone),""!=savesatid?("SN"!=WispData.substring(0,2)&&(WispData="NO SATELLITE SELECTED"),document.getElementById("Tracking").innerHTML=WispData,navigator.cookieEnabled&&setCookie("trackCookie",WispData,1),navigator.onLine&&"SN"==WispData.substring(0,2)&&"&nbsp;P&nbsp;"==progsw?console.log(WispData):document.getElementById("lu7aaurl").style.visibility="hidden"):(WispData="",document.getElementById("Tracking").innerHTML=null,document.getElementById("lu7aaurl").innerHTML=""),document.getElementById("azel").style.height="100px",satInfo.elevation<0){document.getElementById("azel").style.color="#ff9966";var setredinitial='<font style="color:#ff9966;">',setredfinal="</font>"}else document.getElementById("azel").style.color="#ffffff",setredinitial="",setredfinal="";if(""!=leyen?dshow="<center><b>"+setredinitial+leyen+setredfinal+"</b></center>":leyen="For "+document.getElementById("satelliteMarker"+i).alt+'<br>Uplink/Downlink<br>or Beacon Freqs.<br>are not available<br><a href="http://space.skyrocket.de" target=_blank style="color:#00ffff;font-weight:normal;">Search on Internet</a>',sattochange=maxsatfreq>0?satselected-maxsatfreq+satfreqpointer:satselected,ulink>1&&(showup=DopplerchangeUplink?"&#9632;":"&#9633;",dshow=dshow+"&nbsp;U&#x25B2;<a href='#' id='upsw' title='Uplink Doppler="+DopplerchangeUplink+"\n * Click to Change *' onclick=\"event.preventDefault();flipsw(this);\" style='cursor:pointer;color:inherit;text-decoration:none;'>"+showup+'</a><a href=# onclick="event.preventDefault();enterfreq(\'UpLink\');" style="color:inherit;" title="Adjust UPLink Freq." alt="Adjust UPLink Freq.">'+setredinitial+ulink+setredfinal+"</a>&nbsp;"+muplink+"<br>"),ulink>1&&(vbasic||vbasice)&&(dshow=dshow+'<center><span id=ulbox style="arrow"><span style="cursor:pointer" title="Decrement uplink frequency\nClick Freq to reflect Dlink" onclick="uldeltad=uldeltad-500;document.getElementById(\'uldelta\').value=uldeltad;">&#x25C4;</span>&nbsp;<input type=text onclick="enterfreq(\'UpLink\');" id=uldelta name=uldelta size=4 style="background-color:#172447;color:#ffffff;border:0;font-weight:bold;font-size:18px;" value=\''+uldeltad+'\'>&nbsp;<span id=ulbox style="arrow"><span style="cursor:pointer" title="Increment Uplink Frequency\nClick Freq to reflect Dlink" onclick="uldeltad=uldeltad+500;document.getElementById(\'uldelta\').value=uldeltad;">&#x25BA;</span>'),ulink>1&&vbasic&&(dshow=dshow+"&nbsp;<select id=uldeltam name=uldeltam onclick=\"refresh=false;\" onchange=\"freq[sattochange][5] = document.getElementById('uldeltam').options[document.getElementById('uldeltam').selectedIndex].text ; selectItemByValue(document.getElementById('uldeltam'),freq[sattochange][5]);var cualsat='SatelliteMarker'+(savesatid-1)*1;document.getElementById(cualsat).click();document.getElementById(cualsat).click();\" style=\"background-color:#172447;color:#ffffff;font-weight:bold;\">"+selectoptions+"</select></span>"),ulink>1&&(vbasic||vbasice)&&(dshow+="</center>"),dlink>1&&(showdo=DopplerchangeDownlink?"&#9632;":"&#9633;",dshow=dshow+"&nbsp;<span id=dl onclick=\"changewisp('dl');\">D&#x25BC;</span><a href='#' id='dosw' title='Downlink Doppler="+DopplerchangeDownlink+"\n * Click to Change *' onclick=\"event.preventDefault();flipsw(this);\" style='cursor:pointer;color:inherit;text-decoration:none;'>"+showdo+'</a><a href=# onclick="event.preventDefault();enterfreq(\'DownLink\');" style="color:inherit" title="Adjust DownLink Freq." alt="Adjust DownLink Freq.">'+setredinitial+dlink+setredfinal+"</a>&nbsp;"+mdolink+"<br>"),dlink>1&&(vbasic||vbasice)&&(dshow=dshow+'<center><span id=dlbox style="arrow"><span style="cursor:pointer" title="Decrement downlink frequency\nClick Freq to reflect Uplink" onclick="dldeltad=dldeltad-500;document.getElementById(\'dldelta\').value=dldeltad;">&#x25C4;</span>&nbsp;<input type=text onclick="enterfreq(\'DownLink\');" id=dldelta name=dldelta size=4 style="background-color:#172447;color:#ffffff;border:0;font-weight:bold;font-size:18px;" value=\''+dldeltad+'\'>&nbsp;<span id=dlbox style="arrow"><span style="cursor:pointer" title="Increment Downklink Frequency\nClick Freq to reflect Uplink" onclick="dldeltad=dldeltad+500;document.getElementById(\'dldelta\').value=dldeltad;">&#x25BA;</span>'),dlink>1&&vbasic&&(dshow=dshow+"&nbsp;<select id=dldeltam name=dldeltam onclick=\"refresh=false;\" onchange=\"freq[sattochange][6] = document.getElementById('dldeltam').options[document.getElementById('dldeltam').selectedIndex].text ; selectItemByValue(document.getElementById('dldeltam'),freq[sattochange][6]);var cualsat='SatelliteMarker'+(savesatid-1)*1;document.getElementById(cualsat).click();document.getElementById(cualsat).click();\" style=\"background-color:#172447;color:#ffffff;font-weight:bold;\">"+selectoptions+"</select></span>"),dlink>1&&(vbasic||vbasice)&&(dshow+="</center>"),beacon>1&&(dshow=dshow+'&nbsp;<span style="white-space:nowrap;"><span id=bn onclick="changewisp(\'bn\');">B<span style="font-size:11px;font-weight:bold;vertical-align:20%;"> )))))</span></span>&nbsp;<a href=# onclick="event.preventDefault();enterfreq(\'Beacon\');" style="color:inherit;" title="Adjust Beacon Freq." alt="Adjust Beacon Freq.">'+setredinitial+beacon+setredfinal+"</a>&nbsp;"+mbeacon+"</span><br>"),beacon>1&&(vbasic||vbasice)&&(dshow=dshow+'<center><span id=bnbox style="arrow"><span style="cursor:pointer" title="decrement Beacon frequency" onclick="bndeltad=bndeltad-100;document.getElementById(\'bndelta\').value=bndeltad;">&#x25C4;</span>&nbsp;<input type=text onclick="enterfreq(\'Beacon\');" id=bndelta name=bndelta size=4 style="background-color:#172447;color:#ffffff;border:0;font-weight:bold;font-size:18px;" value=\''+bndeltad+'\'>&nbsp;<span id=bnbox style="arrow"><span style="cursor:pointer" title="Increment Beacon Frequency" onclick="bndeltad=bndeltad+100;document.getElementById(\'bndelta\').value=bndeltad;">&#x25BA;</span>'),beacon>1&&vbasic&&(dshow=dshow+"&nbsp;<select id=bndeltam name=bndeltam onclick=\"refresh=false;\" onchange=\"freq[sattochange][7] = document.getElementById('bndeltam').options[document.getElementById('bndeltam').selectedIndex].text ; selectItemByValue(document.getElementById('bndeltam'),freq[sattochange][7]);var cualsat='SatelliteMarker'+(savesatid-1)*1;document.getElementById(cualsat).click();document.getElementById(cualsat).click();\" style=\"background-color:#172447;color:#ffffff;font-weight:bold;\">"+selectoptions+"</select></span>"),beacon>1&&(vbasic||vbasice)&&(dshow+="</center>"),""!=comentario&&(dshow=dshow+"<center>"+comentario+"</center>"),"NOR"==satfreq[satfreqpointer][8])var ene="<span style='font-size:12px;font-weight:bold;'>&nbsp;&nbsp;NOR</span>";else var ene="";maxsatfreq>0&&(dshow=dshow+'<center><a href=# alt="See more options" title="See more options" onclick="event.preventDefault();gonext();"><font style="color:#00ffff;font-size:16px;font-family:Arial;font-weight:bold;line-height:16px;"><u> Next Option </u></font></a>'+ene+"</center>"),refresh&&(document.getElementById("azel").innerHTML=calcaos(satelitename,aostime[savesatid-1],savesatid)+dshow),ulink>1&&vbasic&&selectItemByValue(document.getElementById("uldeltam"),mmuplink),dlink>1&&vbasic&&selectItemByValue(document.getElementById("dldeltam"),mmdolink),beacon>1&&vbasic&&selectItemByValue(document.getElementById("bndeltam"),mmbeacon),beacon>1&&dlink>1&&("dl"==wispmode?(document.getElementById("bn").style.textDecoration="underline",document.getElementById("bn").title="Click to Select Downlink for WispDDE",document.getElementById("bn").style.cursor="pointer"):(document.getElementById("dl").style.textDecoration="underline",document.getElementById("dl").title="Click to Select Beacon for WispDDE",document.getElementById("dl").style.cursor="pointer")),moveto=vbasic||vbasice?"476px":"398px",document.getElementById("uplinkdownlink").style.top=leyen?moveto:"268px",document.getElementById("trackingdata").innerHTML="<center>"+PLib.sat[savesatid-1].azel+"</center>"}if(0==satInfo.elevation&&bip&&"MOON"!=PLib.sat[i].name.substring(0,4)&&(slant_range_new[i]<slant_range_old[i]?jBeep("Beep.wav"):jBeep("bell1.wav")),0==satInfo.elevation&&"MOON"!=PLib.sat[i].name.substring(0,4)&&(slant_range_new[i]<slant_range_old[i]?(blink(PLib.sat[i].name+" &#x25B2;"),saveaoslosid=i,-1!=(isimg=document.getElementById("graphics").innerHTML.substring(0,8).toLowerCase()).indexOf("<img")&&(satactivity+="Auto/",document.getElementById("satelliteMarker"+i).click(),autoclick=!0,saveclickid=i)):(blink(PLib.sat[i].name.toUpperCase()+" &#x25BC;"),saveaoslosid=0,autoclick&&saveclickid==i&&(document.getElementById("satelliteMarker"+saveclickid).click(),document.getElementById("graphics").innerHTML=`<img src="${imageSrcUrl.arrow}" border=2 style="border-color:#ffffff;width:180px;height:180px;border-radius: 6px 6px 6px 6px;" width=180 height=180 title="Tracking satellites" alt="Tracking satellites">`,document.getElementById("trackingdata").innerHTML=`<center>Click <img src="${imageSrcUrl.saticon2}" border=0 width="25px" style="width:25px;"> Satellite<br>To see Az/El/Freq<br>Click <a href=#change><img src="${imageSrcUrl.home}" title="Click to change Grid Locator" width=18px height="18px" border=0 style="width:18px;height:18px;"></a> to set QTH</center>`,document.getElementById("azel").innerHTML="",document.getElementById("uplinkdownlink").style.top="268px",autoclick=!1,savesatid="",saveclickid=""))),satInfo.elevation>=0&&"MOON"!=document.getElementById("satelliteMarker"+i).alt.substring(0,4)){if(yellowcount+=1,`url(${imageSrcUrl.saticony})`!=document.getElementById("satelliteMarker"+i).style.backgroundImage)if("MOON"==document.getElementById("satelliteMarker"+i).alt.substring(0,4))document.getElementById("satelliteMarker"+i).style.backgroundImage=`url(${imageSrcUrl.mon})`;else{for(k=2,document.getElementById("satelliteMarker"+i).style.backgroundImage=`url(${imageSrcUrl.saticony})`,saten=PLib.tleData[i][0].toUpperCase();k<PLib.tleData.length+1;k++)document.getElementById("sh"+k)&&saten===document.getElementById("sh"+k).innerHTML.toUpperCase()&&(document.getElementById("sh"+k).style.backgroundColor="#007400");navigator.onLine&&"&nbsp;P&nbsp;"==progsw&&(wispextra=(wispextra=(wispextra=wispextra+"<br>SN"+PLib.sat[i].name+" ")+"AZ"+satInfo.azimuth+" ")+"EL"+satInfo.elevation)}}else{for(k=2,saten=PLib.tleData[i][0].toUpperCase();k<PLib.tleData.length+1;k++)document.getElementById("sh"+k)&&saten===document.getElementById("sh"+k).innerHTML.toUpperCase()&&(document.getElementById("sh"+k).style.backgroundColor="#172447");document.getElementById("satelliteMarker"+i).style.backgroundImage=icons[i+1]}slant_range_old[i]=slant_range_new[i]}new Date-tablelasttime>3e4&&(0!=document.getElementById("daynight").innerHTML.length&&(document.getElementById("daynight").innerHTML="",graficarsuncoverage()),Orb.generateTable(document.getElementById("passes")),tablelasttime=new Date,document.getElementById("daynight").innerHTML.length>30&&graficos&&(graficarsuncoverage(),graficarsuncoverage()),new Date-ahora<864e5?document.getElementById("Div1").innerHTML="Next passes at your location. Starting at "+tablelasttime.toTimeString():(document.getElementById("Div1").innerHTML='<a href=\'#\' onclick="location.reload()"><b><u><font style="color:#FF0000;background-color:#FFFFFF;font-size:12px;font-weight:bold;">&nbsp;Keps are old, click Reload.</font></u></b></a> Starting at '+tablelasttime.toTimeString(),(warntoken+=1)<2&&(satactivity+="KepsOld/"))),timespan=864e5/2.3*42/(1.27*PLib.tleData.length+1),document.getElementById("ty5")&&(document.getElementById("ty5").innerHTML=yellowcount),PLib.tleData.length<5&&(timespan=667e6),vbasic&&(document.getElementById("rotorimg").style.visibility="visible"),parar=vbasic=eval(document.getElementById("vbasic").innerHTML),newcycle=setTimeout("Orb.updateSatellites()",1e3),document.getElementById("bubble").style.visibility="hidden"},createCell:function(e,t,n){var i=document.createElement("td");i.className=t,n=document.createTextNode(n),i.appendChild(n),e.appendChild(i)},createHeaderColumn:function(e,t){var n=document.createElement("th");n.className="orb-header",t=document.createTextNode(t),n.appendChild(t),e.appendChild(n)},createHeaderColumn1:function(e,t){var n=document.createElement("th");n.className="orb-header1",t=document.createTextNode(t),n.appendChild(t),e.appendChild(n)},generateTable:function(e){for(n=0;n<aostime.length;n++)aostime[n]=null;document.getElementById("linkeos").innerHTML="";var t,i,a=document.createDocumentFragment(),s=PLib.getTodaysPasses();for(function(){for(m=0;m<s.length-1;m++)for(n=m;n<s.length;n++)(fecha1=s[m].dateTimeStart)>(fecha2=s[n].dateTimeStart)&&(savefecha=s[m],s[m]=s[n],s[n]=savefecha)}();e.childNodes.length>0;)e.removeChild(e.firstChild);var l=document.createElement("table");Orb.crossBrowserSetStyle(l,"border-collapse: collapse; margin-left: auto; margin-right: auto;text-align:center;width:100%;",!1);var o=document.createElement("thead");t=document.createElement("tr"),Orb.createHeaderColumn1(t,"h:mm"),Orb.createHeaderColumn(t,"Satell."),Orb.createHeaderColumn(t,"Orbit#"),Orb.createHeaderColumn(t,"Da  te"),0==deltaminutes?Orb.createHeaderColumn(t,"-Local Time-"):Orb.createHeaderColumn(t,"-UTC Time-"),Orb.createHeaderColumn(t,"Ele."),Orb.createHeaderColumn(t,"Azimuths"),o.appendChild(t),l.appendChild(o);var r=document.createElement("tbody");satlen=s.length>55?55:s.length;for(var d=0;d<satlen;d++)if("MOON"!=s[d].name.substring(0,4)&&s[d].peakElevation>=elevationset){t=document.createElement("tr"),aostt[d]=addMinutes(s[d].dateTimeStart,deltaminutes),lostt[d]=addMinutes(s[d].dateTimeEnd,deltaminutes),i="-"==(countdown=calcaost(aostt[d],lostt[d])).substring(0,1)?"orb-detailVisible":"orb-detail",detailClassNameunderline="-"==countdown.substring(0,1)?"orb-detailVisible-underline":"orb-detail-underline",detailClassNameright="-"==countdown.substring(0,1)?"orb-detailVisibleright":"orb-detailright",detailClassNamecenter="-"==countdown.substring(0,1)?"orb-detailVisiblecenter":"orb-detailcenter",Orb.createCell(t,i,countdown),Orb.createCell(t,detailClassNameunderline,s[d].name.substr(0,5).toUpperCase()),Orb.coco=linkeos;a=document.createDocumentFragment();var c=document.createElement("div");switch(c.id=d,Orb.crossBrowserSetStyle(c,"position:relative; cursor:pointer; width: 536px; height: "+NavAdj+"px;",!1),c.alt=s[d].number-1,c.title=s[d].name.toUpperCase(),navigator.onLine&&(c.onmouseover=function(e){if(birdsw){let t=e.pageY-140<298?298:e.pageY-140;t=e.pageY-140>=document.getElementById("passes").getBoundingClientRect().height?document.getElementById("passes").getBoundingClientRect().height-140:t,document.getElementById("satimage").style.top=`${t}px`,document.getElementById("satimage").innerHTML=`<img class="disp" src=${imageSrcUrl[`sat${this.title.toLowerCase().replace(/ /,"")}`]||""}>`}},c.onmouseout=function(){document.getElementById("satimage").innerHTML=""}),a.appendChild(c),Orb.coco.appendChild(a),c.onclick=function(){document.getElementById("satelliteMarker"+this.alt).click()},c.ondblclick=function(){satactivity+="ONLY/",onlysat(this.title)},s[d].orbitNumber>=0?Orb.createCell(t,i,s[d].orbitNumber-1):(saveClassName=i,i="orb-detailred",Orb.createCell(t,i,s[d].orbitNumber-1),i=saveClassName),savebox==c.title&&(c.style.backgroundRepeat="no-repeat",c.style.backgroundImage=`url(${imageSrcUrl.box})`),null==aostime[s[d].number-1]&&(aostime[s[d].number-1]=addMinutes(s[d].dateTimeStart,deltaminutes)),Orb.createCell(t,i,PLib.formatDateOnly(addMinutes(s[d].dateTimeStart,deltaminutes))),Orb.createCell(t,detailClassNamecenter,PLib.formatTimeOnly(addMinutes(s[d].dateTimeStart,deltaminutes))+" - "+PLib.formatTimeOnly(addMinutes(s[d].dateTimeEnd,deltaminutes))),Orb.createCell(t,detailClassNameright,Math.round(s[d].peakElevation)+"°"),Orb.createCell(t,detailClassNamecenter,Math.round(s[d].riseAzimuth)+", "+Math.round(s[d].peakAzimuth)+", "+Math.round(s[d].decayAzimuth)),s[d].visibility){case"+":"Visible";break;case"*":"Not Visible";break;default:"Eclipsed"}r.appendChild(t)}l.appendChild(r),a.appendChild(l),e.appendChild(a)}};function changeorder(e){4==(order=1*order+1)&&(order=0),sortm.splice(0,sortm.length);for(var t=1;t<=PLib.tleData.length;t++)"MOON "!=PLib.tleData[t-1][0]&&(newlink="<a href=# id='sh"+t+"' onmouseout = \"poneimg('')\" onmouseover = \"poneimg('"+PLib.tleData[t-1][0].toLowerCase()+"')\" onclick='event.preventDefault();sh("+t+");'>"+PLib.tleData[t-1][0]+"</a><br>",sortm[t]=PLib.tleData[t-1][0]+","+PLib.tleData[t-1][1].substring(2,7)+","+newlink);for("nolog"!=e&&(satactivity=satactivity+"Order"+1*order+"/"),birds=birdhelp+1*order+"</a><br>",0==order&&sortm.sort((function(e,t){var n=e.substr(6,5),i=t.substr(6,5);return n==i?0:n<i?-1:1})),1==order&&sortm.sort((function(e,t){var n=e.substr(0,5),i=t.substr(0,5);return n==i?0:n<i?-1:1})),2==order&&sortm.sort((function(e,t){var n=e.substr(0,5),i=t.substr(0,5);return n==i?0:n>i?-1:1})),3==order&&sortm.sort((function(e,t){var n=e.substr(6,5),i=t.substr(6,5);return n==i?0:n>i?-1:1})),t=0;t<sortm.length;t++)sortm[t]&&(birds+=sortm[t].substring(sortm[t].indexOf("<"),sortm[t].length));if(birdsa="",(birdsm=birds.split("<br>")).length>50){for(h=0;h<Math.ceil(birdsm.length/2);h++)birdsa=birdsa+birdsm[h]+"<br>";for(birdsb="<a href='https://www.amsat.org/status/' target='_blank' title='See Active Sats' onclick=\"javascript:satactivity=satactivity+'LIVE/';\" style='color:cyan;'>Live?</a><br>",0==order&&(birdsb+="&#x25B2;Age&#x25B2;"),1==order&&(birdsb+="Name&#x25B2;"),2==order&&(birdsb+="Name&#x25BC;"),3==order&&(birdsb+="&#x25BC;Age&#x25BC;"),birdsb+="<br>",desde=Math.floor(birdsm.length/2*1),hasta=1*birdsm.length,h=desde;h<hasta;h++)birdsb=birdsb+birdsm[h]+"<br>";document.getElementById("birds").innerHTML=birdsa,document.getElementById("birds1").innerHTML=birdsb}else document.getElementById("birds1").innerHTML="<a href='https://www.amsat.org/status/' title='See Active Sats' target='_blank' style='color:cyan;'>Live?</a>",document.getElementById("birds").innerHTML=birds}function satnogs(){catnumber=PLib.sat[savesatid-1].line1.substring(2,7),navigator.onLine?catnumber>1e3?(satactivity=satactivity+"SNOG"+catnumber+"/",preferences="toolbar=yes,location=yes,fullscreen=no,width=1280px,height=560px,center,margintop=0,top=30,left=20,status=no,scrollbars=yes,resizable=yes,dependent=no,z-lock=yes",null!=popupwi&&popupwi.close(),popupwi=window.open("https://network.satnogs.org/observations/?norad="+catnumber,"win1",preferences)):alert("Moon & Sun not available on SatNogs"):alert("Satnogs is available when Online")}function aoslosclick(){saveaoslosid&&saveaoslosid>0&&document.getElementById("satelliteMarker"+saveaoslosid).click()}function setzoom(e){zoom=e,document.getElementById("z1").style.backgroundColor="#172447",document.getElementById("z1").style.color="#ffffff",document.getElementById("z1.5").style.backgroundColor="#172447",document.getElementById("z1.5").style.color="#ffffff",document.getElementById("z2.2").style.backgroundColor="#172447",document.getElementById("z2.2").style.color="#ffffff",document.getElementById("z3.5").style.backgroundColor="#172447",document.getElementById("z3.5").style.color="#ffffff",document.getElementById("z5.3").style.backgroundColor="#172447",document.getElementById("z5.3").style.color="#ffffff",document.getElementById("z8").style.backgroundColor="#172447",document.getElementById("z8").style.color="#ffffff",document.getElementById("z16").style.backgroundColor="#172447",document.getElementById("z16").style.color="#ffffff",document.getElementById("z"+e).style.backgroundColor="yellow",document.getElementById("z"+e).style.color="red",satactivity=satactivity+"ZOOM"+zoom+"/",document.getElementById("map").style.backgroundImage=`url(${imageSrcUrl[`world${zoom}`]})`,Orb.setHomeCoordinates(localat,localon),document.getElementById("Div1").style.color=1==zoom?"#000000":"#ffffff",document.getElementById("daynight").innerHTML.length>30&&graficos&&(graficarsuncoverage(),graficarsuncoverage())}function graficarsuncoverage(){if(0==document.getElementById("daynight").innerHTML.length&&graficos){for("SUNON/"!=satactivity.substr(satactivity.length-6)&&(satactivity+="SUNON/"),document.getElementById("daynight").innerHTML="",radio=15e7,prevlon=0,changecov=0,cov1="[",bearing=0;bearing<361;bearing++)getlatlon(sunlat,sunlon,bearing,radio),getxy(out.lat2,out.lon2,zoom),pixlon=delta.x,pixlat=delta.y,pixlon>540&&1==zoom&&(pixlon-=540),pixlon<0&&1==zoom&&(pixlon+=540),sunlatcheck=sunlat>0?530:270,Math.abs(prevlon-pixlon)>sunlatcheck&&(cov1+=sunlat<0?"new jxPoint(540, 270), new jxPoint(0, 270), ":"new jxPoint(0, 0), new jxPoint(540, 0), "),prevlon=pixlon,cov1=cov1+"new jxPoint("+pixlon+", "+pixlat+"), ";cov1=cov1.substring(0,cov1.length-2)+"]";var sunpix=new jxGraphics(document.getElementById("daynight")),penOrange=new jxPen(new jxColor("#226644"),"2px"),brushOrange=new jxBrush(new jxColor("#88ffcc"));if(cov1.length>38){var curve,curvePoints=eval(cov1);new jxPolygon(curvePoints,penOrange,brushOrange).draw(sunpix)}document.getElementById("daynight").style.visibility="visible",document.getElementById("daynight").style.zIndex="0"}else satactivity+="SUNOFF/",document.getElementById("daynight").innerHTML=""}function graficar(e){if(prevsatid!=e){prevsatid=e,PLib.PreCalc(e-1);var t=Math.sqrt(Math.pow(1e3*PLib.sat_alt+6378137,2)-40680631590769)/1e3/2;for(t>18e3&&(t=4880),t>5e3&&(t/=1.45),changecov=0,cov1="[",cov2="[",cov3="[",cov4="[",cov5="[",bearing=0,prevlon=getlatlon(PLib.sat_lat,PLib.sat_lon,bearing,t),prevlon=0,bearing=0;bearing<361;bearing+=1)getlatlon(PLib.sat_lat,PLib.sat_lon,bearing,t),getxy(out.lat2,out.lon2,zoom),pixlon=delta.x,pixlat=delta.y,pixlon<0&&1==zoom&&(pixlon=540+pixlon),pixlon>540&&1==zoom&&(pixlon-=540),Math.abs(prevlon-pixlon)>530&&(changecov+=1),prevlon=pixlon,0==changecov&&(cov1=cov1+"new jxPoint("+pixlon+", "+pixlat+"), "),1==changecov&&(cov2=cov2+"new jxPoint("+pixlon+", "+pixlat+"), "),2==changecov&&(cov3=cov3+"new jxPoint("+pixlon+", "+pixlat+"), "),3==changecov&&(cov4=cov4+"new jxPoint("+pixlon+", "+pixlat+"), "),4==changecov&&(cov5=cov5+"new jxPoint("+pixlon+", "+pixlat+"), ");for(h=-70,cov1=cov1.substring(0,cov1.length-2)+"]",cov2=cov2.substring(0,cov2.length-2)+"]",cov3=cov3.substring(0,cov3.length-2)+"]",cov4=cov4.substring(0,cov4.length-2)+"]",cov5=cov5.substring(0,cov4.length-2)+"]",PLib.daynum=PLib.daynum-.0042,tray1="[",tray2="[",tray3="[",visi1="[",visi2="[",visi3="[",prevlon=PLib.Calc(),changetray=0,deltaday=PLib.sat[e-1].meanmo>2?.00297/PLib.sat[e-1].meanmo:.0029,cuenta=0,zx1="",zx2="",zx3="",zx4="",zy1="",zy2="",zy3="",zy4="",zl1="",zl2="",zl3="",zl4="",ajustar=0==deltaminutes?1e7:(new Date).getTimezoneOffset()/1440+1e7;h<267;h++){PLib.daynum=PLib.daynum+deltaday,PLib.Calc();var n=Julian2Date(PLib.daynum+ajustar),i=("0"+n.getHours()).slice(-2)+":"+("0"+n.getMinutes()).slice(-2);getxy(PLib.sat_lat,PLib.sat_lon,zoom),pixlon=delta.x,pixlat=delta.y,(PLib.sat_ele>0&&0==cuenta||PLib.sat_ele<0&&1==cuenta||PLib.sat_ele>0&&2==cuenta||PLib.sat_ele<0&&3==cuenta)&&(updatehours(pixlat+16,pixlon+1,i),cuenta++),Math.abs(prevlon-pixlon)>500&&(changetray+=1),prevlon=pixlon,PLib.sat_ele>=0&&0==changetray&&(visi1=visi1+"new jxPoint("+pixlon+", "+pixlat+"), "),PLib.sat_ele>=0&&1==changetray&&(visi2=visi2+"new jxPoint("+pixlon+", "+pixlat+"), "),PLib.sat_ele>=0&&2==changetray&&(visi3=visi3+"new jxPoint("+pixlon+", "+pixlat+"), "),0==changetray&&(tray1=tray1+"new jxPoint("+pixlon+", "+pixlat+"), "),1==changetray&&(tray2=tray2+"new jxPoint("+pixlon+", "+pixlat+"), "),2==changetray&&(tray3=tray3+"new jxPoint("+pixlon+", "+pixlat+"), ")}tray1=tray1.substring(0,tray1.length-2)+"]",tray2=tray2.substring(0,tray2.length-2)+"]",tray3=tray3.substring(0,tray3.length-2)+"]",visi1=visi1.substring(0,visi1.length-2)+"]",visi2=visi2.substring(0,visi2.length-2)+"]",visi3=visi3.substring(0,visi3.length-2)+"]",document.getElementById("trayecto").innerHTML="",document.getElementById("trayecto").style.visibility="hidden",DrawTray(tray1,tray2,tray3,visi1,visi2,visi3,cov1,cov2,cov3,cov4,cov5,zx1,zy1,zl1,zx2,zy2,zl2,zx3,zy3,zl3,zx4,zy4,zl4),document.getElementById("trayecto").style.visibility="visible",document.getElementById("trayecto").style.zIndex="0",firstclick=!1}else prevsatid="",document.getElementById("trayecto").innerHTML="",document.getElementById("trayecto").style.visibility="hidden"}function updatehours(e,t,n){0==cuenta&&(zx1=e,zy1=t,zl1=n),1==cuenta&&(zx2=e,zy2=t,zl2=n),2==cuenta&&(zx3=e,zy3=t,zl3=n),3==cuenta&&(zx4=e,zy4=t,zl4=n)}function DrawTray(tray1,tray2,tray3,visi1,visi2,visi3,cov1,cov2,cov3,cov4,cov5,zy1,zx1,zl1,zy2,zx2,zl2,zy3,zx3,zl3,zy4,zx4,zl4){var text,text1,text2,text3,pixeles=new jxGraphics(document.getElementById("trayecto")),penYellow=new jxPen(new jxColor("#00ffff"),"2px"),penRed=new jxPen(new jxColor("#ffff00"),"3px"),penWhite=new jxPen(new jxColor("#dddddd"),"2px"),penPink=new jxPen(new jxColor("#ff99ff"),"1px");if(tray1.length>38){var curvePoints=eval(tray1),curve=new jxCurve(curvePoints,penYellow);curve.draw(pixeles)}if(tray2.length>38){var curvePoints=eval(tray2),curve=new jxCurve(curvePoints,penYellow);curve.draw(pixeles)}if(tray3.length>38){var curvePoints=eval(tray3),curve=new jxCurve(curvePoints,penYellow);curve.draw(pixeles)}if(visi1.length>38){var curvePoints=eval(visi1),curve=new jxCurve(curvePoints,penRed);curve.draw(pixeles)}if(visi2.length>38){var curvePoints=eval(visi2),curve=new jxCurve(curvePoints,penRed);curve.draw(pixeles)}if(visi3.length>38){var curvePoints=eval(visi3),curve=new jxCurve(curvePoints,penRed);curve.draw(pixeles)}if(cov1.length>38){var curvePoints=eval(cov1),curve=new jxCurve(curvePoints,penWhite);curve.draw(pixeles)}if(cov2.length>38){var curvePoints=eval(cov2),curve=new jxCurve(curvePoints,penWhite);curve.draw(pixeles)}if(cov3.length>38){var curvePoints=eval(cov3),curve=new jxCurve(curvePoints,penWhite);curve.draw(pixeles)}if(cov4.length>38){var curvePoints=eval(cov4),curve=new jxCurve(curvePoints,penWhite);curve.draw(pixeles)}if(cov5.length>38){var curvePoints=eval(cov5),curve=new jxCurve(curvePoints,penWhite);curve.draw(pixeles)}var penText=new jxPen(new jxColor("#bbffbb"),"1px"),penTextOut=new jxPen(new jxColor("#ffccaa"),"1px"),brushText=new jxBrush(new jxColor("#ffffff")),font=new jxFont("arial");font.size="14px",""!=zl1&&new jxText(new jxPoint(zx1+2,zy1-9),zl1,font,penText,brushText,0).draw(pixeles),""!=zl2&&new jxText(new jxPoint(zx2+2,zy2-9),zl2,font,penTextOut,brushText,0).draw(pixeles),""!=zl3&&new jxText(new jxPoint(zx3+2,zy3-9),zl3,font,penText,brushText,0).draw(pixeles),""!=zl4&&new jxText(new jxPoint(zx4+2,zy4-9),zl4,font,penTextOut,brushText,0).draw(pixeles)}function Draw(e,t){var n=Math.PI/180,i=new jxGraphics(document.getElementById("graphics")),a=new jxPen(new jxColor("red"),"8px"),s=new jxPen(new jxColor("yellow"),"8px");new jxPen(new jxColor("green"),"8px");var l=new jxPen(new jxColor("white"),"2px");new jxPen(new jxColor("blue"),"2px");var o=new jxPen(new jxColor("#ffcc00"),"3px"),r=new jxPen(new jxColor("#00CC66"),"7px"),d=new jxPen(new jxColor("#FF9966"),"7px");new jxBrush(new jxColor("yellow")).fillType="linear-gradient",new jxBrush(new jxColor("blue")).fillType="linear-gradient",new jxBrush(new jxColor("red")).fillType="linear-gradient",new jxBrush(new jxColor("black"));var c=new jxBrush(new jxColor("black")),p=92-7.9*Math.sqrt(Math.abs(t));if(t>-1)var u=r;else u=d,p=183-p;new jxLine(new jxPoint(34,p),new jxPoint(180,p),u).draw(i),(f=new jxFont("Tahoma")).size="17px",f.weight="normal";l=new jxPen(new jxColor("white"),"1px");(b=new jxText(new jxPoint(101,13),"N",f,l,c,0)).draw(i),(b=new jxText(new jxPoint(101,184),"S",f,l,c,0)).draw(i),(b=new jxText(new jxPoint(14,100),"W",f,l,c,0)).draw(i),(b=new jxText(new jxPoint(185,100),"E",f,l,c,0)).draw(i);l=new jxPen(new jxColor("white"),"2px");new jxCircle(new jxPoint(107,93),76,l).draw(i),(e=180-e)<0&&(e+=360);var h=76*Math.sin(e*=n)+106;if(posiy=76*Math.cos(e)+93,pencolor=t>-1?s:a,new jxLine(new jxPoint(106,92),new jxPoint(h,posiy),pencolor).draw(i),new jxCircle(new jxPoint(106,92),5,o,c).draw(i),PLib.iel>=0){(f=new jxFont("arial narrow")).size="14px";var g=new jxPen(new jxColor("#ffffff"),"0px"),m=new jxBrush(new jxColor("#ffffff"))}else{var f;(f=new jxFont("arial narrow")).size="14px";g=new jxPen(new jxColor("#ff9966"),"0px"),m=new jxBrush(new jxColor("#ff9966"))}var b=new jxText(new jxPoint(116,182),"Alt:"+parseInt(PLib.sat_alt)+" Km",f,g,m,0),y=new jxText(new jxPoint(6,182),"Dist:"+parseInt(100*parseInt(lastrange/100))+" Km",f,g,m,0),v=new jxText(new jxPoint(52,116),"CLICK TO CHECK",f,g,m,0),x=new jxText(new jxPoint(54,133),satname+" SATNOGS",f,g,m,0);b.draw(i),y.draw(i),v.draw(i),x.draw(i)}function Julian2Date(e){var t=parseFloat(e),n=Math.floor(t),i=t-n,a=Math.floor((n-1867216.25)/36524.25),s=n+1+a-Math.floor(a/4)+1524,l=Math.floor((s-122.1)/365.25),o=Math.floor(365.25*l),r=Math.floor((s-o)/30.6001),d=r<13.5?r-1:r-13,c=d<2.5?l-4715:l-4716;d-=1;var p=s-o-Math.floor(30.6001*r)+i,u=Math.floor(p);p-=Math.floor(p),p*=24;var h=Math.floor(p);p-=Math.floor(p),p*=60;var g=Math.floor(p);p-=Math.floor(p),p*=60;var m=Math.round(p);return new Date(Date.UTC(c,d,u,h,g,m))}function sleep(e){for(var t=(new Date).getTime(),n=0;n<1e7&&!((new Date).getTime()-t>e);n++);}function saveMapState(e){urlsola=(urlfuncion=(urlmatrix=window.location.href.split("/"))[urlmatrix.length-1]).split("?"),urlreal=urlmatrix[urlmatrix.length-2]+"/"+urlsola[0],biptext=1==bip?"Bipon":"Bipoff",biptext+=1==birdsw?"/Birdon":"/Birdoff",biptext+=1==localtime?"/Localtime":"/UTCtime",biptext=(biptext=(biptext=biptext+"/Tipo"+tiposel)+"/Order"+1*order)+"/Elev"+1*elevationset,activity="Con "+urlreal+"/Loc;"+document.getElementById("loc").value+"/Lat:"+(1*localat).toFixed(4)+"/Lon:"+(1*localon).toFixed(4)+"/Z"+zoom+"/"+biptext+"/"+screen.width+"x"+screen.height+"/"+satactivity;var t=localat+"_"+localon;if(t=(t+=1==bip?"_bipon":"_bipoff")+"_"+zoom,t+=1==birdsw?"_birdon":"_birdoff",t=(t=(t+=1==localtime?",localtime":",utctime")+",Tipo"+tiposel)+",Order"+1*order,elevationset||(elevationset=0),t=(t=t+",Elev"+1*elevationset)+",Aumento"+(1e3*aumento).toFixed(0),defaults&&defaults.length>5?t=t+"_"+defaults.replace(/,/g,""):t+="_",activity.split("/Auto").length>5){var n=activity.indexOf("/Auto"),i=activity.lastIndexOf("/Auto");activity=activity.slice(0,n)+"/Autos/"+activity.slice(i+6,activity.length)}setCookie("passCookie",t,30),sleep(2e3)}function logactivity(){if(navigator.onLine&&(urlsola=(urlfuncion=(urlmatrix=window.location.href.split("/"))[urlmatrix.length-1]).split("?"),urlreal=urlmatrix[urlmatrix.length-2]+"/"+urlsola[0],biptext=1==bip?"Bipon":"Bipoff",biptext+=1==birdsw?"/Birdon":"/Birdoff",biptext+=1==localtime?"/Localtime":"/UTCtime",tiposel&&(biptext=biptext+"/Tipo"+tiposel),order&&(biptext=biptext+"/Order"+1*order),elevationset>0&&(biptext=biptext+"/Elev"+1*elevationset),(activity="Hourly/Con "+urlreal+"/Loc;"+document.getElementById("loc").value+"/Lat:"+(1*localat).toFixed(4)+"/Lon:"+(1*localon).toFixed(4)+"/Z"+zoom+"/"+biptext+"/"+screen.width+"x"+screen.height+"/"+satactivity).split("/Auto").length>5)){var e=activity.indexOf("/Auto"),t=activity.lastIndexOf("/Auto");activity=activity.slice(0,e)+"/Autos/"+activity.slice(t+6,activity.length)}}function setCookie(e,t,n){var i=new Date;i.setDate(i.getDate()+n);var a=t+(null==n?"":"; expires="+i.toUTCString());document.cookie=e+"="+a}function calcaos(e,t,n){if(!((diff=t-new Date-6e4*deltaminutes)>0))return"";var i=(diff=Math.floor(diff/1e3))%60,a=(diff=Math.floor(diff/60))%60,s=(diff=Math.floor(diff/60))%24;return diff=Math.floor(diff/24),1*a<10&&(a="0"+a),1*i<10&&(i="0"+i),'<font style="font-family:Arial;font-size:18px;font-weight:bold;line-height:16px;vertical-align:10%;"><center>'+e+" AOS in "+(deltatime=s+":"+a+":"+i)+"</center></font>"}function tilt(e,t,n){return longdiffr=(e-n)/57.29578,eslatr=t/57.29578,poltilt=-57.29578*Math.atan(Math.sin(longdiffr)/Math.tan(eslatr))}function getip(){try{var e=new XMLHttpRequest;if(e.open("GET","https://api.ipify.org",!1),e.send(null),sleep(200),200==e.status&&(myip=e.responseText,urllatlon="https://api.ipdata.co/"+myip+"?api-key=fa181ab6aec1e3b1b2bcda4d2ca1d29d997b34358ce8cfd79473fd55",e.open("GET",urllatlon,!1),e.send(null),sleep(200),latf=0,lonf=0,200==e.status)){for(h=0,resu1m=(resu1=e.responseText).split(",");h<resu1m.length;h++)(resu2=resu1m[h].replace(/\"/g,"")).indexOf("latitude")>-1&&(latf=resu2.replace(/latitude: /,"")),resu2.indexOf("longitud")>-1&&(lonf=resu2.replace(/longitude: /,""));localat=latf,localon=lonf}}catch(e){localat=0,localon=0,alert("Please set your location\nClicking to Location\nWill be saved for next run")}}function calcaost(e,t){if((diff=e-new Date-6e4*deltaminutes)>0){var n=(diff=Math.floor((diff=Math.floor(diff/1e3))/60))%60,i=diff=Math.floor(diff/60);return 1*n<10&&(n="0"+n),deltatime=i+":"+n}n=(diff=Math.floor((diff=Math.floor((diff=t-new Date+6e4*deltaminutes)/1e3))/60))%60,i=diff=Math.floor(diff/60);return 1*n<10&&(n="0"+n),"-"+(deltadiff=n)+"'"}function flipsw(e){var t="";"dosw"==e.id&&(DopplerchangeDownlink?(DopplerchangeDownlink=!1,t="=OFF"):(DopplerchangeDownlink=!0,t="=ON")),"upsw"==e.id&&(DopplerchangeUplink?(DopplerchangeUplink=!1,t="=OFF"):(DopplerchangeUplink=!0,t="=ON")),satactivity=satactivity+e.id.toUpperCase()+t+"/"}function enterfreq(e){var t;"UpLink"!=e&&"DownLink"!=e||("UpLink"==e&&(other="DownLink",setdelta=uldeltad),"DownLink"==e&&(other=" UpLink ",setdelta=dldeltad),signo=-1,"NOR"==satfreq[satfreqpointer][8]&&(signo=1),also="NOT",0==satfreq[satfreqpointer][9]&&(also="also"),null!=(t=prompt("Enter +/- displacement in Hertz for "+e+" Frequency\nWill "+also+" change "+other+" frequency (includes Doppler)\nOr as alternative could enter absolute frequency in KHz",setdelta))&&isNumeric(t)&&("UpLink"==e&&(uldeltad=1*t,"NOT"!=also&&(dldeltad=1*t*signo)),"DownLink"==e&&(dldeltad=1*t,"NOT"!=also&&(uldeltad=1*t*signo))));"Beacon"==e&&(setdelta=bndeltad,null!=(t=prompt("Enter +/- displacement in Hertz for "+e+" Frequency",setdelta))&&isNumeric(t)&&(bndeltad=parseInt(1*t)));satactivity=satactivity+e.substring(0,3)+t+"/"}function test(){alert("test")}function loadMapState(){if(localat=(splitStr=getCookie("passCookie").split("_"))[0],localon=splitStr[1],bipset=!(splitStr.length>2)||"bipon"==(bipcookie=splitStr[2]),zoom=splitStr.length>3?splitStr[3]:"1",birdsw=!0,splitStr.length>4)if(isNumeric(splitStr[4]))if(selsatsave=selsat.slice(),splitStr.length>4)if((selectnewsats=splitStr[4]).length>1)for(k=0,defaults=selectnewsats,selsat.length=0;k<selectnewsats.length;k+=5)selsat.push(selectnewsats.substring(k,k+5));else selsat=selsatsave.slice();else selectnewsats="";else birdsw=!0,splitStr[4].indexOf("birdoff")>-1&&(birdsw=!1),localtime=!0,deltaminutes=0,splitStr[4].indexOf("utctime")>-1&&(localtime=!1,deltaminutes=(new Date).getTimezoneOffset()),splitStr[4].indexOf("Tipo")>-1&&(tiposel=splitStr[4].substr(splitStr[4].indexOf("Tipo")+4,1)),splitStr[4].indexOf("Order")>-1&&(order=splitStr[4].substr(splitStr[4].indexOf("Order")+5,1)),elevationset=0,splitStr[4].indexOf("Elev")>-1&&!isNumeric(elevationset=splitStr[4].substr(splitStr[4].indexOf("Elev")+4,2).replace(/,/,"").replace(/_/,""))&&(elevationset=0),aumento=1,splitStr[4].indexOf("Aumento")>-1&&(aumento=splitStr[4].substr(splitStr[4].indexOf("Aumento")+7,4)/1e3);if(splitStr.length>5)if(selsatsave=selsat.slice(),(selectnewsats=splitStr[5]).length>1)for(k=0,defaults=selectnewsats,selsat.length=0;k<selectnewsats.length;k+=5)selsat.push(selectnewsats.substring(k,k+5));else selsat=selsatsave.slice();else selectnewsats=""}function getCookie(e){var t,n,i,a=document.cookie.split(";");for(t=0;t<a.length;t++)if(n=a[t].substr(0,a[t].indexOf("=")),i=a[t].substr(a[t].indexOf("=")+1),(n=n.replace(/^\s+|\s+$/g,""))==e)return unescape(i);return""}function gqs(e){if((q=(document.location+"").split("?"))[1]){var t=q[1].split("&");for(i=0;i<t.length;i++){var n=t[i].split("=");if(n[0]==e)var a=n[1]}}return a}function replacesatname(e){var n=e;for(t=0;t<replacetable.length;t++)replacetable[t][0]==e&&(n=replacetable[t][1]);return n}function gonext(){(satfreqpointer+=1)>maxsatfreq&&(satfreqpointer=0)}function changewisp(e){wispmode="dl"==e?"dl":"bn"}function blink(e){clearInterval(flash),"BC;"==e.substr(-3)?document.getElementById("AOSLOS").innerHTML='<font style="color:#ffcc77;">'+e+"</font>":document.getElementById("AOSLOS").innerHTML='<font style="color:#ccffcc;">'+e+"</font>",flash=setInterval((function(){document.getElementById("AOSLOS").innerHTML=""}),400)}function chatbox(){satactivity+="CHAT/",preferences="toolbar=no,width=550px,height=455px,center,margintop=0,top=30,left=3,status=no,scrollbars=no,resizable=no,dependent=yes,z-lock=yes",null!=popup&&popup.close(),(popupwi=window.open("chat/index.php","win1",preferences)).setTimeout("self.close()",864e5)}function countarray(e){var t=0;for(o=0;o<freq.length;o++)freq[o][9]==e&&t++;return t}function IEVersion(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent;null!=RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(t)&&(e=parseFloat(RegExp.$1))}return e}function isOpera(){return null!==window.navigator.userAgent.match(/Opr\//)}function isIE(){return null!==window.navigator.userAgent.match(/MSIE|Trident/)}function detectIE(){return window.navigator.userAgent.indexOf("Edge/")>0}function versats(e){let t=!(5==tiposel||!isIE()&&!detectIE());!!("Microsoft Internet Explorer"==navigator.appName&&IEVersion()>0)&&(t=!1),isOpera&&(t=!0),t&&(e=tiposel),closeOverlay(),satactivity=satactivity+"SATS"+e+"/";let n=0;const i=[],a=[];for(let e=0;e<alljs.length;e++)i[e]=("0"+alljs[e][1].substring(2,7).replace(/ /,"")).slice(-5);for(let e=0;e<freq.length;e++)a[e]=("0"+freq[e][0].replace(/ /,"")).slice(-5);let s=0,l="";const o='\n    <tr style="color:#ffffff;background-color:#000000; font-weight:bold;">\n      <td align=center style="font-size:14px;padding:2px 0px;">Cat #</td>\n      <td align=center style="font-size:14px;padding:2px 0px;">&nbsp;Desig.</td>\n      <td align=center style="font-size:14px;padding:2px 0px;">Launch&nbsp;</td>\n      <td align=center>Orbit#</td>\n      <td style="font-size:14px;padding:2px 0px;">&nbsp;H.Km.</td>\n      <td align=center style="font-size:14px;padding:2px 0px;">Inclin.</td>\n      <td align=center style="font-size:14px;padding:2px 0px;">Orb/Day</td>\n      <td style="white-space:nowrap;font-size:14px;padding:2px 0px;">Satellite Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>\n    </tr>';if(9==e)for(let e=0;e<alljs.length;e++){let t=!1;for(let n=0;n<freq.length;n++)if(i[e]==a[n]){t=!0;break}if(!t){const t=1*alljs[e][1].substring(9,11)>50?"19":"20",n=s%2==0?"style='background-color:#e4e4e4;font-size:14px;'":"style='background-color:#ffffff;font-size:14px;'",i=86400/(1*alljs[e][2].substring(52,60)),a=0x9306132f11f*(i*i),o=(Math.pow(a,.33333333333)/1e3-6378).toFixed(0);let r="";for(let t=0;t<alljs.length;t++)if(alljs[t][1].substring(2,7)==alljs[e][1].substring(2,7)){r=`${alljs[t][0].replace(/ /g,"&nbsp;")}<br>${alljs[t][1].replace(/ /g,"&nbsp;")}<br>${alljs[t][2].replace(/ /g,"&nbsp;")}`;break}s++,l+=`\n          <tr ${n}>\n            <td align=center style="padding:4px 0px;font-weight:bold;font-size:14px;">\n              <a href='#' onclick="event.preventDefault();updateKepDisplay('${r.replace(/'/g,"\\'")}');" style="color:blue;">\n                ${alljs[e][1].substring(2,7)}\n              </a>\n            </td>\n            <td align=center style="padding:4px 0px;font-weight:bold;font-size:14px;">${alljs[e][1].substring(8,15)}</td>\n            <td align=center style="padding:4px 0px;font-weight:bold;font-size:14px;">${t}${alljs[e][1].substring(9,11)}</td>\n            <td align=center style="padding:4px 0px;font-weight:bold;font-size:14px;">${1*alljs[e][2].substring(63,68)}&nbsp;</td>\n            <td align=right style="padding:4px 0px;font-weight:bold;font-size:14px;">${o}</td>\n            <td style="text-align:right;padding:4px 0px;font-weight:bold;font-size:14px;">${alljs[e][2].substring(9,13)}&nbsp;</td>\n            <td style="text-align:right;padding:4px 0px;font-weight:bold;font-size:14px;">${alljs[e][2].substring(52,58)}&nbsp;&nbsp;</td>\n            <td style="padding:4px 0px;font-weight:bold;font-size:14px;">${alljs[e][0]}</td>\n          </tr>`}}const r=t?"":"\n    <a href='#' class='botonch' style=\"color:#000000;background-color:#9fef86;padding: 8px 4px;font-size: 14px;\" onclick='event.preventDefault();versats(0);'>\n      &nbsp;SSB Linear&nbsp;\n    </a>&nbsp;&nbsp;&nbsp;\n    <a href='#' class='botonch' style=\"color:#000000;padding: 8px 4px;font-size: 14px;background-color:#ffff62;\" onclick='event.preventDefault();versats(7);'>\n      &nbsp;SSB + FM&nbsp;\n    </a>&nbsp;&nbsp;&nbsp;\n    <a href='#' class='botonch' style=\"color:#000000;padding: 8px 4px;font-size: 14px;background-color:#ff6af7;\" onclick=\"event.preventDefault();versats(1);;\">\n      &nbsp;FM Voice&nbsp;\n    </a>&nbsp;&nbsp;&nbsp;\n    <a href='#' class='botonch' style=\"color:#000000;padding: 8px 4px;font-size: 14px;background-color:#ffb084;\" onclick='event.preventDefault();versats(2);'>\n      &nbsp;FM Digital&nbsp;\n    </a>&nbsp;&nbsp;&nbsp;\n    <a href='#' class='botonch' style=\"color:#000000;padding: 8px 4px;font-size: 14px;background-color:#9ae1ff;\" onclick='event.preventDefault();versats(3);'>\n      &nbsp;XMT Only&nbsp;\n    </a>&nbsp;&nbsp;&nbsp;\n    <a href='#' class='botonch' style=\"color:#000000;padding: 8px 4px;font-size: 14px;background-color:#61c761;\" onclick='event.preventDefault();versats(4);'>\n      &nbsp;Weather&nbsp;\n    </a>&nbsp;&nbsp;&nbsp;\n    <a href='#' class='botonch' style=\"color:#000000;padding: 8px 4px;font-size: 14px;background-color:#e2e2e2;\" onclick='event.preventDefault();versats(6);'>\n      &nbsp;ALL Sats&nbsp;\n    </a>&nbsp;&nbsp;&nbsp;\n    <a href='#' class='botonch' style=\"color:#ffffff;padding: 8px 4px;font-size: 14px;background-color:#222222;\" onclick='event.preventDefault();versats(9);'>\n      &nbsp;UnClasif&nbsp;&nbsp;\n    </a>&nbsp;&nbsp;&nbsp;";let d="";switch(e){case 0:d=`${countarray(0)} SSB LINEAR SATS`;break;case 7:d=1*countarray(0)+1*countarray(1)+" SSB LINEAR AND FM VOICE SATS";break;case 1:d=`${countarray(1)} FM VOICE SATS`;break;case 2:d=`${countarray(2)} FM & SSB DIGITAL SATS`;break;case 3:d=`${countarray(3)} TRANSMIT ONLY SATS`;break;case 4:d=`${countarray(4)} WEATHER METEOROLOGICAL SATS`;break;case 6:d=`ALL SATS (${alljs.length})`;break;case 9:d=`UNCLASIFIED SATS (${s})`}let c="";if(9!=e){const t='\n      <table border="0" cellpadding="0" cellspacing="0" style="font-family:\'Arial Narrow\',Tahoma, Arial, \'Times New Roman\';font-size:11px;line-height:10px;align:center;width:auto;">\n        <tr>\n          <td id=\'kepa\' style="padding:2px 0px;font-size:14px;line-height:14px;"></td>\n          <td colspan=12 id=\'kepi\' style="padding:2px 0px;font-family:courier;font-size:14px;font-weight:bold;line-height:14px;"></td>\n        </tr>\n        <tr style=\'font-weight:bold;color:#ffffff;background-color:#000000;height:12px;\'>\n          <td align=center style="font-size:14px;white-space:nowrap;cursor:pointer;padding:4px 0px;" title="*=Selected&#13& Catalog #"><b>I CAT#</b></td>\n          <td align=center style="font-size:14px;padding:4px 0px;"><b>NAME</b></td>\n          <td align=center style="font-size:14px;cursor:pointer;padding:4px 0px;" title="Center Frequency"><b>&nbsp;Uplink</b></td>\n          <td align=center style="font-size:14px;cursor:pointer;" title="Center Frequency"><b>&nbsp;Dwlink</b></td>\n          <td align=center style="font-size:14px;padding:4px 0px;"><b>&nbsp;Beacon</b></td>\n          <td align=center style="font-size:14px;cursor:pointer;padding:4px 0px;" title="Uplink Mode"><b>&nbsp;UM&nbsp;</b></td>\n          <td align=center style="font-size:14px;cursor:pointer;padding:4px 0px;" title="Downlink Mode"><b>&nbsp;&nbsp;DM&nbsp;&nbsp;</b></td>\n          <td align=center style="font-size:14px;cursor:pointer;padding:4px 0px;" title="Beacon Mode"><b>&nbsp;BM</b></td>\n          <td align=center style="font-size:14px;padding:4px 0px;"><b>&nbsp;R/N</b></td>\n          <td align=center style="font-size:14px;padding:4px 0px;"><b>&nbsp;T</b></td>\n          <td align=center style="font-size:14px;cursor:pointer;padding:4px 0px;" title="Subtone CTCSS"><b>&nbsp;ST</b></td>\n          <td align=center style=\'font-size:14px;white-space:nowrap;padding:4px 0px;\'><b>&nbsp;&nbsp;&nbsp;&nbsp;Emission Type&nbsp;&nbsp;&nbsp;&nbsp;</b></td>\n          <td align=center style="font-size:14px;padding:4px 0px;"><b>&nbsp;Comments&nbsp;</b></td>\n        </tr>';let i="";for(let t=0;t<freq.length;t++){let a=!1;if(e<6&&(freq[t][9]==e||5==freq[t][9])?a=!0:7!=e||0!=freq[t][9]&&1!=freq[t][9]&&5!=freq[t][9]?6==e&&(a=!0):a=!0,a){let a=`<tr ${n%2==0?"style='background-color:#e4e4e4;'":"style='background-color:#ffffff;'"}>`;for(let i=0;i<13;i++){const s=1==i?'align=center style="font-weight:bold;padding:4px 0px;font-size:14px;"':'align=center style="padding:4px 0px;font-size:14px;"';let l=!1;for(let e=0;e<selsat.length;e++)if(selsat[e]==freq[t][0].substr(0,5)){l=!0;break}let o="";if(0==i)o="NA-"==freq[t][1].substring(0,3)||l?"*":"&nbsp;";else if(1==i){let n="";for(let e=0;e<alljs.length;e++)if(alljs[e][1].substring(2,7)==freq[t][0]){n=`${alljs[e][0].replace(/ /g,"&nbsp;")}<br>${alljs[e][1].replace(/ /g,"&nbsp;")}<br>${alljs[e][2].replace(/ /g,"&nbsp;")}`;break}let a=freq[t][i].replace(/height:76px;/,6==e?"height:22px;":"height:4px;").replace(/background-image: url/,"").replace(/<br>Still <i>'Calling Home..'/,"").replace(/LUSAT has survived<br>30 Years in Space/,"").replace(/<br>/g,6==e?"":"&nbsp;").replace(/&nbsp;&nbsp;/g,"&nbsp;");o=`&nbsp;<a href='#' onclick="event.preventDefault();updateKepDisplay('${n.replace(/'/g,"\\'")}');" style="color:blue;">${a}</a>`}else{o=`&nbsp;${freq[t][i].replace(/height:76px;/,6==e?"height:22px;":"height:4px;").replace(/background-image: url/,"").replace(/<br>Still <i>'Calling Home..'/,"").replace(/LUSAT has survived<br>30 Years in Space/,"").replace(/<br>/g,6==e?"":"&nbsp;").replace(/&nbsp;&nbsp;/g,"&nbsp;")}`}a+=`<td ${s}>${o}</td>`,n++}a+="</tr>",i+=a,6==e&&n%13==0&&(i+="<tr>")}}c=t+i+'\n      <tr style=\'font-size:14px;font-weight:bold;color:#ffffff;background-color:#000000;height:12px;\'>\n        <td align=center style="white-space:nowrap;cursor:pointer;padding:2px 0px;" title="*=Selected&#13& Catalog #"><b>I CAT#</b></td>\n        <td align=center style="padding:2px 0px;"><b>NAME</b></td>\n        <td align=center style="cursor:pointer;padding:2px 0px;" title="Center Frequency"><b>&nbsp;Uplink</b></td>\n        <td align=center style="cursor:pointer;padding:2px 0px;" title="Center Frequency"><b>&nbsp;Dwlink</b></td>\n        <td align=center style="padding:2px 0px;"><b>&nbsp;Beacon</b></td>\n        <td align=center style="cursor:pointer;padding:2px 0px;" title="Uplink Mode"><b>&nbsp;UM&nbsp;</b></td>\n        <td align=center style="cursor:pointer;padding:2px 0px;" title="Downlink Mode"><b>&nbsp;&nbsp;DM&nbsp;&nbsp;</b></td>\n        <td align=center style="cursor:pointer;padding:2px 0px;" title="Beacon Mode"><b>&nbsp;BM</b></td>\n        <td align=center style="padding:2px 0px;"><b>&nbsp;R/N</b></td>\n        <td align=center style="padding:2px 0px;"><b>&nbsp;T</b></td>\n        <td align=center style="cursor:pointer;padding:2px 0px;" title="Subtone CTCSS"><b>&nbsp;ST</b></td>\n        <td align=center style=\'white-space:nowrap;padding:2px 0px;\'><b>&nbsp;&nbsp;&nbsp;&nbsp;Emission Type&nbsp;&nbsp;&nbsp;&nbsp;</b></td>\n        <td align=center style="padding:2px 0px;"><b>&nbsp;Comments&nbsp;</b></td>\n      </tr>\n      </table></center>'}showOverlay(`\n    <div style="text-align: center; padding: 20px;">\n      ${r}\n      <button onclick="closeOverlay();" style="font-family:Tahoma,Arial;font-size:14px;font-weight:bold;padding:8px 16px;margin-left:10px;">Close</button><br>\n      <p id='tit' style='font-size:22px;font-weight:bold;font-family:Tahoma;color:#555555;padding:10px 0px;text-align:center;'>${d}</p>\n      ${9==e?`<div style="width:800px; margin: 0 auto;">\n          <table border=0 cellpadding=1 cellspacing=0 style="font-size:12px;font-family:Courier;line-height:10px;font-weight:bold;width:800px;">\n            <tr>\n              <td id='kepa' style="padding:2px 0px;font-size:14px;line-height:14px;"></td>\n              <td colspan=12 id='kepi' style="padding:2px 0px;font-family:courier;font-size:14px;font-weight:bold;line-height:14px;"></td>\n            </tr>\n            ${o}\n            ${l}\n            ${o}\n          </table>\n        </div>`:c}\n    </div>`)}function showOverlay(e){closeOverlay();const t=document.createElement("div");t.id="satsOverlay",t.style.cssText="\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.7);\n    z-index: 10000;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    overflow-y: auto;\n  ";const n=document.createElement("div");n.style.cssText="\n    background-color: #f0e8dc;\n    border-radius: 8px;\n    max-width: 95%;\n    max-height: 90%;\n    overflow-y: auto;\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n    display: flex;\n    position: absolute;\n    top: 40px;\n  ";const i=document.createElement("style");i.textContent="\n    .botonch {\n      text-decoration: none;\n      border: outset;\n      border-radius: 9px;\n      border-width: 2px;\n      background-color: lightblue;\n      color: #000000;\n      font-family: tahoma,arial,trebuchet;\n      font-size: 12px;\n      font-weight: bold;\n      line-height: 18px;\n      white-space: nowrap;\n      cursor: pointer;\n      display: inline-block;\n    }\n    .botonch:hover, button:hover {\n      background-color: yellow;\n    }\n     td a:hover {\n      background-color: yellow;\n     }  \n  ",document.head.appendChild(i),n.innerHTML=e,t.appendChild(n),document.body.appendChild(t),t.addEventListener("click",(function(e){e.preventDefault(),e.target===t&&closeOverlay()})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&closeOverlay()}))}function closeOverlay(){const e=document.getElementById("satsOverlay");e&&e.remove()}function updateKepDisplay(e){const t=document.getElementById("kepa"),n=document.getElementById("kepi");if(t&&n){t.innerHTML="SAT<br>KEPs<br>TLE",n.innerHTML=e;const i=document.getElementById("satsOverlay");if(i){i.firstChild.scrollTop=0}}}function showhelp(){satactivity+="HELP/";const e=document.getElementById("help-overlay");e&&e.remove();const t={english:"<center><b>* This application predicts and tracks amateur satellites in real time (local or GMT)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></center>\n      <ul>\n        <li>Should set your location automatically, if not, click on blue <u>'Locator'</u> label on top.</li>\n        <li>Click on any colored icon, you'll see a intuitive graph showing actual Azim/Elev.</li>\n        <li>Frequencies and modes of selected Satellite are shown with actual doppler.</li>\n        <li>When sat clicked, shows path+coverage. Yellow icon marks Sat is in range.</li>\n        <li>Table shows passes times/duration. Insure having correct time and timezone.</li>\n        <li>Click on SUN will show day/night line, same for MOON, with usual EME freqs.</li>\n        <li>By clicking on numbers at upper right, several zoomed maps are available.</li>\n        <li>If sound enabled (red X), beep alerts for any Satellite approaching or leaving.</li>\n        <li>Keps are updated daily (no need to update), most active Satellites are provided.</li>\n        <li>Additional satellites can be added or deleted by clicking on '<u>+Sats</u>' label on top.</li>\n        <li>Application could be used in the field, runs even without Internet on any device.</li>\n        <li>If your locator not taken, start adding to url ?localat=xx.xxxx&localon=yy.yyyy .</li>\n        <li>If using iPad or IOS and locator not taken, start adding to url ?locator=XXXXXX .</li>\n        <li>To select a group add to url ?type= and any FM, SSB, SSBFM, NOAA, XMT, digital.</li>\n        <li>If you want to start Pass with a specific satellite add to url ?sat=XXXXX .</li>\n        <li>If you want to start Pass with only one satellite add to url ?satx=YYYYY .</li>\n        <li>Or double click on a satellite, to see all sats again double click again.</li>\n      </ul>\n      <center><i>Enjoy!! Best 73 from LU7ABF, Pedro Converso, lu7abf at amsat.org.ar</i></center><br>",espanol:"<center><b>* Esta aplicación predice y trackea Satélites amateur en tiempo real (local o GMT)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></center>\n      <ul>\n        <li>Debería poner automático tu ubicación, si no es así clickeá arriba leyenda <u>Locator</u>.</li>\n        <li>Clickeá cualquier icono de color, verás gráfico mostrando azimut y elevación.</li>\n        <li>Al seleccionar te muestra frecuencias y modos del Satélite y su Doppler real.</li>\n        <li>Se muestran órbita y cubrimiento, el icono amarillo indica Satélite al alcance.</li>\n        <li>La tabla dá horario/duración/azimuts. Asegurá tener bién día/hora/huso en tu PC.</li>\n        <li>Al clickear el Sol, muestra línea día/noche y en la Luna frecuencias usuales TLT.</li>\n        <li>Clickeando en números arriba/derecha, podrás ver varios acercamientos del mapa.</li>\n        <li>Deshabilitando anuncios (X roja) un beep alerta Satélites aparecéndo o yéndose.</li>\n        <li>Los Keplerianos se actualizan solos, se muestran los usuales Satélites activos.</li>\n        <li>Dando click en '<u>+Sats</u>' arriba en la pantalla, podés agregar o quitar Satélites.</li>\n        <li>Pass puede usarse en el campo, corre aún sin Internet en cualquier dispositivo.</li>\n        <li>Si no toma tu locator, arranca agregando a la url ?localat=xx.xxxx&localon=yy.yyyy .</li>\n        <li>Si usas iPad o IOS y no toma tu locator, arranca agregando a la url ?locator=XXXXXX .</li>\n        <li>Selecc. un grupo: agregar a url ?type= y cualquier FM, SSB, SSBFM, NOAA, XMT, digital.</li>\n        <li>Si quiere empezar el Pass con un satelite especifico agregue a la url ?sat=YYYYY .</li>\n        <li>Si quiere empezar el Pass con solo un satelite agregue a la url ?satx=XXXXX .</li>\n        <li>O de doble click en un satelite, para ver de nuevo todos los sats, doble click de nuevo.</li>\n      </ul>\n      <center><i>Que lo disfrutes, 73 de LU7ABF, Pedro Converso, lu7abf arroba amsat.org.ar</i></center><br>",portugues:"&nbsp;&nbsp;&nbsp;&nbsp;<b>* Esta aplicação prevê e mostra satélites do radioamador em tempo real (local ou GMT)</b></center>\n      <font style='font-size:13px;'>\n        <ul style='padding:0;margin:16;'>\n          <li>Deve colocar a sua localização automaticamente, se não clique acima lenda <b><u>Locator</u></b>.</li>\n          <li>Clique em qualquer ícone de cor, você vai ver gráfico mostrando azimute e elevação.</li>\n          <li>Ao selecionar, mostra freqüências e modos do satélite alem da sua Doppler real.</li>\n          <li>Se mostra orbita e cobertura. Se o ícone e amarelo indica que o satélite e ao alcance.</li>\n          <li>A tabela dá tempo/duração/azimutes. Certifique-se de ter bom dia/hora/fuso no seu PC.</li>\n          <li>Ao clicar o ícone do Sol mostra linha dia/noite e da Lua freqüências habituais TLT.</li>\n          <li>Clicando em números acima/direita, você verá várias abordagens do mapa.</li>\n          <li>Avisa com sinal sonoro se um satélite aparece ou vai, clique no X vermelho para parar o som.</li>\n          <li>Keplers são atualizados sozinho, os satélites ativos usuais são mostrados.</li>\n          <li>Clicando em <b><u>'+Sats'</u></b> acima na tela, você pode adicionar ou remover satélites.</li>\n          <li>PASS pode ser usada no campo, até mesmo sem Internet. Opera em qualquer dispositivo.</li>\n          <li>Si localizador nao e tomado proba acrescentando a url com ?localat=xx.xxxx&localon=yy.yyyy .</li>\n          <li>Para um gruppo, adicionar ao url ?type= e qualquer FM, SSB, SSBFM, NOAA, XMT, digital.</li>\n          <li>Se você quer começar com um satelite especifico, adicionar ao url ?sat=YYYYY .</li>\n          <li>Se você quer começar so com un satelite, adicionar ao url ?satx=XXXXX .</li>\n          <li>Ou clique duas vezes em um sat, para ver todos os sats novamente, clique duas vezes.</li>\n        </ul>\n        <center><i>Aprecia-lo, 73 LU7ABF, Pedro Converso, lu7abf arroba amsat.org.ar</i></center>\n      </font><br>",deutsche:"<div style='font-size:16px;line-height:16px;font-weight:normal;font-family:Arial Narrow,Tahoma;'>\n        <b>&nbsp;&nbsp;&nbsp;* Diese Anwendung sagt Flugbahnen von Amateurfunk-Satelliten in Echtzeit voraus (Lokalzeit oder GMT)</b><br><br>\n        <ul style='padding:0;margin:0;'>\n          <li>Deine Position sollte automatisch gesetzt werden, falls nicht, klicke oben auf das blaue <u>'Locator'</u>-Symbol.</li>\n          <li>Klicke auf eines der farbigen Symbole um den Horizontalwinkel (Azimut) und Vertikalwinkel (Elevation) graphisch darzustellen.</li>\n          <li>Es werden Betriebsart und Frequenzen (inklusive Doppler-Verschiebung) des ausgewählten Satelliten angezeigt.</li>\n          <li>Ist ein Satellit ausgewählt, wird dessen Bahn und dessen (Funk-)Abdeckung angezeigt. Ein gelbes Symbol bedeutet, dass der Satellit in Reichweite ist.</li>\n          <li>Die Tabelle zeigt eine Übersicht der Überflugzeiten und der Überflugdauer. Stelle dazu sicher, dass auf deinem Computer die korrekte Zeit eingestellt ist.</li>\n          <li>Klicke auf 'SUN' um die Tages- und Nachtlinie anzuzeigen, dasselbe gilt für 'Moon' für die üblichen EME (Erde-Mond-Erde) Frequenzen.</li>\n          <li>Durch Anklicken der Zahlen oben rechts können verschiedene Kartenmaßstäbe ausgewählt werden.</li>\n          <li>Wenn der Ton aktiviert ist (rotes X), werden Pieptöne für jeden Satelliten ausgegeben, der in Reichweite kommt oder diese verlässt.</li>\n          <li>Die Kepler-Daten werden täglich aktualisiert (keine manuelle Aktualisierung notwendig) - die meisten aktiven Satelliten sind bereits eingetragen.</li>\n          <li>Weitere Satelliten können durch klicken auf das <u>'+Sats'</u>-Symbol hinzugefügt oder gelöscht werden (oben auf der Seite).</li>\n          <liWenn du mit einem bestimmten Satelliten anfangen willst, fugst du zu url ?sat=XXXXX</li>\n          <li>Die Anwendung kann auch im Feld eingesetzt werden, sie läuft auch ohne Internet auf jedem Gerät.</li>\n          <li>Wenn Sie nicht Ihre Locator nehmen, starten Sie auf die URL hinzuzufugen ?localat=xx.xxxx&localon=yy.yyyy .</li>\n          <li>Um einen einzelnen Satelliten zu sehen, doppelklicken Sie auf einen Satelliten. Um wieder alle Satelliten zu sehen, doppelklicken wieder.</li>\n        </ul><br>\n        <center><i>Viel Spass!!! Beste 73 von LU7ABF, Pedro Converso, lu7abf at amsat.org.ar</i></center><br>\n      </div>",italiano:"<div style='font-size:14px;line-height:18px;font-weight:normal;'>\n        <b>* Questa applicazione prevede a tracciare satelliti radio amatoriali in tempo reale (locale/GMT)</b></font>\n        <font style='font-size:15px;'><br>\n        <li style='padding:0;margin:8;'>\n          <li>Dovrebbe mettere automaticamente tua posizione, se clicchi sopra <u>Locator</u> potrai inserire il tuo.</li>\n          <li>Fare clic su qualsiasi icona di colore, vedi il grafico che mostra l'azimut ed elevazione.</li>\n          <li>Quando si selezionano i satelliti, si vedono le frequenze e modalità, con il suo effettivo Doppler.</li>\n          <li>Sono indicati orbita e copertura, Un'icona gialla indica che il satellite è a portata di mano.</li>\n          <li>La tabella dà il tempo/durata/azimut. Contiene inoltre di avere ora e giorno sul tuo PC.</li>\n          <li>Quando si clicca il Sole viene mostrato il giorno/notte e le solite frequenze Luna TLT.</li>\n          <li>Cliccando sui numeri sopra a destra, vedrete diversi ingrandimenti della mappa.</li>\n          <li>Annunci e disattivazione (rosso X) avviso acustico ingresso e uscita del satellite.</li>\n          <li>L'aggiornamento dei dati Kepleriani avviene in automatico, vengono mostrati il satelliti attivi.</li>\n          <li>Cliccando su <u>'+Sats'</u> sullo schermo, è possibile aggiungere o rimuovere i satelliti.</li>\n          <li>Pass può essere utilizzato anche senza collegamento a Internet su qualsiasi dispositivo.</li>\n          <li>Se non si prendono il vostro locator, aggiungere alla url ?localat=xx.xxxx&localon=yy.yyyy .</li>\n          <li>Se si vuole iniziare con un satellite specifica, aggiungere alla URL ?sat=XXXXX .</li>\n          <li>Se si vuole iniziare con solo un satelite, aggiungere alla URL ?satx=YYYYY .</li>\n          <li>Oppure fai doppio clic su un satellite, per vedere di nuovo tutti i sats, doppio clic recentemente.</li>\n        </ul>\n        <center><i>Grazie IZ5TEP, Filippo per l'aiuto in italiano e IK8XLD, Rocco per i preziosi suggerimenti<br><br>Godere!! Miglior 73 da LU7ABF, Pedro Converso, lu7abf a amsat.org.ar</i></center><br>\n      </div>",frances:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>* Cette application prédit et montre Satellites Amateur de temps réel (local ou GMT)</b><br>\n      <ul style='padding:0;margin:16;'>\n        <li>Devriez mettre votre position automatiquement, sinon cliquez dessus légende <b><u>Locator</u></b>.</li>\n        <li>Cliquez sur l'icône de couleur, vous verrez graphique montrant azimut et le élévation.</li>\n        <li>Lorsque les fréquences de sélection et modes vous montre le satellite et son Doppler réelle.</li>\n        <li>Ils sont représentés les orbites et la couverture. L'icône jaune indique la portée satellite.</li>\n        <li>Le tableau donne le temps/durée/azimuths. prétend également avoir jour/heure/fuseau de votre PC.</li>\n        <li>En cliquant sur l'icône Soleil montre jour/nuit et sur la Lune fréquences habituelles TLT.</li>\n        <li>En cliquant sur les numéros ci-dessus/droite, vous verrez plusieurs approches de la carte.</li>\n        <li>Annonces Désactivation (X rouge) Satellite Apparaissant bip d'avertissement ou de quitter.</li>\n        <li>Keplerian sont mis à jour seul, les satellites actifs habituels sont présentés.</li>\n        <li>En cliquant sur <b><u>'+Sats'</u></b> sur l'écran, vous pouvez ajouter ou supprimer des satellites.</li>\n        <li>PASS peut être utilisé dans le domaine, même sans internet fonctionne sur tout appareil.</li>\n        <li>Si utilisez le <a href='pass.exe' Title='Télécharger ou Executér pass.exe program' target=_blank style='color:#facc2e;'>PASS.EXE</a> avec <a href='wispdde.exe' Title='Télécharger ou Executér wispDDE Driver' target=_blank style='color:#facc2e;'>wispDDE</a>, pouvez contrôler les rotors et votre émetteurs-récepteurs.</li>\n        <li>Si ne prenez pas le locator, commencer a ajouter a l'url ?localat=xx.xxxx&localon=yy.yyyy .</li>\n        <li>Si vous voulez commencer avec un satellite spécifique ajouter à l'url ?sat=XXXXX .</li>\n        <li>Pour voir un seul sat double-cliquer sur un sat, pour revoir tous, double-cliquer encore.</li>\n      </ul>\n      <center><i>Profitez !!, 73 LU7ABF, Pedro Converso, lu7abf a amsat.org.ar</i></center><br>",russian:`<img alt='russian.gif' src='${imageSrcUrl.russian}' /></br></br>`,turkish:"<font style='font-size:16px;font-family:Arial Narrow,Tahoma;line-height:16px;font-weight:normal;'>\n        &nbsp;<b>* Bu uygulama tahmini ve gerçek zamanlı olarak (yerel veya GMT saatiyle) amatör uyduları izler.</b><br><br>\n        <ul style='padding:0;margin:0;'>\n          <li>Konumunuzun otomatik olarak ayarlamış olması gerekiyor. Ayarlanmamış ise üstteki mavi <u><b>'Locator'</b></u> linkini tıklayınız.</li>\n          <li>Renkli simgelerden herhangi birine tıkladığınızda, gerçek zamanlı bir Az/El grafiği göreceksiniz.</li>\n          <li>Seçilen uydunun frekans ve modları doppler'i verilmiş olarak gösterilir.</li>\n          <li>Uyduya tıkladığınızda, uydunun geçiş yolu ve kapsama alanı gözükür. Sarı işaretli olanlar görüş alanınızdaki uydulardır.</li>\n          <li>Tablo, uyduların geçiş zaman ve sürelerini gösterir. Doğru zaman diliminde olmasına dikkat ediniz.</li>\n          <li>Gece-gündüz hattı için GÜNEŞ'e, EME frekansları için de AY'a tıklayabilirsiniz.</li>\n          <li>Sağ üstteki sayılara tıklayıp harita ölçeğini değiştirebilirsiniz.</li>\n          <li>Alarm özelliğini aktif ettiğinizde (Kırmızı X), kapsama alanınıza giren ve çıkan uydular için sesli uyarılar alabilirsiniz.</li>\n          <li>Aktif olarak kullanılan uyduların keps verileri (ayrıca güncellemenize gerek kalmaksızın) her gün otomatik olarak güncellenir.</li>\n          <li>Yukarıdaki <u><b>'+Sats'</b></u> linkine tıklayıp tabloya uydu ekleyebilir veya çıkartabilirsiniz.</li>\n          <li>Uygulama herhangi bir cihazda, internet olmasa bile çalışabilir.</li>\n        </ul><br>\n        <center>Keyifli kullanımlar. 73 de LU7ABF, Pedro Converso, lu7abf{at}amsat.org.ar</i></center>\n      </font><br>",chinesse:`<img alt='russian.gif' src='${imageSrcUrl.chin1}' /></br></br>`,japanese:`<img alt='russian.gif' src='${imageSrcUrl.japan}' /></br></br>`,graphicHelp:`<img alt='.gif' src='${imageSrcUrl.passhelp}' /></br></br>`},n=document.createElement("div");n.id="help-overlay",n.style.cssText="\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.7);\n    z-index: 10000;\n    display: flex;\n    justify-content: center;\n    align-items: flex-start;\n    padding-top: 50px;\n    overflow-y: auto;\n  ";const i=document.createElement("div");i.style.cssText="\n    background-color: #172447;\n    min-width: 718px;\n    max-width: 90vw;\n    mix-height: 40vh;\n    max-height: 80vh;\n    border-radius: 8px;\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);\n    position: relative;\n    overflow-y: auto;\n    margin: 20px;\n  ";const a=document.createElement("button");a.innerHTML="×",a.style.cssText="\n    position: absolute;\n    top: 10px;\n    right: 15px;\n    background: none;\n    border: none;\n    font-size: 24px;\n    color: #ffffff;\n    cursor: pointer;\n    z-index: 1;\n    width: 30px;\n    height: 30px;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  ",a.addEventListener("mouseover",(()=>{a.style.backgroundColor="rgba(255, 255, 255, 0.2)"})),a.addEventListener("mouseout",(()=>{a.style.backgroundColor="transparent"}));const s=document.createElement("div");s.style.cssText="\n    padding: 20px;\n    font-family: Tahoma, Arial;\n    font-size: 14px;\n    line-height: 22px;\n    color: #ffffff;\n    font-weight: bold;\n  ";const l=document.createElement("div");l.innerHTML='<div style="padding: 8px 4px;margin-top: 5px;">\n    <a href="#english" onclick="event.preventDefault();switchHelpLanguage(\'english\');">English</a>&nbsp;&nbsp;\n    <a href="#espanol" onclick="event.preventDefault();switchHelpLanguage(\'espanol\');">Espa&ntilde;ol</a>&nbsp;&nbsp;\n    <a href="#portugues" onclick="event.preventDefault(); switchHelpLanguage(\'portugues\');">Portugu&eacute;s</a>&nbsp;&nbsp;\n    <a href="#deutsche" onclick="event.preventDefault();switchHelpLanguage(\'deutsche\');">Deutsch</a>&nbsp;&nbsp;\n    <a href="#italiano" onclick="event.preventDefault();switchHelpLanguage(\'italiano\');">Italiano</a>&nbsp;&nbsp;\n    <a href="#frances" onclick="event.preventDefault();switchHelpLanguage(\'frances\');">Fran&ccedil;ais</a>&nbsp;&nbsp;\n    <a href="#russian" onclick="event.preventDefault();switchHelpLanguage(\'russian\');">Russian</a>&nbsp;&nbsp;\n    <a href="#turkish" onclick="event.preventDefault();switchHelpLanguage(\'turkish\');">Turkish</a>&nbsp;&nbsp;\n    <a href="#chinesse" onclick="event.preventDefault();switchHelpLanguage(\'chinesse\');">Chinese</a>&nbsp;&nbsp;\n    <a href="#japanese" onclick="event.preventDefault();switchHelpLanguage(\'japanese\');">Japanese</a>\n   </div>';const o=document.createElement("div");o.id="lenguaje",o.innerHTML=t.english;const r=document.createElement("div");r.style.cssText="\n    text-align: center;\n    margin-top: 20px;\n    padding: 10px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  ";const d=[{text:"Exit Help",action:()=>c()},{text:"Graphic Help",action:()=>switchHelpLanguage("graphicHelp")}];function c(){n&&n.parentNode&&n.parentNode.removeChild(n)}d.forEach(((e,t)=>{const n=document.createElement("input");n.type="button",n.value=e.text,n.style.cssText="\n      font-weight: bold;\n      margin: 2px 5px;\n      padding: 5px 10px;\n      cursor: pointer;\n      background-color: #4a5568;\n      color: white;\n      border: 1px solid #666;\n      border-radius: 4px;\n    ",n.addEventListener("click",e.action),n.addEventListener("mouseover",(()=>{n.style.backgroundColor="#2d3748"})),n.addEventListener("mouseout",(()=>{n.style.backgroundColor="#4a5568"})),r.appendChild(n),(t+1)%3==0&&t<d.length-1&&r.appendChild(document.createElement("br"))})),a.addEventListener("click",c),n.addEventListener("click",(e=>{e.target===n&&c()})),document.addEventListener("keydown",(function e(t){"Escape"===t.key&&(c(),document.removeEventListener("keydown",e))})),s.appendChild(l),s.appendChild(o),s.appendChild(r),i.appendChild(a),i.appendChild(s),n.appendChild(i),document.body.appendChild(n),window.switchHelpLanguage=function(e){t[e]&&(o.innerHTML=t[e])}}function birdimage(){birdsw?(document.getElementById("bimg").src=imageSrcUrl.birdoff,birdsw=!1,satactivity+="BIRDON/"):(document.getElementById("bimg").src=imageSrcUrl.birdon,birdsw=!0,satactivity+="BIRDOFF/")}function rotorimage(){rotorsw?(document.getElementById("rimg").src=imageSrcUrl.rotoroff,rotorsw=!1,satactivity+="ROTORON/"):(document.getElementById("rimg").src=imageSrcUrl.rotoron,rotorsw=!0,satactivity+="ROTOROFF/")}function speak(){bip?(document.getElementById("spk").src=imageSrcUrl.speakeroff,bip=!1,satactivity+="BIPON/"):(document.getElementById("spk").src=imageSrcUrl.speakeron,bip=!0,satactivity+="BIPOFF/")}function MakeArray(e){this.length=e;for(var t=1;t<=e;t++)this[t]=0;return this}function getMapPosition(e,t,n){1==n?(displacement.x=0,displacement.y=0):(displacement.y=-1.5*(90-e)*n+135,displacement.x=-1.5*(parseInt(t)+180)*n*1+270),borde=0,displacement.y>0&&(borde=-displacement.y),270-displacement.y-270*n>0&&(borde=270-displacement.y-270*n),0!=borde&&(displacement.y=displacement.y+borde,document.getElementById("home").style.top=123+borde+"px")}function getxy(e,t,n){delta.x=parseInt(1.5*(t+180)*n+displacement.x),delta.y=parseInt(1.5*(90-e)*n+displacement.y)}function getlatlon(e,t,n,i){var a=3440.07,s=.01745329252,l=57.29577951308;lata1=e*s,lona1=t*s,bearing2=n*s;var o=Math.asin(Math.sin(lata1)*Math.cos(i/a)+Math.cos(lata1)*Math.sin(i/a)*Math.cos(bearing2)),r=lona1+Math.atan2(Math.sin(bearing2)*Math.sin(i/a)*Math.cos(lata1),Math.cos(i/a)-Math.sin(lata1)*Math.sin(o));return(out=new MakeArray(0)).lat2=o*l,out.lon2=r*l,out}function getsunpos(){date=new Date;var e=.017453292519943295,t=(60*date.getUTCHours()+date.getUTCMinutes())/1440,n=(date.getTime()/864e5+2440587.5-2451545)/36525,i=(280.46646+n*(36000.76983+3032e-7*n))%360,a=357.52911+n*(35999.05029-1537e-7*n),s=i+(Math.sin(e*a)*(1.914602-n*(.004817+14e-6*n))+Math.sin(2*e*a)*(.019993-101e-6*n)+289e-6*Math.sin(3*e*a))-.00569-.00478*Math.sin(125.04*e-1934.136*n),l=23+(26+(21.448-n*(46.815+n*(59e-5-.001813*n)))/60)/60+.00256*Math.cos(125.04*e-1934.136*n),o=Math.asin(Math.sin(e*l)*Math.sin(e*s))/e,r=.016708634-n*(42037e-9+1.267e-7*n),d=Math.tan(e*(l/2))*Math.tan(e*(l/2)),c=(1440*t+(d*Math.sin(2*e*i)-2*r*Math.sin(e*a)+4*r*d*Math.sin(e*a)*Math.cos(2*e*i)-.5*d*d*Math.sin(4*e*i)-1.25*r*r*Math.sin(2*e*a))/e*4)%1440;sunlon=-(c/4<0?c/4+180:c/4-180),sunlat=o}function selectItemByValue(e,t){for(var n=0;n<e.options.length;n++)e.options[n].text==t&&(e.selectedIndex=n,refresh=!0)}function kepschange(e,t){for(clearTimeout(newcycle),add=e,del=t,kepsdeladd(),"Microsoft Internet Explorer"==navigator.appName?PLib.sat.length=PLib.tleData.length:PLib.sat.length=0,cualdiv="home",(n=document.getElementById(cualdiv)).parentNode.removeChild(n),r=0;r<Orb.satelliteMarkers.length;r++){cualdiv="satelliteMarker"+r;for(var n=document.getElementById(cualdiv);n.firstChild;)n.removeChild(n.firstChild);n.parentNode.removeChild(n)}Orb.satelliteMarkers=[],arranque()}function fixcrc(e){var t,n,i=0;for(t=0;t<68;t++)(n=e.substring(t,t+1))>="1"&&n<="9"?i+=parseFloat(n):"-"==n&&i++;var a=i.toString().slice(-1);return e.substring(0,68)+a}function kepsupdate(e){for(h=0,newkepsm=(e=(e=(e=(e=(e=e.replace(/\n\n/g,"\n")).replace(/\n\n/g,"\n")).replace(/\n\n/g,"\n")).replace(/\n\n/g,"\n")).replace(/\n\n/g,"\n")).split("\n"),checkstart=!0,loginsert="I:",starth=0;h<newkepsm.length;h++)newkepsm[h].length>3&&newkepsm[h].length<30&&checkstart&&(starth=h,checkstart=!1);for(h=starth;h<newkepsm.length;h+=3)h+1<=newkepsm.length&&h+2<=newkepsm.length&&newkepsm[h].length>3&&newkepsm[h+1].length<71&&newkepsm[h+1].length>68&&newkepsm[h+2].length<71&&newkepsm[h+2].length>68&&"1 "==newkepsm[h+1].substr(0,2)&&"2 "==newkepsm[h+2].substr(0,2)&&newkepsm[h+1].substr(2,5)==newkepsm[h+2].substr(2,5)&&isNumeric(newkepsm[h+1].substr(16,65).replace(/ /g,"").replace(/-/g,"").replace(/\./g,"").replace(/\+/g,""))&&isNumeric(newkepsm[h+2].substr(8,65).replace(/ /g,"").replace(/-/g,"").replace(/\./g,"").replace(/\+/g,""))&&(" "==newkepsm[h].substr(1,1)&&(newkepsm[h]=newkepsm[h].substr(2,newkepsm[h].length)),alljs.splice(alljs.length,0,[newkepsm[h],fixcrc(newkepsm[h+1]),fixcrc(newkepsm[h+2])]),loginsert=loginsert+newkepsm[h+1].substr(2,5)+",");loginsert.length>4&&(satactivity+=loginsert=loginsert.substr(0,loginsert.length-1)+"/"),popupwin.close(),loginsert.length>4&&setTimeout("showkeps('gotokeps')",500)}function showkeps(e){satactivity+="KEPS/";let t=0,n="";for(let e=0;e<alljs.length;e++)alljs[e][1].substr(18,12)>n&&"999"!==alljs[e][1].substr(3,3)&&alljs[e][1].substr(18,1)<"5"&&(n=alljs[e][1].substr(18,12),t=e);const i=new Date("20"+alljs[t][1].substr(18,2),0,1*alljs[t][1].substr(20,3))+" ",a=`dated: ${i.substring(4,7)}-${i.substring(8,10)} 20${alljs[t][1].substr(18,2)} ${("0"+parseInt(24*alljs[t][1].substr(23,3))).slice(-2)} hs.`,s=screen.availWidth<801;let l="",o=0;for(let e=0;e<Math.floor(alljs.length/4+1);e++){l+="</tr><tr>";for(let t=e;t<alljs.length;t+=Math.floor(alljs.length/4+1)){let e="";for(let n=0;n<PLib.tleData.length;n++)if(alljs[t][1].substr(2,5)===PLib.tleData[n][1].substr(2,5)){e="background-color:#bbffaa;",o++;break}const n=alljs[t][1].substr(2,5);l+=`<td onclick="kepsOverlayFunctions.cambio(this,'${n}');" class="tddet" style="${e}">${n} ${replacesatname(alljs[t][0])}</td>\n`}}let r="";for(let e=0;e<PLib.tleData.length;e++)r+=`<div style="padding:4px 0"><span style="padding:2px 0">${PLib.tleData[e][0]}</span><br>`,r+=`<span style="padding:2px 0">${PLib.tleData[e][1].replace(/ /g,"&nbsp;")}</span><br>\n`,r+=`<span style="padding:2px 0">${PLib.tleData[e][2].replace(/ /g,"&nbsp;")}</span></div><br>\n`;const d=`\n    <div id="keps-overlay" class="keps-overlay" style="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background-color: rgba(0, 0, 0, 0.7);\n      z-index: 10000;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    ">\n      <div style="\n        background: white;\n        border-radius: 8px;\n        width: 95%;\n        max-height: 95%;\n        overflow: auto;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        position: relative;\n      ">\n        <style>${s?"\n    .keps-overlay .tdtit {font-family: 'Courier New'; line-height:15px; font-size:12px; font-weight:bold; white-space: nowrap;}\n    .keps-overlay .tddet {font-family: 'Courier New'; white-space: nowrap; font-size:12px; line-height:10px;cursor:pointer;font-weight:bold;padding:4px 0;}\n    .keps-overlay table{border-collapse: collapse;}\n    .keps-overlay tr {border:none;}\n    .keps-overlay td{border-right: solid 1px #000000;}\n    .keps-overlay .tdch {font-family: monospace; white-space: nowrap; font-size:11px; line-height:9px;cursor:pointer;font-weight:bold;}\n  ":"\n    .keps-overlay .tdtit {font-family: 'Courier New'; line-height:18px; font-size:16px; font-weight:bold; white-space: nowrap;}\n    .keps-overlay .tddet {font-family: 'Courier New'; white-space: nowrap; font-size:16px; line-height:10px;cursor:pointer;font-weight:bold;padding:4px 0;}\n    .keps-overlay table{border-collapse: collapse;}\n    .keps-overlay tr {border:none;}\n    .keps-overlay td{border-right: solid 1px #000000;}\n    .keps-overlay .tdch {font-family: 'Courier New'; white-space: nowrap; font-size:13px; line-height:10px;cursor:pointer;font-weight:bold;}\n  "}</style>\n        \n        \x3c!-- Close button --\x3e\n        <button onclick="kepsOverlayFunctions.closeOverlay()" style="\n          position: absolute;\n          top: 10px;\n          right: 15px;\n          background: #ff4444;\n          color: white;\n          border: none;\n          border-radius: 50%;\n          width: 30px;\n          height: 30px;\n          font-size: 18px;\n          cursor: pointer;\n          z-index: 10001;\n        ">×</button>\n        \n        <div style="padding: 40px 20px 20px; margin-top:0; margin-bottom:0; margin-left:1px; margin-right:0px;">\n          <center id="adddel" style="white-space: nowrap;">\n            <font style="font-family: 'Courier New'; line-height:14px; font-size:14px; font-weight:bold; white-space: nowrap;">\n              <input type="text" name="busco" id="keps-busco" maxlength="15" size="5" onchange="kepsOverlayFunctions.buscar();" oninput="kepsOverlayFunctions.buscar();" style="height:18px;text-transform:uppercase;">\n              <input type="button" name="buscobutton" id="keps-buscobutton" value="Search" onclick="kepsOverlayFunctions.buscar()" style="font-size:13px;font-weight:normal;line-height:13px;height:20px;">\n              &nbsp;Click Sats to Add/Del from predictions and click \n              <input type="button" style="font-weight:bold;line-height:14px;height:20px;" onclick="kepsOverlayFunctions.submit()" name="Submit" value="Submit">\n              &nbsp;or&nbsp;<a href="javascript:kepsOverlayFunctions.closeOverlay();">Go Back</a>\n            </font>\n            <input style="visibility:hidden;" name="del" id="keps-del" type="text" maxlength="1420" size="1" value="${window.del||""}">\n            <input style="visibility:hidden;" name="add" id="keps-add" type="text" maxlength="1420" size="1" value="${window.add||""}">\n            \n            <form target="pass" name="changes" id="keps-changes" style="margin-bottom:0;margin-top:0;margin-left:0px;margin-right:0px;">\n              <table border="0" id="keps-satelites" cellpadding="0" cellspacing="0" style="font-family: 'Courier New'; font-size:12px; font-weight:bold; line-height:13px;width:98%;">\n                <tr>\n                  <td class="tdtit"><u>CATNO</u> <u>Satellite Name</u></td>\n                  <td class="tdtit"><u>CATNO</u> <u>Satellite Name</u></td>\n                  <td class="tdtit"><u>CATNO</u> <u>Satellite Name</u></td>\n                  <td class="tdtit"><u>CATNO</u> <u>Satellite Name</u></td>\n                </tr>\n                ${l}\n                <tr>\n                  <td align="center" style="background-color:#fff380;border-right: solid 0px; font-size:14px;">\n                    ${alljs.length} Sats, ${o} Selected\n                  </td>\n                </tr>\n                <tr>\n                  <td align="right" valign="top" style="border-right: solid 0px;font-size:14px;">\n                    Paste here + Keps to add:&nbsp;<br>\n                    Formated as 2 lines (TLE)&nbsp;<br>\n                    <input type="button" onclick="kepsOverlayFunctions.sendNewKeps()" name="nkeps" style="font-weight:bold;" id="keps-nkeps" value="  Send New Keps  ">&nbsp;&nbsp;\n                  </td>\n                  <td colspan="2" align="left" style="border-right: solid 0px;">\n                    <textarea name="kepsnew" id="keps-kepsnew" cols="70" rows="5" style="font-size:9px;line-height:9px;font-weight:bold;"></textarea>\n                  </td>\n                  <td align="center" style="border-right: solid 0px;">\n                    <input type="button" value="Clear All" style="font-weight:bold;" onclick="kepsOverlayFunctions.clearall();">&nbsp;\n                    <input type="button" value="Mark All" style="font-weight:bold;" onclick="kepsOverlayFunctions.markall();">\n                    <br>\n                    <font style="font-family:Arial;font-size:15px;font-weight:bold;vertical-align:15%;">Save</font>\n                    <input style="font-weight:bold;" type="button" value="This" onclick="kepsOverlayFunctions.saveThis();">\n                    <input style="font-weight:bold;" type="button" value="Original" onclick="kepsOverlayFunctions.saveOriginal();">\n                  </td>\n                </tr>\n              </table>\n            </form>\n          </center>\n          \n          <div style="white-space: nowrap;">\n            <font style="font-family: Courier; font-size:15px; line-height:12px; font-weight:bold; color:#000000;">\n              &nbsp;<br>\n              Last Keplerian Data used in Nasa Format&nbsp;${a}<br>\n              &nbsp;&nbsp;&nbsp;<a href="javascript:kepsOverlayFunctions.closeOverlay();" style="color:#000000;">Go Back</a><br>\n              <div style="font-size: 17px;line-height: 18px;padding: 4px 8px;">${r}</div>\n            </font>\n          </div>\n          <br>\n        </div>\n      </div>\n    </div>\n  `,c=document.getElementById("keps-overlay");c&&c.remove(),document.body.insertAdjacentHTML("beforeend",d),window.kepsOverlayFunctions||(window.kepsOverlayFunctions={closeOverlay:function(){const e=document.getElementById("keps-overlay");e&&e.remove()},clearall:function(){document.getElementById("keps-del").value="",document.getElementById("keps-add").value="";const e=document.getElementById("keps-satelites").getElementsByTagName("td");for(let t=5;t<e.length-4;t++)"rgb(187, 255, 170)"!==e[t].style.backgroundColor&&"#bbffaa"!==e[t].style.backgroundColor||(e[t].style.backgroundColor="",document.getElementById("keps-del").value=document.getElementById("keps-del").value+e[t].innerHTML.substring(0,5)+",")},markall:function(){document.getElementById("keps-del").value="",document.getElementById("keps-add").value="";const e=document.getElementById("keps-satelites").getElementsByTagName("td");for(let t=5;t<e.length-4;t++)""===e[t].style.backgroundColor&&(e[t].style.backgroundColor="#bbffaa",document.getElementById("keps-add").value=document.getElementById("keps-add").value+e[t].innerHTML.substring(0,5)+",")},collect:function(){const e=document.getElementById("keps-satelites").getElementsByTagName("td");let t="00000,";for(let n=5;n<e.length-4;n++)""!==e[n].style.backgroundColor&&(t=t+e[n].innerHTML.substring(0,5)+",");const n=t.split(",");n.sort(),t="";for(let e=1;e<n.length;e++)t=t+n[e]+",";window.defaults=t},cambio:function(e,t){const n=t+",";""===e.style.backgroundColor?(e.style.backgroundColor="#bbffaa",document.getElementById("keps-add").value=document.getElementById("keps-add").value+t+",",document.getElementById("keps-del").value=document.getElementById("keps-del").value.replace(n,"")):(e.style.backgroundColor="",document.getElementById("keps-del").value=document.getElementById("keps-del").value+t+",",document.getElementById("keps-add").value=document.getElementById("keps-add").value.replace(n,""))},buscar:function(){const e=document.getElementById("keps-busco");if(e.value.length>0){const t=e.value.toLowerCase();satactivity=satactivity+"S:"+t+"/";const n=document.getElementById("keps-overlay").getElementsByTagName("td");for(let e=4;e<n.length;e++)n[e].innerHTML.toLowerCase().indexOf(t)>-1?n[e].style.color="#ff2200":n[e].style.color="#000000"}},submit:function(){"function"==typeof kepschange&&kepschange(document.getElementById("keps-add").value,document.getElementById("keps-del").value),this.closeOverlay()},sendNewKeps:function(){"function"==typeof kepsupdate&&kepsupdate(document.getElementById("keps-kepsnew").value),this.closeOverlay()},saveThis:function(){this.collect(),satactivity+="This/","function"==typeof kepschange&&kepschange(document.getElementById("keps-add").value,document.getElementById("keps-del").value),"function"==typeof saveMapState&&saveMapState("yes"),this.closeOverlay()},saveOriginal:function(){window.defaults="",satactivity+="Orig/",void 0!==selsatsave&&(window.selsat=selsatsave.slice()),"function"==typeof loadTLE&&loadTLE(),"function"==typeof kepschange&&kepschange("",""),this.closeOverlay()}}),document.getElementById("keps-overlay").addEventListener("click",(function(e){e.target===this&&window.kepsOverlayFunctions.closeOverlay()})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&window.kepsOverlayFunctions.closeOverlay()}))}function screensize(){1==aumento?(aumento=(screen.availWidth-screen.availWidth/14)/8/100,document.getElementById("sz").innerHTML="&#9661;"):(aumento=1,document.getElementById("sz").innerHTML="&#9651;"),navigator.userAgent.indexOf("Firefox")>0?(document.body.style.MozTransform="scale("+aumento+")",document.body.style.MozTransformOrigin="0 0"):document.body.style.zoom=100*aumento+"%",satactivity=satactivity+"AUMENTO"+(1e3*aumento).toFixed(0)+"/"}function formatTLEMatrix(e){let t=0;return e.filter((e=>Array.isArray(e)&&e.length>0&&!e.some((e=>"number"==typeof e&&isNaN(e)||"string"==typeof e&&(e.includes("<!DOCTYPE")||e.includes("*//W3C")))))).map((e=>{let n=null,i=null,a=null;for(const t of e)"string"==typeof t&&(t.startsWith("1 ")?i=t:t.startsWith("2 ")?a=t:n=t);return[n||"UNKNOWN-"+ ++t,i,a]})).filter((e=>e[1]&&e[2]))}async function load(){alljs=await loadAlljson(),1==aumento&&document.getElementById("sz")?document.getElementById("sz").innerHTML="&#9651;":document.getElementById("sz").innerHTML="&#9661;",document.body.style.zoom=100*aumento+"%",navigator.userAgent.indexOf("Firefox")>0&&(document.body.style.MozTransform="scale("+aumento+")",document.body.style.MozTransformOrigin="0 0"),gqs("locator")&&(localocator=(localocalm=gqs("locator").split("#"))[0],document.getElementById("loc").value=localocator),vbasic=eval(document.getElementById("vbasic").innerHTML),document.getElementById("passes").style.width="540px",navigator.cookieEnabled||(document.getElementById("trackingdata").innerHTML='<center>Click on Satellite<br>To see Az/El/Freq<br><font style="font-size:14px;line-height:12px;color:cyan;">Cookies need be enabled<br>To Save Your Selections</font></center>'),"Microsoft Internet Explorer"!=navigator.appName&&(document.getElementById("linkeos").className="noprint"),window.addEventListener?window.addEventListener("beforeunload",(function(e){saveMapState("yes"),sleep(1500)})):window.onbeforeunload=function(){saveMapState("yes"),sleep(1500)},document.getElementById("Div1").style.color=1==zoom?"#000000":"#ffffff",document.getElementById("z"+zoom).style.backgroundColor="yellow",document.getElementById("z"+zoom).style.color="red",document.wwl.lat.value=localat||"0",document.wwl.lon.value=localon||"0",bipset?(bip=!0,document.getElementById("spk").src=imageSrcUrl.speakeron):(bip=!1,document.getElementById("spk").src=imageSrcUrl.speakeroff),document.getElementById("bimg").src=birdsw?imageSrcUrl.birdon:imageSrcUrl.birdoff,1==selsat.length&&(selsat=selsatsave.slice());var rightNow=new Date,jan1=new Date(rightNow.getFullYear(),0,1,0,0,0,0),temp=jan1.toGMTString(),jan2=new Date(temp.substring(0,temp.lastIndexOf(" ")-1)),std_time_offset=(jan1-jan2)/36e5,june1=new Date(rightNow.getFullYear(),6,1,0,0,0,0);temp=june1.toGMTString(),alljs=formatTLEMatrix(alljs);var dedonde,daylight_time_offset,june2=new Date(temp.substring(0,temp.lastIndexOf(" ")-1));if(dst=std_time_offset==(june1-june2)/36e5?0:1,indst=isDST(),loadTLE(),elevationset>0&&(document.getElementById("elevatio").style.color="#ff3126"),"35.2292"==document.wwl.lat.value&&"0.0417"==document.wwl.lon.value&&(document.wwl.lon.value="-97.2917",document.wwl.loc.value="EM15IF"),locator(wwl),localat=(1*document.wwl.lat.value).toFixed(4).toString(),localon=(1*document.wwl.lon.value).toFixed(4).toString(),1==dst&&(dstinfo="D",dstinfo+=1==indst?"T":"F"),""!=dstinfo&&(satactivity="DT:"+dstinfo+"/"),navigator.cookieEnabled||(satactivity+="Cookie:D/"),setInterval("logactivity()",36e5),(vbasic||vbasice)&&(document.getElementById("cal").style.visibility="hidden",document.getElementById("changedate").style.visibility="hidden",document.getElementById("changedate").style.visibility="hidden"),arranque(),gqs("sat")){var satrequested=(gqs("sat").toUpperCase()+" ").substring(0,5);for(satrequested.indexOf("ISS")>-1&&(satrequested="ARISS"),i=0;i<Orb.satelliteMarkers.length;i++){var start_pos=document.getElementById("satelliteMarker"+i).innerHTML.indexOf(">")+1,end_pos=document.getElementById("satelliteMarker"+i).innerHTML.indexOf("<",start_pos),satename=document.getElementById("satelliteMarker"+i).innerHTML.substring(start_pos,end_pos);satrequested==(satename=satename.toUpperCase())&&sh(i+1,"n")}}if(gqs("type")){var typereq=gqs("type").toLowerCase().replace(/#/,"");("fmsats"==typereq||"fm"==typereq||"satsfm"==typereq||"1"==typereq)&&(document.getElementById("click1").click(),selectTLE(1)),("ssbsats"==typereq||"ssb"==typereq||"0"==typereq)&&(document.getElementById("click0").click(),selectTLE(0)),("ssbfm"==typereq||"ssb+fm"==typereq||"7"==typereq)&&(document.getElementById("click7").click(),selectTLE(7)),("noaa"==typereq||"meteo"==typereq||"weather"==typereq||"4"==typereq)&&(document.getElementById("click4").click(),selectTLE(4)),("all"==typereq||"6"==typereq)&&(document.getElementById("click6").click(),selectTLE(6)),("xmt"==typereq||"xmtonly"==typereq||"3"==typereq)&&(document.getElementById("click3").click(),selectTLE(3)),("digital"==typereq||"2"==typereq)&&(document.getElementById("click2").click(),selectTLE(2)),("inrange"==typereq||"range"==typereq||"default"==typereq||"5"==typereq)&&(document.getElementById("click5").click(),selectTLE(5))}if(gqs("z")&&(1==(zf=gqs("z").replace(/#/,""))&&document.getElementById("z1").click(),2==zf&&document.getElementById("z1.5").click(),3==zf&&document.getElementById("z2.2").click(),4==zf&&document.getElementById("z3.5").click(),5==zf&&document.getElementById("z5.3").click(),6==zf&&document.getElementById("z8").click(),8==zf&&document.getElementById("z8").click(),16==zf&&document.getElementById("z16").click()),gqs("t")&&("l"==(tiz=gqs("t").replace(/#/,"").toLowerCase())&&(deltaminutes=0,localtime=!0,Orb.generateTable(document.getElementById("passes"))),"z"==tiz&&(deltaminutes=(new Date).getTimezoneOffset(),localtime=!1,Orb.generateTable(document.getElementById("passes")))),gqs("s")?order=gqs("s")>="0"&&"3">=gqs("s")?gqs("s"):"1":""==order&&(order="1"),gqs("satx")){for(k=1,recoversat="",elimsat="";k<PLib.tleData.length;k++)elimsat=elimsat+PLib.tleData[k][1].substr(2,5)+",",recoversat=recoversat+PLib.tleData[k][1].substr(2,5)+",";for(n=0,agresat="",satrequestedm=gqs("satx").toUpperCase().split(",");n<satrequestedm.length;n++){if(satrequested=(satrequested=(satrequested=(satrequested=(satrequested=satrequestedm[n].toUpperCase().replace(/%20/g,"")).replace(/NOAA/,"NA")).replace(/#/,"")).replace(/ITF/,"TO-89")).replace(/%20/," "),satrequested+="   ",(satrequested=satrequested.substring(0,5)).indexOf("MOON")>-1&&(satrequested=""),satrequested.indexOf("ISS")>-1&&(satrequested="25544"),satrequested.indexOf("LUSAT")>-1&&(satrequested="20442"),satrequested.indexOf("LUSEX")>-1&&(satrequested="41557"),"CAS6A"==satrequested&&(satrequested="CAS-6"),isNumeric(satrequested.substr(0,1)))for(k=1;k<alljs.length;k++)satrequested==alljs[k][1].substr(2,5)&&(agresat=agresat+satrequested+",");else for(k=0;k<freq.length;k++)satrequested.toUpperCase()==freq[k][1].substr(0,5).toUpperCase()&&(agresat=agresat+freq[k][0]+",");if(!isNumeric(satrequested))for(k=1;k<alljs.length;k++)satrequested.toUpperCase()==alljs[k][0].substr(0,5).toUpperCase()&&(agresat=agresat+alljs[k][1].substr(2,5)+",")}agresat?kepschange(agresat,elimsat):alert(alert(gqs("satx").toUpperCase().replace("#","")+" Not Found\nTry celestrak.com")),Orb.satelliteMarkers.length>1?document.getElementById("satelliteMarker1").click():(kepschange(recoversat,""),alert(gqs("satx").toUpperCase()+" Not Found"))}if(gqs("date")&&(isNumeric((datereq=gqs("date").replace(/\//g,",").replace(/\./g,",").replace(/ /g,",").replace(/%20/g,",").replace(/:/g,",").replace(/;/g,",").replace(/,,/g,",").replace(/#/g,"")).replace(/,/g,""))?(act=new Date,(nuevafecham=datereq.split(","))[0]||(nuevafecham[0]=1*act.getDay()),nuevafecham[1]||(nuevafecham[1]=1*act.getMonth()),nuevafecham[2]||(nuevafecham[2]=1*act.getFullYear()),nuevafecham[3]||(nuevafecham[3]=0),nuevafecham[4]||(nuevafecham[4]=0),nuevafecham[5]||(nuevafecham[5]=0),MockDate.set(new Date(nuevafecham[2],1*nuevafecham[1]-1,nuevafecham[0],nuevafecham[3],nuevafecham[4],nuevafecham[5])),dateset=!0,satactivity=satactivity+"CALEINIT"+("0"+1*nuevafecham[1]).slice(-2)+("0"+nuevafecham[0]).slice(-2)+("0"+nuevafecham[3]).slice(-2)+("0"+nuevafecham[4]).slice(-2)+"/",dateset&&(document.getElementById("changedate").style.left="190px",document.getElementById("cal").style.width="52px"),Orb.generateTable(document.getElementById("passes")),tablelasttime=new Date,document.getElementById("Div1").innerHTML="",document.getElementById("Div1").innerHTML="Next passes at your location. Starting at "+tablelasttime.toTimeString()):alert("Date "+gqs("date")+" not valid\n\nShould be dd/mm/year h:m:s\nOr just dd/mm or dd/mm/year\n Reverted to you PC date/time")),document.getElementById("ty5")){for(cu=0;cu<5;cu++){var cuenta0=0;for(k=0;k<freq.length;k++)freq[k][9]==cu&&(cuenta0+=1);cuentaf=" "+cuenta0,document.getElementById("ty"+cu)&&(document.getElementById("ty"+cu).innerText=cuentaf.replace(/ /g,""))}var cuenta0=0;for(k=0;k<freq.length;k++)(0==freq[k][9]||1==freq[k][9])&&(cuenta0+=1);cuentaf=" "+cuenta0,document.getElementById("ty7").innerText=cuentaf.replace(/ /g,""),cuentaf=" "+alljs.length,document.getElementById("ty6")&&(document.getElementById("ty6").innerText=cuentaf.replace(/ /g,""))}document.querySelector("#spinner-overlay").style.display="none"}function onlysat(e){for(k=1;k<PLib.tleData.length;k++)recoversat=recoversat+PLib.tleData[k][1].substr(2,5)+",";for(k=1,elimsat="";k<PLib.tleData.length;k++)elimsat=elimsat+PLib.tleData[k][1].substr(2,5)+",";for(2==Orb.satelliteMarkers.length?(agresat=recoversat,recoversat=""):agresat="",satrequestedm=e.toUpperCase().split(","),n=0;n<satrequestedm.length;n++)if((satrequested=(satrequested=(satrequested=(satrequested=satrequestedm[n].toUpperCase()).replace(/NOAA/,"NA")).replace(/ITF/,"TO-89")).substring(0,5)).indexOf("MOON")>-1&&(satrequested=""),satrequested.indexOf("ISS")>-1&&(satrequested="25544"),satrequested.indexOf("LUSAT")>-1&&(satrequested="20442"),satrequested.indexOf("LUSEX")>-1&&(satrequested="41557"),isNumeric(satrequested.substr(0,1)))for(k=1;k<alljs.length;k++)satrequested==alljs[k][1].substr(2,5)&&(agresat=agresat+satrequested+",");else for(k=0;k<freq.length;k++)satrequested.toUpperCase()==freq[k][1].substr(0,5).toUpperCase()&&(agresat=agresat+freq[k][0]+",");""!=agresat&&kepschange(agresat,elimsat)}var nasabare="";try{xmlHttp=new XMLHttpRequest}catch(e){try{xmlHttp=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{xmlHttp=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){alert("not support AJAX!")}}}function addMinutes(e,t){return new Date(e.getTime()+6e4*t)}function isDST(){var e=new Date,t=e.getFullYear(),n=new Date("March 14, "+t+" 02:00:00"),i=new Date("November 07, "+t+" 02:00:00"),a=n.getDay();return n.setDate(14-a),a=i.getDay(),i.setDate(7-a),!!(endst=!!(e>=n)&&!!(e<i))&&localat>0||(!endst||!(localat<0))&&(!!endst||!(localat>0))&&(!endst&&localat<0||void 0)}function localgmt(){0==deltaminutes?(deltaminutes=(new Date).getTimezoneOffset(),localtime=!1,satactivity+="UTC/"):(deltaminutes=0,localtime=!0,satactivity+="LOCAL/"),Orb.generateTable(document.getElementById("passes"))}function changeelevation(){0==elevationset?(elevationset=10,document.getElementById("elevatio").style.color="#ff3126",document.getElementById("elevatio").title="Show Elevations > "+1*elevationset+"\nClick here to change",satactivity=satactivity+"ELEV"+elevationset+"/"):(elevationset=0,document.getElementById("elevatio").style.color="#00ffff",document.getElementById("elevatio").title="Show Elevations > "+elevationset+"\nClick here to change",satactivity=satactivity+"ELEV"+elevationset+"/"),Orb.generateTable(document.getElementById("passes"))}function loadTLE(){for(v=0;v<alljs.length;v++)("1998-"==alljs[v][0].substring(0,5)||"20"==alljs[v][0].substring(0,2))&&(alljs[v][0]=alljs[v][0].substring(5,10)+" "+alljs[v][0]);var e=[];for(i=0;i<selsat.length;i++)for(j=0;j<alljs.length;j++)if(selsat[i]==alljs[j][1].substring(2,7)){for(k=0,e[i]=[],nuevovalor=alljs[j][0].substring(0,5);k<replacetable.length;k++)alljs[j][0]==replacetable[k][0]&&(nuevovalor=replacetable[k][1].substring(0,5));e[i][0]=nuevovalor,e[i][1]=alljs[j][1],e[i][2]=alljs[j][2],e[i][3]=alljs[j][0];break}for(h=0;h<e.length;h++)e[h]&&PLib.tleData.push(e[h])}function sh(e,t){for(DopplerchangeDownlink=!0,DopplerchangeUplink=!0,where="satelliteMarker"+(e-1),sid="sh"+e,document.getElementById(sid)&&(satname=PLib.tleData[e-1][0]),r=2;r<PLib.tleData.length+1;r++)document.getElementById("sh"+r)&&(document.getElementById("sh"+r).style.color="#ffffff");for(!firstclick&&savesatid==e||"sh1"==sid?"sh1"!=sid&&(document.getElementById(sid).style.color="#ffffff",borrarbox=!0,savebox=""):(document.getElementById(sid).style.color="#00ffff",borrarbox=!1),"noclick"!=t&&document.getElementById(where).click(),i=1;i<satlen+1;i++)if(document.getElementById(i-1)&&"sh1"!=sid)if(satname.substring(0,5).toUpperCase().replace(/^\s+|\s+$/g,"")!=document.getElementById(i-1).title.substring(0,5).toUpperCase().replace(/^\s+|\s+$/g,"")||borrarbox)document.getElementById(i-1).style.backgroundImage="";else{var n=document.getElementById(i-1);n.style.backgroundRepeat="no-repeat",firstclick||"noclick"!=t||savesatid!=e?PLib.tleData.length>2&&(n.style.backgroundImage=`url(${imageSrcUrl.box})`,savebox=satname):n.style.backgroundImage=""}}function selectTLE(e){for(k=0,tiposel=e,tiposatswitch=!0;k<8;k++)document.getElementById("tipo"+k)&&(document.getElementById("tipo"+k).style.textDecoration="none");for(document.getElementById("tipo"+e)&&(document.getElementById("tipo"+e).style.textDecoration="underline"),PLib.tleData.splice(0,PLib.tleData.length),selsat=selsatsave.slice(),loadTLE(),del=",",i=1;i<PLib.tleData.length;i++)for(j=0;j<freq.length;j++)1*e!=7&&PLib.tleData[i][1].substring(2,7)==freq[j][0]&&1*freq[j][9]!=1*e&&(del=del+PLib.tleData[i][1].substring(2,7)+","),1*e==7&&PLib.tleData[i][1].substring(2,7)==freq[j][0]&&1*freq[j][9]!=0&&PLib.tleData[i][1].substring(2,7)==freq[j][0]&&1*freq[j][9]!=1&&(del=del+PLib.tleData[i][1].substring(2,7)+",");if(kepschange(1*e==2||1*e==7?"25544":"",del),(1*e==1||1*e==2||1*e==7)&&(kepschange("25544",add),kepschange("48274",add)),"4"==e||"6"==e){var t="";for(i=1;i<alljs.length;i++)for(j=0;j<freq.length;j++)"4"==e&&alljs[i][1].substring(2,7)==freq[j][0]&&1*freq[j][9]==4&&(t=t+alljs[i][1].substring(2,7)+","),"6"==e&&alljs[i][1].substring(2,7)==freq[j][0]&&(t=t+alljs[i][1].substring(2,7)+",");kepschange(t,add)}}function kepsdeladd(){if(del&&del.length>0){for((kepsdel=(del=del.replace(/undefined/g,"")).split(",")).sort(),i=0;i<kepsdel.length;i++)for(j=0;j<PLib.tleData.length-1;j++)PLib.tleData[j][1].substr(2,5)!=kepsdel[i]||(PLib.tleData.splice(j,1),tiposatswitch||(satactivity=satactivity+"D:"+PLib.tleData[j][0].toUpperCase()+"/"));tiposatswitch=!1}for(del.length>0&&PLib.tleData.length>0&&((borrarultimo=kepsdel[kepsdel.length-1]==PLib.tleData[PLib.tleData.length-1][1].substr(2,5))&&PLib.tleData.splice(-1,1),del=""),k=0;k<PLib.tleData.length;k++)if(add&&add.length>0){for((kepsadd=(add=add.replace(/undefined/g,"")).split(",")).sort(),i=0;i<kepsadd.length;i++)for(j=0;j<alljs.length;j++)if(alljs[j][1].substr(2,5)==kepsadd[i]){var e=!0;for(z=0;z<PLib.tleData.length;z++)alljs[j][1].substr(2,5)==PLib.tleData[z][1].substr(2,5)&&(e=!1);if(e){var t=alljs[j][0];newname="20"==replacesatname(t).substr(0,2)?alljs[j][1].substr(2,5):replacesatname(t),PLib.tleData.push([newname.toUpperCase().substring(0,5),alljs[j][1],alljs[j][2],alljs[j][0]]),satactivity=satactivity+"A:"+newname.toUpperCase().substring(0,5)+"/"}}if(satactivity.split("/D:").length>10){var n=satactivity.indexOf("/D:"),a=satactivity.lastIndexOf("/D:");satactivity=satactivity.slice(0,n)+"/ClearAll/"+satactivity.slice(a+9,satactivity.length)}if(satactivity.split("/A:").length>10){n=satactivity.indexOf("/A:"),a=satactivity.lastIndexOf("/A:");satactivity=satactivity.slice(0,n)+"/MarkAll/"+satactivity.slice(a+9,satactivity.length)}function s(e,t){return(e=e[1])<(t=t[1])?-1:1}PLib.tleData.sort(s)}del="",add=""}function arranque(){Orb.startTracking(document.getElementById("map"),localat,localon),Orb.generateTable(document.getElementById("passes")),0!=order&&(order-=1,changeorder("nolog"))}function rearranque(){localat=(1*document.wwl.lat.value).toFixed(4).toString(),localon=(1*document.wwl.lon.value).toFixed(4).toString(),location.reload(),document.location.href="#Top"}function isNumeric(e){return!isNaN(parseFloat(e))&&isFinite(e)}function locator(e,t){function n(){e.lat.value>=0?e.latg.value=Math.floor(e.lat.value).toFixed(0):e.latg.value=Math.ceil(e.lat.value).toFixed(0),e.latm.value=Math.floor(60*Math.abs(e.lat.value-e.latg.value)).toFixed(0),e.lats.value=Math.round(3600*Math.abs(e.lat.value-e.latg.value)-60*e.latm.value).toFixed(0),60==e.lats.value&&(e.lats.value=0,e.latm.value++),e.lon.value>=0?e.longi.value=Math.floor(e.lon.value).toFixed(0):e.longi.value=Math.ceil(e.lon.value).toFixed(0),e.lonm.value=Math.floor(60*Math.abs(e.lon.value-e.longi.value)).toFixed(0),e.lons.value=Math.round(3600*Math.abs(e.lon.value-e.longi.value)-60*e.lonm.value).toFixed(0),60==e.lons.value&&(e.lons.value=0,e.lonm.value++)}4==(loc=e.loc.value.toUpperCase().replace(/^\s+|\s+$/g,"")).length&&(loc+="LL",e.loc.value=loc),loc.length>0?(err=0,6!=loc.length?err=1:(c0=loc.charAt(0),c1=loc.charAt(1),"O"==(c2=loc.charAt(2))&&(c2="0"),"O"==(c3=loc.charAt(3))&&(c3="0"),c4=loc.charAt(4),c5=loc.charAt(5),(c0<"A"||c0>"R"||c1<"A"||c1>"R"||c2<"0"||c2>"9"||c3<"0"||c3>"9"||c4<"A"||c4>"X"||c5<"A"||c5>"X")&&(err=1)),err?alert("Grid locator "+loc+" Invalid !"):(e.lat.value=(10*(parseInt(c1,28)-19)+parseInt(c3,10)+(parseInt(c5,34)-9.5)/24).toFixed(4),e.lon.value=(20*(parseInt(c0,28)-19)+2*parseInt(c2,10)+(parseInt(c4,34)-9.5)/12).toFixed(4),n(),document.getElementById("mapa").innerHTML="<input type='button' class='det1' value='Google Map' onclick='mapagoogle()'>")):(lat=e.lat.value,lon=e.lon.value,err=0,(lat<-90||lat>90)&&(alert("Latitude Invalid !"),err=1,document.getElementById("mapa").innerHTML=" °.ddd"),(lon<-180||lon>180)&&(alert("Longitude Invalid !"),err=1,document.getElementById("mapa").innerHTML=" °.ddd"),!err&&lat.length>0&&lon.length>0&&(c1=(base="ABCDEFGHIJKLMNOPQRSTUVWX").charAt(Math.floor(lat/10)+9),lat-=10*Math.floor(lat/10),c3=Math.floor(lat),lat-=Math.floor(lat),c5=base.charAt(Math.floor(24*lat)),c0=base.charAt(Math.floor(lon/20)+9),lon-=20*Math.floor(lon/20),c2=Math.floor(lon/2),lon-=2*Math.floor(lon/2),c4=base.charAt(Math.floor(12*lon)),e.loc.value=c0+c1+c2+c3+c4+c5,n(),document.getElementById("mapa").innerHTML="<input type='button' class='click1' value='Google Map' onclick='mapagoogle()' id='button1' name='button1'>")),"1"==t&&(satactivity=satactivity+"NewLoc:"+e.loc.value+"/"),document.getElementById("home")&&(document.getElementById("home").alt="Your Location\nGrid: "+document.wwl.loc.value+"\n To change\nClick Locator",document.getElementById("home").title="Your Location\nGrid: "+document.wwl.loc.value+"\n To change\nClick Locator")}function golocator(){null!=ventana&&ventana.close(),satactivity+="LOCMAP/",irpara="http://k7fry.com/grid/?qth="+(locaid=""==document.getElementById("loc").value?"GF05RK":document.getElementById("loc").value).replace(/^\s+|\s+$/g,""),preferences="toolbar=yes,center,margintop=85,top=85px,left=55px,width="+(screen.availWidth-140)+"px,height="+(screen.availHeight-180)+"px,status=no,scrollbars=yes,resizable=yes,dependent=no,z-lock=yes",ventana=window.open(irpara,"miwindow",preferences)}function reverseazimuth(){return"&nbsp;N&nbsp;"==azisw?(satactivity+="AZR/",void(azisw="&nbsp;R&nbsp;")):"&nbsp;R&nbsp;"==azisw?(satactivity+="AZI/",void(azisw="&nbsp;I&nbsp;")):"&nbsp;I&nbsp;"==azisw?(satactivity+="AZN/",void(azisw="&nbsp;N&nbsp;")):void 0}function setprog(){return"&nbsp;N&nbsp;"==progsw?(satactivity+="PN/",progsw="&nbsp;P&nbsp;",document.getElementById("Tracking").visibility="hidden",void(document.getElementById("Tracking").style.visibility="hidden")):"&nbsp;P&nbsp;"==progsw?(satactivity+="PY/",progsw="&nbsp;N&nbsp;",document.getElementById("Tracking").visibility="visible",void(document.getElementById("Tracking").style.visibility="visible")):void 0}function mapagoogle(){null!=ventana&&ventana.close(),satactivity+="GMAP/",irpara="http://maps.google.com/maps?ll="+document.getElementById("lat").value+"0000,"+document.getElementById("lon").value+"0000&spn=2.991233,5.155884&t=h&hl=en",preferences="toolbar=yes,center,margintop=0,top=0,left=0,width="+(screen.availWidth-20),screen.availHeight,ventana=window.open(irpara,"miwindow",preferences)}function donate(){satactivity+="DONATE/",window.open("https://www.paypal.me/AMSATARGENTINA/","_blank")}async function jBeep(e="Beep.wav"){const t=document.body||document.documentElement,n=document.getElementById("jBeep");n&&n.remove();const i=audioSrcUrl[e.slice(0,-4)];if(!i)return void console.warn(`Audio source not found for key: ${e}`);if(!("undefined"!=typeof Audio&&"function"==typeof Audio.prototype.play))return void console.warn("Audio playback is not supported in this browser.");const a=document.createElement("audio");a.id="jBeep",a.src=i,a.autoplay=!0,a.style.display="none",t.appendChild(a);try{await a.play()}catch(e){console.error("Playback failed:",e)}}function jsDraw2DX(){}function jxGraphics(e){this.origin=new jxPoint(0,0),this.scale=1,this.coordinateSystem="default";var t,n,i,a,s=new Array;e?(t=e).style.overflow="hidden":t=document.body,jsDraw2DX._isVML?((i=document.createElement("v:group")).style.position="absolute",i.style.top="0px",i.style.left="0px",t.appendChild(i)):(n=document.createElementNS("http://www.w3.org/2000/svg","svg"),t.appendChild(n),a=document.createElementNS("http://www.w3.org/2000/svg","defs"),n.appendChild(a),n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.width=t.style.width,n.style.height=t.style.height),this.getDefs=function(){return a},this.addShape=function(e){this.indexOfShape(e)<0&&s.push(e)},this.removeShape=function(e){var t=this.indexOfShape(e);t>=0&&s.splice(t,1)},this.getType=function(){return"jxGraphics"},this.getDiv=function(){return t},this.getSVG=function(){return n},this.getVML=function(){return i},this.logicalToPhysicalPoint=function(e){return"cartecian"==this.coordinateSystem.toLowerCase()?new jxPoint(Math.round(e.x*this.scale+this.origin.x),Math.round(this.origin.y-e.y*this.scale)):new jxPoint(Math.round(e.x*this.scale+this.origin.x),Math.round(e.y*this.scale+this.origin.y))},this.draw=function(e){return e.draw(this)},this.remove=function(e){return e.remove(this)},this.redrawAll=function(){for(ind in s)s[ind].draw(this)},this.getShapesCount=function(){return s.length},this.getShape=function(e){return s[e]},this.indexOfShape=function(e){for(var t=-1,n=s.length,i=0;i<n;i++)e==s[i]&&(t=i);return t}}function jxColor(){var e="#000000";switch(arguments.length){case 1:e=arguments[0];break;case 3:var t=arguments[0],n=arguments[1],i=arguments[2];e=jxColor.rgbToHex(t,n,i)}this.getType=function(){return"jxColor"},this.getValue=function(){return e}}function jxFont(e,t,n,i,a){this.family=null,this.size=null,this.style=null,this.weight=null,e&&(this.family=e),i&&(this.weight=i),t&&(this.size=t),n&&(this.style=n),this.updateSVG=function(e){this.family?e.setAttribute("font-family",this.family):e.setAttribute("font-family","");this.weight?e.setAttribute("fontWeight",this.weight):e.setAttribute("fontWeight","");this.size?e.setAttribute("fontSize",this.size):e.setAttribute("fontSize","");this.style?e.setAttribute("fontStyle",this.style):e.setAttribute("fontStyle","")},this.updateVML=function(e){this.family||(e.style.fontFamily="");this.weight?e.style.fontWeight=this.weight:e.style.fontWeight="";this.size?e.style.fontSize=this.size:e.style.fontSize="";this.style?e.style.fontStyle=this.style:e.style.fontStyle=""},this.getType=function(){return"jxFont"}}function jxPen(e,t,n){this.color=null,this.width=null,this.dashStyle=null,this.color=e||new jxColor("#000000"),this.width=t||"1px",n&&(this.dashStyle=n),this.updateSVG=function(e){if(e.setAttribute("stroke",this.color.getValue()),e.setAttribute("stroke-width",this.width),this.dashStyle){var t=parseInt(this.width);switch(this.dashStyle.toLowerCase()){case"shortdash":e.setAttribute("stroke-dasharray",3*t+" "+t);break;case"shortdot":e.setAttribute("stroke-dasharray",t+" "+t);break;case"shortdashdot":e.setAttribute("stroke-dasharray",3*t+" "+t+" "+t+" "+t);break;case"shortdashdotdot":e.setAttribute("stroke-dasharray",3*t+" "+t+" "+t+" "+t+" "+t+" "+t);break;case"dot":e.setAttribute("stroke-dasharray",t+" "+3*t);break;case"dash":e.setAttribute("stroke-dasharray",4*t+" "+3*t);break;case"longdash":e.setAttribute("stroke-dasharray",8*t+" "+3*t);break;case"dashdot":e.setAttribute("stroke-dasharray",4*t+" "+3*t+" "+t+" "+3*t);break;case"longdashdot":e.setAttribute("stroke-dasharray",8*t+" "+3*t+" "+t+" "+3*t);break;case"longdashdotdot":e.setAttribute("stroke-dasharray",8*t+" "+3*t+" "+t+" "+3*t+" "+t+" "+3*t);break;default:e.setAttribute("stroke-dasharray",this.dashStyle)}}},this.updateVML=function(e){e.Stroke.JoinStyle="miter",e.Stroke.MiterLimit="5",e.StrokeColor=this.color.getValue(),e.StrokeWeight=this.width,this.dashStyle&&(e.Stroke.DashStyle=this.dashStyle);0==parseInt(this.width)&&(e.Stroked="False")},this.getType=function(){return"jxPen"}}function jxBrush(e,t){this.color=null,this.fillType=null,this.color2=null,this.angle=null,this.color=e||new jxColor("#000000"),this.fillType=t||"solid",this.color2=new jxColor("#FFFFFF"),this.updateSVG=function(e,t){var n,i=null;(i=e.getAttribute("fill"))&&("url(#"==i.substr(0,5)?(i=i.substr(5,i.length-6),n=document.getElementById(i)):i=null);if("linear-gradient"==this.fillType||"lin-grad"==this.fillType){var a=document.createElementNS("http://www.w3.org/2000/svg","linearGradient");i?t.replaceChild(a,n):t.appendChild(a);var s=document.createElementNS("http://www.w3.org/2000/svg","stop");a.appendChild(s);var l=document.createElementNS("http://www.w3.org/2000/svg","stop");a.appendChild(l),jsDraw2DX._RefID++,a.setAttribute("id","jsDraw2DX_RefID_"+jsDraw2DX._RefID),null!=this.angle?a.setAttribute("gradientTransform","rotate("+this.angle+" 0.5 0.5)"):a.setAttribute("gradientTransform","rotate(0 0.5 0.5)"),s.setAttribute("offset","0%"),s.setAttribute("style","stop-color:"+this.color.getValue()+";stop-opacity:1"),l.setAttribute("offset","100%"),l.setAttribute("style","stop-color:"+this.color2.getValue()+";stop-opacity:1"),a.appendChild(s),a.appendChild(l),e.setAttribute("fill","url(#jsDraw2DX_RefID_"+jsDraw2DX._RefID+")")}else e.setAttribute("fill",this.color.getValue())},this.updateVML=function(e){e.On="true","solid"==this.fillType?(e.Type="solid",e.Color=this.color.getValue(),e.Color2="",e.Angle=270):(e.Type="gradient",null!=this.angle?e.Angle=270-this.angle:e.Angle=270,e.Color=this.color.getValue(),e.Color2=this.color2.getValue())},this.getType=function(){return"jxBrush"}}function jxPoint(e,t){this.x=e,this.y=t,this.getType=function(){return"jxPoint"}}function jxLine(e,t,n){this.fromPoint=e,this.toPoint=t,this.pen=null;var i,a,s=!0;n&&(this.pen=n),i=jsDraw2DX._isVML?document.createElement("v:line"):document.createElementNS("http://www.w3.org/2000/svg","line"),this.getType=function(){return"jxLine"},this.addEventListener=function(e,t){i.addEventListener?i.addEventListener(e,a,!1):i.attachEvent&&i.attachEvent("on"+e,a);var n=this;function a(e){t(e,n)}},this.draw=function(e){var t,n;t=e.logicalToPhysicalPoint(this.fromPoint),n=e.logicalToPhysicalPoint(this.toPoint);var l,o,r,d;if(this.pen.color.getValue(),this.pen.width,l=t.x,o=t.y,r=n.x,d=n.y,i.style.display="none",jsDraw2DX._isVML){var c=e.getVML();s&&(c.appendChild(i),s=!1),this.pen?this.pen.updateVML(i):i.Stroked="False",i.style.position="absolute",i.From=l+","+o,i.To=r+","+d}else{var p=e.getSVG();s&&(p.appendChild(i),s=!1),this.pen?this.pen.updateSVG(i):i.setAttribute("stroke","none"),i.setAttribute("x1",l),i.setAttribute("y1",o),i.setAttribute("x2",r),i.setAttribute("y2",d)}i.style.display="",a&&e!=a&&a.removeShape(this);(a=e).addShape(this)},this.remove=function(){if(a){if(jsDraw2DX._isVML)a.getVML().removeChild(i);else a.getSVG().removeChild(i);a.removeShape(this),a=null,s=!0}},this.show=function(){i.style.display=""},this.hide=function(){i.style.display="none"}}function jxRect(e,t,n,i,a){this.point=e,this.width=t,this.height=n,this.pen=null,this.brush=null;var s,l,o=!0;i&&(this.pen=i),a&&(this.brush=a),s=jsDraw2DX._isVML?document.createElement("v:rect"):document.createElementNS("http://www.w3.org/2000/svg","rect"),this.getType=function(){return"jxRect"},this.addEventListener=function(e,t){s.addEventListener?s.addEventListener(e,i,!1):s.attachEvent&&s.attachEvent("on"+e,i);var n=this;function i(e){t(e,n)}},this.draw=function(e){var t,n,i,a;if(t=e.logicalToPhysicalPoint(this.point),n=e.scale,i=t.x,a=t.y,s.style.display="none",jsDraw2DX._isVML){var r,d=e.getVML();o&&(d.appendChild(s),o=!1),this.pen?this.pen.updateVML(s):s.Stroked="False",r=s.fill,this.brush?this.brush.updateVML(r):r.On="false",s.style.width=n*this.width,s.style.height=n*this.height,s.style.position="absolute",s.style.top=a,s.style.left=i}else{var c=e.getSVG();o&&(c.appendChild(s),o=!1),this.pen?this.pen.updateSVG(s):s.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(s,e.getDefs()):s.setAttribute("fill","none"),s.setAttribute("x",i),s.setAttribute("y",a),s.setAttribute("width",n*this.width),s.setAttribute("height",n*this.height),s.style.position="absolute"}s.style.display="",l&&e!=l&&l.removeShape(this);(l=e).addShape(this)},this.remove=function(){if(l){if(jsDraw2DX._isVML)l.getVML().removeChild(s);else l.getSVG().removeChild(s);l.removeShape(this),l=null,o=!0}},this.show=function(){s.style.display=""},this.hide=function(){s.style.display="none"}}function jxPolyline(e,t,n){this.points=e,this.pen=null,this.brush=null;var i,a,s=!0;t&&(this.pen=t),n&&(this.brush=n),i=jsDraw2DX._isVML?document.createElement("v:polyline"):document.createElementNS("http://www.w3.org/2000/svg","polyline"),this.getType=function(){return"jxPolyline"},this.addEventListener=function(e,t){i.addEventListener?i.addEventListener(e,a,!1):i.attachEvent&&i.attachEvent("on"+e,a);var n=this;function a(e){t(e,n)}},this.draw=function(e){var t=new Array,n="";for(ind in this.points)t[ind]=e.logicalToPhysicalPoint(this.points[ind]);for(ind in t)n=n+t[ind].x+","+t[ind].y+" ";if(i.style.display="none",jsDraw2DX._isVML){var l,o=e.getVML();s&&(o.appendChild(i),s=!1),this.pen?this.pen.updateVML(i):i.Stroked="False",l=i.fill,this.brush?this.brush.updateVML(l):l.On="false",i.style.position="absolute",i.Points.Value=n}else{var r=e.getSVG();s&&(r.appendChild(i),s=!1),this.pen?this.pen.updateSVG(i):i.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(i,e.getDefs()):i.setAttribute("fill","none"),i.style.position="absolute",i.setAttribute("points",n)}i.style.display="",a&&e!=a&&a.removeShape(this);(a=e).addShape(this)},this.remove=function(){if(a){if(jsDraw2DX._isVML)a.getVML().removeChild(i);else a.getSVG().removeChild(i);a.removeShape(this),a=null,s=!0}},this.show=function(){i.style.display=""},this.hide=function(){i.style.display="none"}}function jxPolygon(e,t,n){this.points=e,this.pen=null,this.brush=null;var i,a,s=!0;t&&(this.pen=t),n&&(this.brush=n),i=jsDraw2DX._isVML?document.createElement("v:polyline"):document.createElementNS("http://www.w3.org/2000/svg","polygon"),this.getType=function(){return"jxPolygon"},this.addEventListener=function(e,t){i.addEventListener?i.addEventListener(e,a,!1):i.attachEvent&&i.attachEvent("on"+e,a);var n=this;function a(e){t(e,n)}},this.draw=function(e){var t=new Array,n="";for(ind in this.points)t[ind]=e.logicalToPhysicalPoint(this.points[ind]);for(ind in t)n=n+t[ind].x+","+t[ind].y+" ";if(i.style.display="none",jsDraw2DX._isVML){n=n+t[0].x+","+t[0].y;var l,o=e.getVML();s&&(o.appendChild(i),s=!1),this.pen?this.pen.updateVML(i):i.Stroked="False",l=i.fill,this.brush?this.brush.updateVML(l):l.On="false",i.style.position="absolute",i.Points.Value=n}else{var r=e.getSVG();s&&(r.appendChild(i),s=!1),this.pen?this.pen.updateSVG(i):i.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(i,e.getDefs()):i.setAttribute("fill","none"),i.style.position="absolute",i.setAttribute("points",n)}i.style.display="",a&&e!=a&&a.removeShape(this);(a=e).addShape(this)},this.remove=function(){if(a){if(jsDraw2DX._isVML)a.getVML().removeChild(i);else a.getSVG().removeChild(i);a.removeShape(this),a=null,s=!0}},this.show=function(){i.style.display=""},this.hide=function(){i.style.display="none"}}function jxCircle(e,t,n,i){this.center=e,this.radius=t,this.pen=null,this.brush=null;var a,s,l=!0;n&&(this.pen=n),i&&(this.brush=i),a=jsDraw2DX._isVML?document.createElement("v:oval"):document.createElementNS("http://www.w3.org/2000/svg","circle"),this.getType=function(){return"jxCircle"},this.addEventListener=function(e,t){a.addEventListener?a.addEventListener(e,i,!1):a.attachEvent&&a.attachEvent("on"+e,i);var n=this;function i(e){t(e,n)}},this.draw=function(e){var t,n,i,o;if(t=e.logicalToPhysicalPoint(this.center),n=e.scale,i=t.x,o=t.y,a.style.display="none",jsDraw2DX._isVML){var r,d=e.getVML();l&&(d.appendChild(a),l=!1),this.pen?this.pen.updateVML(a):a.Stroked="False",r=a.fill,this.brush?this.brush.updateVML(r):r.On="false",a.style.width=n*this.radius*2,a.style.height=n*this.radius*2,a.style.position="absolute",a.style.top=o-n*this.radius,a.style.left=i-n*this.radius}else{var c=e.getSVG();l&&(c.appendChild(a),l=!1),this.pen?this.pen.updateSVG(a):a.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(a,e.getDefs()):a.setAttribute("fill","none"),a.setAttribute("cx",i),a.setAttribute("cy",o),a.setAttribute("r",n*this.radius),a.style.position="absolute"}a.style.display="",s&&e!=s&&s.removeShape(this);(s=e).addShape(this)},this.remove=function(){if(s){if(jsDraw2DX._isVML)s.getVML().removeChild(a);else s.getSVG().removeChild(a);s.removeShape(this),s=null,l=!0}},this.show=function(){a.style.display=""},this.hide=function(){a.style.display="none"}}function jxEllipse(e,t,n,i,a){this.center=e,this.width=t,this.height=n,this.pen=null,this.brush=null;var s,l,o=!0;i&&(this.pen=i),a&&(this.brush=a),s=jsDraw2DX._isVML?document.createElement("v:oval"):document.createElementNS("http://www.w3.org/2000/svg","ellipse"),this.getType=function(){return"jxEllipse"},this.addEventListener=function(e,t){s.addEventListener?s.addEventListener(e,i,!1):s.attachEvent&&s.attachEvent("on"+e,i);var n=this;function i(e){t(e,n)}},this.draw=function(e){var t,n,i,a;if(t=e.logicalToPhysicalPoint(this.center),n=e.scale,i=t.x,a=t.y,s.style.display="none",jsDraw2DX._isVML){var r,d=e.getVML();o&&(d.appendChild(s),o=!1),this.pen?this.pen.updateVML(s):s.Stroked="False",r=s.fill,this.brush?this.brush.updateVML(r):r.On="false",s.style.width=n*this.width,s.style.height=n*this.height,s.style.position="absolute",s.style.top=a-n*this.height/2,s.style.left=i-n*this.width/2}else{var c=e.getSVG();o&&(c.appendChild(s),o=!1),this.pen?this.pen.updateSVG(s):s.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(s,e.getDefs()):s.setAttribute("fill","none"),s.setAttribute("cx",i),s.setAttribute("cy",a),s.setAttribute("rx",n*this.width/2),s.setAttribute("ry",n*this.height/2),s.style.position="absolute"}s.style.display="",l&&e!=l&&l.removeShape(this);(l=e).addShape(this)},this.remove=function(){if(l){if(jsDraw2DX._isVML)l.getVML().removeChild(s);else l.getSVG().removeChild(s);l.removeShape(this),l=null,o=!0}},this.show=function(){s.style.display=""},this.hide=function(){s.style.display="none"}}function jxArc(e,t,n,i,a,s,l){this.center=e,this.width=t,this.height=n,this.startAngle=i,this.arcAngle=a,this.pen=null,this.brush=null;var o,r,d=!0;s&&(this.pen=s),l&&(this.brush=l),o=jsDraw2DX._isVML?document.createElement("v:arc"):document.createElementNS("http://www.w3.org/2000/svg","path"),this.getType=function(){return"jxArc"},this.addEventListener=function(e,t){o.addEventListener?o.addEventListener(e,i,!1):o.attachEvent&&o.attachEvent("on"+e,i);var n=this;function i(e){t(e,n)}},this.draw=function(e){var t,n,s;if(e.logicalToPhysicalPoint(e),t=e.scale,n=this.center.x,s=this.center.y,o.style.display="none",jsDraw2DX._isVML){var l,c,p,u,h=e.getVML();d&&(h.appendChild(o),d=!1),u=this.startAngle+this.arcAngle,i=this.startAngle%360,u%=360,g=t*this.width/2,m=t*this.height/2,k=this.startAngle*Math.PI/180,f=g*m/Math.sqrt(m*m*Math.cos(k)*Math.cos(k)+g*g*Math.sin(k)*Math.sin(k)),c=180*Math.asin(f*Math.sin(k)/m)/Math.PI,this.startAngle>270?c=360+c:this.startAngle>90&&(c=180-c),M=u*Math.PI/180,b=g*m/Math.sqrt(m*m*Math.cos(M)*Math.cos(M)+g*g*Math.sin(M)*Math.sin(M)),p=180*Math.asin(b*Math.sin(M)/m)/Math.PI,u>270?p=360+p:u>90&&(p=180-p),this.pen?this.pen.updateVML(o):o.Stroked="False",l=o.fill,this.brush?this.brush.updateVML(l):l.On="false",o.style.position="absolute",o.style.width=t*this.width,o.style.height=t*this.height,o.style.position="absolute",o.style.left=n-t*this.width/2,o.style.top=s-t*this.height/2,c+=90,o.StartAngle=c>360?c%360:c,(p+=90)>360?(c<=360&&(o.StartAngle=c-360),o.EndAngle=p%360):o.EndAngle=p}else{var g,m,f,b,y,v,x,w,k,M;g=t*this.width/2,m=t*this.height/2,k=this.startAngle*Math.PI/180,y=n+(y=(f=g*m/Math.sqrt(m*m*Math.cos(k)*Math.cos(k)+g*g*Math.sin(k)*Math.sin(k)))*Math.cos(k)),x=s+(x=f*Math.sin(k)),M=(i+a)*Math.PI/180,v=n+(v=(b=g*m/Math.sqrt(m*m*Math.cos(M)*Math.cos(M)+g*g*Math.sin(M)*Math.sin(M)))*Math.cos(M)),w=s+(w=b*Math.sin(M));var E=e.getSVG();d&&(E.appendChild(o),d=!1),this.pen?this.pen.updateSVG(o):o.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(o,e.getDefs()):o.setAttribute("fill","none"),a>180?o.setAttribute("d","M"+y+" "+x+" A"+g+" "+m+" 0 1 1 "+v+" "+w):o.setAttribute("d","M"+y+" "+x+" A"+g+" "+m+" 0 0 1 "+v+" "+w)}o.style.display="",r&&e!=r&&r.removeShape(this);(r=e).addShape(this)},this.remove=function(){if(r){if(jsDraw2DX._isVML)r.getVML().removeChild(o);else r.getSVG().removeChild(o);r.removeShape(this),r=null,d=!0}},this.show=function(){o.style.display=""},this.hide=function(){o.style.display="none"}}function jxArcSector(e,t,n,i,a,s,l){this.center=e,this.width=t,this.height=n,this.startAngle=i,this.arcAngle=a,this.pen=null,this.brush=null;var o,r,d=!0;s&&(this.pen=s),l&&(this.brush=l),o=jsDraw2DX._isVML?document.createElement("v:shape"):document.createElementNS("http://www.w3.org/2000/svg","path"),this.getType=function(){return"jxArcSector"},this.addEventListener=function(e,t){o.addEventListener?o.addEventListener(e,i,!1):o.attachEvent&&o.attachEvent("on"+e,i);var n=this;function i(e){t(e,n)}},this.draw=function(e){var t,n,i,s,l,c,p,u,h,g,m,f,b,y;if(t=e.logicalToPhysicalPoint(this.center),n=e.scale,i=t.x,s=t.y,l=n*this.width/2,c=n*this.height/2,b=this.startAngle*Math.PI/180,p=l*c/Math.sqrt(c*c*Math.cos(b)*Math.cos(b)+l*l*Math.sin(b)*Math.sin(b)),h=p*Math.cos(b),m=p*Math.sin(b),h=i+h,m=s+m,y=(this.startAngle+this.arcAngle)*Math.PI/180,u=l*c/Math.sqrt(c*c*Math.cos(y)*Math.cos(y)+l*l*Math.sin(y)*Math.sin(y)),g=u*Math.cos(y),f=u*Math.sin(y),g=i+g,f=s+f,o.style.display="none",jsDraw2DX._isVML){var v,x,w,k=e.getVML();d&&(k.appendChild(o),d=!1),x=Math.min(f,Math.min(s,m)),w=Math.min(g,Math.min(i,h)),Math.max(f,Math.max(s,m))-x,Math.max(g,Math.max(i,h))-w,this.pen?this.pen.updateVML(o):o.Stroked="False",v=o.fill,this.brush?this.brush.updateVML(v):v.On="false",o.style.position="absolute",o.style.height=1,o.style.width=1,o.CoordSize="1 1",o.Path="M"+i+","+s+" AT"+(i-l)+","+(s-c)+","+(i+l)+","+(s+c)+","+Math.round(g)+","+Math.round(f)+","+Math.round(h)+","+Math.round(m)+" X E"}else{var M=e.getSVG();d&&(M.appendChild(o),d=!1),this.pen?this.pen.updateSVG(o):o.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(o,e.getDefs()):o.setAttribute("fill","none"),a>180?o.setAttribute("d","M"+i+" "+s+" L"+h+" "+m+" A"+l+" "+c+" 0 1 1 "+g+" "+f+" Z"):o.setAttribute("d","M"+i+" "+s+" L"+h+" "+m+" A"+l+" "+c+" 0 0 1 "+g+" "+f+" Z")}o.style.display="",r&&e!=r&&r.removeShape(this);(r=e).addShape(this)},this.remove=function(){if(r){if(jsDraw2DX._isVML)r.getVML().removeChild(o);else r.getSVG().removeChild(o);r.removeShape(this),r=null,d=!0}},this.show=function(){o.style.display=""},this.hide=function(){o.style.display="none"}}function jxCurve(e,t,n,a){this.points=e,this.pen=null,this.brush=null,this.tension=1;var s,l,o=!0;t&&(this.pen=t),n&&(this.brush=n),null!=a&&(this.tension=a),s=jsDraw2DX._isVML?document.createElement("v:shape"):document.createElementNS("http://www.w3.org/2000/svg","path"),this.getType=function(){return"jxCurve"},this.addEventListener=function(e,t){s.addEventListener?s.addEventListener(e,i,!1):s.attachEvent&&s.attachEvent("on"+e,i);var n=this;function i(e){t(e,n)}},this.draw=function(e){var t=new Array;for(ind in this.points)t[ind]=e.logicalToPhysicalPoint(this.points[ind]);var n,a=this.tension,r=new Array,d=new Array,c=new Array;for(i in t)i=parseInt(i),0==i?r[i]=new jxPoint(a*(t[1].x-t[0].x)/2,a*(t[1].y-t[0].y)/2):i==t.length-1?r[i]=new jxPoint(a*(t[i].x-t[i-1].x)/2,a*(t[i].y-t[i-1].y)/2):r[i]=new jxPoint(a*(t[i+1].x-t[i-1].x)/2,a*(t[i+1].y-t[i-1].y)/2);for(i in t)i=parseInt(i),i==t.length-1?(d[i]=new jxPoint(t[i].x+r[i].x/3,t[i].y+r[i].y/3),c[i]=new jxPoint(t[i].x-r[i].x/3,t[i].y-r[i].y/3)):(d[i]=new jxPoint(t[i].x+r[i].x/3,t[i].y+r[i].y/3),c[i]=new jxPoint(t[i+1].x-r[i+1].x/3,t[i+1].y-r[i+1].y/3));for(i in t)i=parseInt(i),0==i&&(n="M"+t[i].x+","+t[i].y),i<t.length-1&&(n=n+" C"+Math.round(d[i].x)+","+Math.round(d[i].y)+","+Math.round(c[i].x)+","+Math.round(c[i].y)+","+Math.round(t[i+1].x)+","+Math.round(t[i+1].y));if(s.style.display="none",jsDraw2DX._isVML){var p,u=e.getVML();o&&(u.appendChild(s),o=!1),this.pen?this.pen.updateVML(s):s.Stroked="False",p=s.fill,this.brush?this.brush.updateVML(p):p.On="false",n+=" E",s.style.position="absolute",s.style.width=1,s.style.height=1,s.CoordSize="1 1",s.Path=n}else{var h=e.getSVG();o&&(h.appendChild(s),o=!1),this.pen?this.pen.updateSVG(s):s.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(s,e.getDefs()):s.setAttribute("fill","none"),s.setAttribute("d",n)}s.style.display="",l&&e!=l&&l.removeShape(this);(l=e).addShape(this)},this.remove=function(){if(l){if(jsDraw2DX._isVML)l.getVML().removeChild(s);else l.getSVG().removeChild(s);l.removeShape(this),l=null,o=!0}},this.show=function(){s.style.display=""},this.hide=function(){s.style.display="none"}}function jxClosedCurve(e,t,n,a){this.points=e,this.pen=null,this.brush=null,this.tension=1;var s,l=!0,o=null;t&&(this.pen=t),n&&(this.brush=n),null!=a&&(this.tension=a),o=jsDraw2DX._isVML?document.createElement("v:shape"):document.createElementNS("http://www.w3.org/2000/svg","path"),this.getType=function(){return"jxClosedCurve"},this.addEventListener=function(e,t){o.addEventListener?o.addEventListener(e,i,!1):o.attachEvent&&o.attachEvent("on"+e,i);var n=this;function i(e){t(e,n)}},this.draw=function(e){var t=new Array;for(ind in this.points)t[ind]=e.logicalToPhysicalPoint(this.points[ind]);var n,a=t.length-1,r=this.tension,d=new Array,c=new Array,p=new Array;for(i in t)i=parseInt(i),0==i?d[i]=new jxPoint(r*(t[1].x-t[a].x)/2,r*(t[1].y-t[a].y)/2):i==t.length-1?d[i]=new jxPoint(r*(t[0].x-t[i-1].x)/2,r*(t[0].y-t[i-1].y)/2):d[i]=new jxPoint(r*(t[i+1].x-t[i-1].x)/2,r*(t[i+1].y-t[i-1].y)/2);for(i in t)i=parseInt(i),i==t.length-1?(c[i]=new jxPoint(t[i].x+d[i].x/3,t[i].y+d[i].y/3),p[i]=new jxPoint(t[0].x-d[0].x/3,t[0].y-d[0].y/3)):(c[i]=new jxPoint(t[i].x+d[i].x/3,t[i].y+d[i].y/3),p[i]=new jxPoint(t[i+1].x-d[i+1].x/3,t[i+1].y-d[i+1].y/3));for(i in t)i=parseInt(i),0==i&&(n="M"+t[i].x+","+t[i].y),i<t.length-1&&(n=n+" C"+Math.round(c[i].x)+","+Math.round(c[i].y)+","+Math.round(p[i].x)+","+Math.round(p[i].y)+","+Math.round(t[i+1].x)+","+Math.round(t[i+1].y)),i==t.length-1&&(n=n+" C"+Math.round(c[i].x)+","+Math.round(c[i].y)+","+Math.round(p[i].x)+","+Math.round(p[i].y)+","+Math.round(t[0].x)+","+Math.round(t[0].y));if(o.style.display="none",jsDraw2DX._isVML){var u,h=e.getVML();l&&(h.appendChild(o),l=!1),n+=" E",this.pen?this.pen.updateVML(o):o.Stroked="False",u=o.fill,this.brush?this.brush.updateVML(u):u.On="false",o.style.position="absolute",o.style.width=1,o.style.height=1,o.CoordSize="1 1",o.Path=n}else{var g=e.getSVG();l&&(g.appendChild(o),l=!1),this.pen?this.pen.updateSVG(o):o.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(o,e.getDefs()):o.setAttribute("fill","none"),o.setAttribute("d",n)}o.style.display="",s&&e!=s&&s.removeShape(this);(s=e).addShape(this)},this.remove=function(){if(s){if(jsDraw2DX._isVML)s.getVML().removeChild(o);else s.getSVG().removeChild(o);s.removeShape(this),s=null,l=!0}},this.show=function(){o.style.display=""},this.hide=function(){o.style.display="none"}}function jxBezier(e,t,n){this.points=e,this.pen=null,this.brush=null;var i,a,s=!0;t&&(this.pen=t),n&&(this.brush=n),i=jsDraw2DX._isVML?document.createElement("v:shape"):document.createElementNS("http://www.w3.org/2000/svg","path"),this.getType=function(){return"jxBezier"},this.addEventListener=function(e,t){i.addEventListener?i.addEventListener(e,a,!1):i.attachEvent&&i.attachEvent("on"+e,a);var n=this;function a(e){t(e,n)}},this.draw=function(e){var t,n=new Array;for(ind in this.points)n[ind]=e.logicalToPhysicalPoint(this.points[ind]);if(n.length>4){var l,o,r,d,c,p=new Array,u=new Array,h=new Array,g=new Array,m=n.length-1,f=10*Math.min(1/Math.abs(n[m].x-n[0].x),1/Math.abs(n[m].y-n[0].y));for(d=0,c=0;c<1;c+=f){for(x=0,y=0,r=0;r<=m;r++)l=Math.pow(c,r)*Math.pow(1-c,m-r)*n[r].x,0==r&&r==m||(l=l*jsDraw2DX.fact(m)/jsDraw2DX.fact(r)/jsDraw2DX.fact(m-r)),x+=l,o=Math.pow(c,r)*Math.pow(1-c,m-r)*n[r].y,0==r&&r==m||(o=o*jsDraw2DX.fact(m)/jsDraw2DX.fact(r)/jsDraw2DX.fact(m-r)),y+=o;g[d]=new jxPoint(x,y),d++}for(r in g[d]=new jxPoint(n[m].x,n[m].y),n=g,tension=1,n)0==(r=parseInt(r))?p[r]=new jxPoint(tension*(n[1].x-n[0].x)/2,tension*(n[1].y-n[0].y)/2):r==n.length-1?p[r]=new jxPoint(tension*(n[r].x-n[r-1].x)/2,tension*(n[r].y-n[r-1].y)/2):p[r]=new jxPoint(tension*(n[r+1].x-n[r-1].x)/2,tension*(n[r+1].y-n[r-1].y)/2);for(r in n)0==(r=parseInt(r))?(u[r]=new jxPoint(n[0].x+p[0].x/3,n[0].y+p[0].y/3),h[r]=new jxPoint(n[1].x-p[1].x/3,n[1].y-p[1].y/3)):r==n.length-1?(u[r]=new jxPoint(n[r].x+p[r].x/3,n[r].y+p[r].y/3),h[r]=new jxPoint(n[r].x-p[r].x/3,n[r].y-p[r].y/3)):(u[r]=new jxPoint(n[r].x+p[r].x/3,n[r].y+p[r].y/3),h[r]=new jxPoint(n[r+1].x-p[r+1].x/3,n[r+1].y-p[r+1].y/3));for(r in n)0==(r=parseInt(r))&&(t="M"+n[r].x+","+n[r].y),r<n.length-1&&(t=t+" C"+Math.round(u[r].x)+","+Math.round(u[r].y)+","+Math.round(h[r].x)+","+Math.round(h[r].y)+","+Math.round(n[r+1].x)+","+Math.round(n[r+1].y))}else if(4==n.length)t=" M"+n[0].x+","+n[0].y+" C"+n[1].x+","+n[1].y+" "+n[2].x+","+n[2].y+" "+n[3].x+","+n[3].y;else if(3==n.length)if(jsDraw2DX._isVML){var b=new jxPoint(2/3*n[1].x+1/3*n[0].x,2/3*n[1].y+1/3*n[0].y),v=new jxPoint(2/3*n[1].x+1/3*n[2].x,2/3*n[1].y+1/3*n[2].y);t=" M"+n[0].x+","+n[0].y+" C"+Math.round(b.x)+","+Math.round(b.y)+" "+Math.round(v.x)+","+Math.round(v.y)+" "+n[2].x+","+n[2].y}else t=" M"+n[0].x+","+n[0].y+" Q"+n[1].x+","+n[1].y+" "+n[2].x+","+n[2].y;if(i.style.display="none",jsDraw2DX._isVML){var w,k=e.getVML();s&&(k.appendChild(i),s=!1),t+=" E",this.pen?this.pen.updateVML(i):i.Stroked="False",w=i.fill,this.brush?this.brush.updateVML(w):w.On="false",i.style.position="absolute",i.style.width=1,i.style.height=1,i.CoordSize="1 1",i.Path=t}else{var M=e.getSVG();s&&(M.appendChild(i),s=!1),this.pen?this.pen.updateSVG(i):i.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(i,e.getDefs()):i.setAttribute("fill","none"),i.setAttribute("d",t)}i.style.display="",a&&e!=a&&a.removeShape(this);(a=e).addShape(this)},this.remove=function(){if(a){if(jsDraw2DX._isVML)a.getVML().removeChild(i);else a.getSVG().removeChild(i);a.removeShape(this),a=null,s=!0}},this.show=function(){i.style.display=""},this.hide=function(){i.style.display="none"}}function jxFunctionGraph(fn,xMin,xMax,pen,brush){this.fn=fn,this.xMin=xMin,this.xMax=xMax,this.pen=null,this.brush=null;var _svgvmlObj,_isFirst=!0,_graphics;function getType(){return"jxFunctionGraph"}function addEventListener(e,t){_svgvmlObj.addEventListener?_svgvmlObj.addEventListener(e,i,!1):_svgvmlObj.attachEvent&&_svgvmlObj.attachEvent("on"+e,i);var n=this;function i(e){t(e,n)}}function validate(fn){with(fn=fn.replace(/x/g,1),Math)try{return eval(fn),!0}catch(ex){return!1}}function draw(graphics){var points=new Array,path,pDpoints,pDpoints=new Array,b1points=new Array,b2points=new Array;if(this.validate(fn)){var x,y,ic=0;for(x=xMin;x<xMax;x++){with(Math)y=eval(fn.replace(/x/g,x));points[ic]=graphics.logicalToPhysicalPoint(new jxPoint(x,y)),ic++}with(Math)y=eval(fn.replace(/x/g,xMax));for(i in points[ic]=graphics.logicalToPhysicalPoint(new jxPoint(x,y)),ic++,tension=1,points)i=parseInt(i),0==i?pDpoints[i]=new jxPoint(tension*(points[1].x-points[0].x)/2,tension*(points[1].y-points[0].y)/2):i==points.length-1?pDpoints[i]=new jxPoint(tension*(points[i].x-points[i-1].x)/2,tension*(points[i].y-points[i-1].y)/2):pDpoints[i]=new jxPoint(tension*(points[i+1].x-points[i-1].x)/2,tension*(points[i+1].y-points[i-1].y)/2);for(i in points)i=parseInt(i),0==i?(b1points[i]=new jxPoint(points[0].x+pDpoints[0].x/3,points[0].y+pDpoints[0].y/3),b2points[i]=new jxPoint(points[1].x-pDpoints[1].x/3,points[1].y-pDpoints[1].y/3)):i==points.length-1?(b1points[i]=new jxPoint(points[i].x+pDpoints[i].x/3,points[i].y+pDpoints[i].y/3),b2points[i]=new jxPoint(points[i].x-pDpoints[i].x/3,points[i].y-pDpoints[i].y/3)):(b1points[i]=new jxPoint(points[i].x+pDpoints[i].x/3,points[i].y+pDpoints[i].y/3),b2points[i]=new jxPoint(points[i+1].x-pDpoints[i+1].x/3,points[i+1].y-pDpoints[i+1].y/3));for(i in points)i=parseInt(i),0==i&&(path="M"+points[i].x+","+points[i].y),i<points.length-1&&(path=path+" C"+Math.round(b1points[i].x)+","+Math.round(b1points[i].y)+","+Math.round(b2points[i].x)+","+Math.round(b2points[i].y)+","+Math.round(points[i+1].x)+","+Math.round(points[i+1].y));if(_svgvmlObj.style.display="none",jsDraw2DX._isVML){var vml=graphics.getVML(),vmlFill;_isFirst&&(vml.appendChild(_svgvmlObj),_isFirst=!1),path+=" E",this.pen?this.pen.updateVML(_svgvmlObj):_svgvmlObj.Stroked="False",vmlFill=_svgvmlObj.fill,this.brush?this.brush.updateVML(vmlFill):vmlFill.On="false",_svgvmlObj.style.position="absolute",_svgvmlObj.style.width=1,_svgvmlObj.style.height=1,_svgvmlObj.CoordSize="1 1",_svgvmlObj.Path=path}else{var svg=graphics.getSVG();_isFirst&&(svg.appendChild(_svgvmlObj),_isFirst=!1),this.pen?this.pen.updateSVG(_svgvmlObj):_svgvmlObj.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(_svgvmlObj,graphics.getDefs()):_svgvmlObj.setAttribute("fill","none"),_svgvmlObj.setAttribute("d",path)}_svgvmlObj.style.display="",_graphics&&graphics!=_graphics&&_graphics.removeShape(this),_graphics=graphics,_graphics.addShape(this)}}function remove(){if(_graphics){if(jsDraw2DX._isVML)_graphics.getVML().removeChild(_svgvmlObj);else _graphics.getSVG().removeChild(_svgvmlObj);_graphics.removeShape(this),_graphics=null,_isFirst=!0}}function show(){_svgvmlObj.style.display=""}function hide(){_svgvmlObj.style.display="none"}pen&&(this.pen=pen),brush&&(this.brush=brush),_svgvmlObj=jsDraw2DX._isVML?document.createElement("v:shape"):document.createElementNS("http://www.w3.org/2000/svg","path"),this.getType=getType,this.addEventListener=addEventListener,this.validate=validate,this.draw=draw,this.remove=remove,this.show=show,this.hide=hide}function jxText(e,t,n,i,a,s){this.point=e,this.text=t,this.font=null,this.pen=null,this.brush=null,this.angle=0;var l,o,r=!0;n&&(this.font=n),i&&(this.pen=i),a&&(this.brush=a),s&&(this.angle=s),l=jsDraw2DX._isVML?document.createElement("v:shape"):document.createElementNS("http://www.w3.org/2000/svg","text"),this.getType=function(){return"jxText"},this.addEventListener=function(e,t){l.addEventListener?l.addEventListener(e,i,!1):l.attachEvent&&l.attachEvent("on"+e,i);var n=this;function i(e){t(e,n)}},this.draw=function(e){var t,n,i;if(t=e.logicalToPhysicalPoint(this.point),n=t.x,i=t.y,l.style.display="none",jsDraw2DX._isVML){var a,s,d,c,p,u,h,g=e.getVML();r&&((d=document.createElement("v:textpath")).On="True",d.style["v-text-align"]="left",l.appendChild(d),g.appendChild(l),r=!1),a=l.fill,d=l.firstChild,this.pen?this.pen.updateVML(l):l.Stroked="False",a=l.fill,this.brush?this.brush.updateVML(a):a.On="false",l.style.position="absolute",l.style.height=1,l.CoordSize="1 1",(s=l.Path).TextPathOk="true",s.v="M"+n+","+i+" L"+(n+100)+","+i+" E",d.String=this.text,this.font?this.font.updateVML(d):jxFont.updateVML(d),l.style.display="",u=l.clientHeight/2*.8,h=this.angle,n=Math.round(n+u*Math.sin(h*Math.PI/180)),i=Math.round(i-u*Math.cos(h*Math.PI/180)),c=Math.round(n+100*Math.cos(h*Math.PI/180)),p=Math.round(i+100*Math.sin(h*Math.PI/180)),l.Path="M"+n+","+i+" L"+c+","+p+" E",l.style.width=1}else{var m=e.getSVG();r&&(m.appendChild(l),r=!1),this.pen?this.pen.updateSVG(l):l.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(l,e.getDefs()):l.setAttribute("fill","none"),this.font?this.font.updateSVG(l):jxFont.updateSVG(l),l.setAttribute("x",n),l.setAttribute("y",i),l.setAttribute("transform","rotate("+this.angle+" "+n+","+i+")"),l.textContent=this.text}l.style.display="",o&&e!=o&&o.removeShape(this);(o=e).addShape(this)},this.remove=function(){if(o){if(jsDraw2DX._isVML)o.getVML().removeChild(l);else o.getSVG().removeChild(l);o.removeShape(this),o=null,r=!0}},this.show=function(){l.style.display=""},this.hide=function(){l.style.display="none"}}function jxImage(point,url,width,height,angle){this.point=point,this.url=url,this.width=width,this.height=height,this.angle=0;var _svgvmlObj,_isFirst=!0,_graphics;function getType(){return"jxImage"}function addEventListener(e,t){_svgvmlObj.addEventListener?_svgvmlObj.addEventListener(e,i,!1):_svgvmlObj.attachEvent&&_svgvmlObj.attachEvent("on"+e,i);var n=this;function i(e){t(e,n)}}function draw(graphics){var point,scale,x,y;if(point=graphics.logicalToPhysicalPoint(this.point),scale=graphics.scale,x=point.x,y=point.y,_svgvmlObj.style.display="none",jsDraw2DX._isVML){with(Math){var x1,y1,ang=this.angle,a=this.angle*PI/180,w,h,m1,m2,m3,m4;w=scale*this.width,h=scale*this.height,x1=x,y1=y,abs(ang)>360&&(ang%=360),ang<0&&(ang=360+ang),ang>=0&&ang<90?(y1=y,x1=x-h*sin(a)):ang>=90&&ang<180?(y1=y-h*sin(a-PI/2),x1=x-(w*sin(a-PI/2)+h*cos(a-PI/2))):ang>=180&&ang<270?(y1=y-(w*sin(a-PI)+h*cos(a-PI)),x1=x-w*cos(a-PI)):ang>=270&&ang<=360&&(x1=x,y1=y-w*cos(a-1.5*PI)),m1=cos(a),m2=-sin(a),m3=sin(a),m4=cos(a)}var vml=graphics.getVML(),vmlFill;_isFirst&&(vml.appendChild(_svgvmlObj),_isFirst=!1),_svgvmlObj.style.width=w,_svgvmlObj.style.height=h,_svgvmlObj.style.position="absolute",_svgvmlObj.style.top=y1,_svgvmlObj.style.left=x1,_svgvmlObj.style.filter="progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand',M11="+m1+",M12="+m2+",M21="+m3+",M22="+m4+") filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+url+"', sizingMethod='scale');"}else{var svg=graphics.getSVG();_isFirst&&(svg.appendChild(_svgvmlObj),_isFirst=!1),_svgvmlObj.setAttribute("x",x),_svgvmlObj.setAttribute("y",y),_svgvmlObj.setAttribute("height",scale*this.height),_svgvmlObj.setAttribute("width",scale*this.width),_svgvmlObj.setAttribute("preserveAspectRatio","none"),_svgvmlObj.setAttributeNS("http://www.w3.org/1999/xlink","href",this.url),_svgvmlObj.setAttribute("transform","rotate("+this.angle+" "+x+","+y+")")}_svgvmlObj.style.display="",_graphics&&graphics!=_graphics&&_graphics.removeShape(this),_graphics=graphics,_graphics.addShape(this)}function remove(){if(_graphics){if(jsDraw2DX._isVML)_graphics.getVML().removeChild(_svgvmlObj);else _graphics.getSVG().removeChild(_svgvmlObj);_graphics.removeShape(this),_graphics=null,_isFirst=!0}}function show(){_svgvmlObj.style.display=""}function hide(){_svgvmlObj.style.display="none"}angle&&(this.angle=angle),_svgvmlObj=jsDraw2DX._isVML?document.createElement("v:image"):document.createElementNS("http://www.w3.org/2000/svg","image"),this.getType=getType,this.addEventListener=addEventListener,this.draw=draw,this.remove=remove,this.show=show,this.hide=hide}!function(e,t){"undefined"!=typeof module?module.exports=t():"function"==typeof define&&"object"==typeof define.amd?define(t):this.MockDate=t()}(0,(function(){"use strict";var e=Date,t=Date.prototype.getTimezoneOffset,n=null;function i(t,i,a,s,l,o,r){var d;switch(arguments.length){case 0:d=null!==n?new e(n):new e;break;case 1:d=new e(t);break;default:d=new e(t,i,a=void 0===a?1:a,s=s||0,l=l||0,o=o||0,r=r||0)}return d}return i.UTC=e.UTC,i.now=function(){return(new i).valueOf()},i.parse=function(t){return e.parse(t)},i.toString=function(){return e.toString()},i.prototype=e.prototype,{set:function(e,t){var a=new Date(e);if(isNaN(a.getTime()))throw TypeError("mockdate: The time set is an invalid date: "+e);"number"==typeof t&&(i.prototype.getTimezoneOffset=function(){return t}),Date=i,e.valueOf&&(e=e.valueOf()),n=a.valueOf()},reset:function(){(Date=e).prototype.getTimezoneOffset=t}}})),jsDraw2DX._RefID=0,jsDraw2DX._isVML=!1,jsDraw2DX.checkIE=function(){if("Microsoft Internet Explorer"==navigator.appName){var e=9;-1!=navigator.appVersion.indexOf("MSIE")&&(e=parseFloat(navigator.appVersion.split("MSIE")[1])),e<9&&(jsDraw2DX._isVML=!0)}},jsDraw2DX.fact=function(e){for(var t=1,n=1;n<=e;n++)t*=n;return t},jsDraw2DX.init=function(){if(jsDraw2DX.checkIE(),jsDraw2DX._isVML){document.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML");for(var e=["fill","stroke","path","textpath"],t=0,n=e.length;t<n;t++)document.createStyleSheet().addRule("v\\:"+e[t],"behavior: url(#default#VML);")}},jsDraw2DX.init(),jxColor.rgbToHex=function(e,t,n){return!(e<0||e>255||t<0||t>255||n<0||n>255)&&"#"+function(e,t){var n=e+"";for(;n.length<t;)n="0"+n;return n}((Math.round(n)+256*Math.round(t)+65536*Math.round(e)).toString(16),6)},jxColor.hexToRgb=function(e){var t,n,i;return"#"==e.charAt(0)&&(e=e.substring(1,7)),t=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16),!(t<0||t>255||n<0||n>255||i<0||i>255)&&new Array(t,n,i)},jxFont.updateSVG=function(e){e.setAttribute("font-family",""),e.setAttribute("fontWeight",""),e.setAttribute("fontSize",""),e.setAttribute("fontStyle","")},jxFont.updateVML=function(e){e.style.fontFamily="",e.style.fontWeight="",e.style.fontSize="",e.style.fontStyle=""};